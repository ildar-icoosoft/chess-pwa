{"version":3,"sources":["features/move/moveSlice.ts","features/games-list/GamePreviewsListItem.module.scss","features/seeks-list/SeeksListItem.module.scss","features/single-game/DrawOfferDialog.module.scss","normalizr/schemas/gameSchema.ts","features/game-clock/gameClockSlice.ts","features/messages/messagesSlice.tsx","services/ioClient.ts","features/single-game/GameClock.module.scss","features/single-game/GameControlPanelStatus.module.scss","features/challenge/challengeSlice.ts","features/games-list/GamePreviewClock.module.scss","features/single-game/GameControlPanel.module.scss","features/single-game/singleGameSlice.ts","features/games-list/GamePreviewsList.module.scss","features/games-list/GamePreviewResult.module.scss","features/single-game/GameControlPanelUserName.module.scss","features/single-game/GameControlPanelTopToolbar.module.scss","features/single-game/GameControlPanelBottomToolbar.module.scss","features/single-game/SingleGameBoard.module.scss","features/messages/Messages.module.scss","features/current-user/currentUserSlice.ts","features/games-list/GamePreviewUserName.tsx","features/games-list/GamePreviewResult.tsx","features/games-list/GamePreviewClock.tsx","features/games-list/GamePreviewsListItem.tsx","features/games-list/GamePreviewsList.tsx","features/games-list/OngoingGamesContainer.tsx","features/home-page/ChallengeButtons.tsx","features/home-page/ChallengeButtonsContainer.tsx","features/challenge-ai-modal/ChallengeAiForm.tsx","features/challenge-ai-modal/ChallengeAiFormContainer.tsx","features/challenge-ai-modal/ChallengeAiModal.tsx","features/challenge-ai-modal/ChallengeAiModalContainer.tsx","features/games-list/CompletedGamesContainer.tsx","features/seek-modal/CreateSeekForm.tsx","features/seek-modal/CreateSeekFormContainer.tsx","features/seek-modal/SeekModal.tsx","features/seek-modal/SeekModalContainer.tsx","features/seeks-list/icons/white.svg","features/seeks-list/icons/black.svg","features/seeks-list/icons/random.svg","features/seeks-list/SeeksListItem.tsx","features/seeks-list/SeeksList.tsx","features/seeks-list/SeeksListContainer.tsx","features/home-page/HomePage.tsx","utils/getGameStatusText.ts","features/single-game/GameMeta.tsx","features/single-game/GameMetaContainer.tsx","features/single-game/GameClock.tsx","features/single-game/GameControlPanelStatus.tsx","features/single-game/GameMoves.tsx","features/single-game/GameControlPanelUserName.tsx","features/single-game/GameControlPanelTopToolbar.tsx","features/single-game/GameControlPanelBottomToolbar.tsx","features/single-game/DrawOfferDialog.tsx","features/single-game/GameControlPanel.tsx","features/single-game/GameControlPanelWrapper.tsx","features/single-game/GameControlPanelContainer.tsx","features/single-game/SingleGameBoard.tsx","features/single-game/SingleGameBoardContainer.tsx","features/single-game/GamePage.tsx","features/header/Header.tsx","features/header/HeaderContainer.tsx","features/auth-modal/LoginForm.tsx","features/auth-modal/RegistrationForm.tsx","features/auth-modal/LoginTabsContainer.tsx","features/auth-modal/AuthModal.tsx","features/auth-modal/AuthModalContainer.tsx","features/messages/Messages.tsx","features/messages/MessagesContainer.tsx","app/App.tsx","serviceWorker.ts","features/entities/entitiesSlice.ts","features/accept-seek-request/acceptSeekRequestSlice.tsx","app/rootReducer.ts","app/store.ts","index.tsx","normalizr/schemas/userSchema.ts","utils/makeChessInstance.ts","features/data-subscription/dataSubscriptionSlice.ts","features/seek-modal/CreateSeekForm.module.scss","normalizr/schemas/seekSchema.ts","features/challenge-ai-modal/ChallengeAiForm.module.scss","features/single-game/GameMoves.module.scss","features/games-list/gamesListSlice.ts","features/seeks-list/seeksListSlice.ts","features/auth-modal/authModalSlice.ts","features/challenge-ai-modal/challengeAiModalSlice.ts","features/seek-modal/seekModalSlice.ts"],"names":["moveSlice","createSlice","name","initialState","reducers","makeMoveRequest","_state","_action","makeMoveSuccess","makeMoveError","extraReducers","actions","makeMove","gameId","move","dispatch","Promise","resolve","reject","ioClient","socket","post","body","jwr","statusCode","normalizedGame","normalize","gameSchema","module","exports","schema","Entity","white","userSchema","black","gameClockSlice","oneSecondPassed","startGameClock","setInterval","messagesSlice","showMessage","state","action","push","payload","hideMessage","_pullAllBy","id","acceptSeekError","type","error","sailsIOClient","socketIOClient","sails","url","challengeSlice","challengeAiRequest","challengeAiSuccess","challengeAiError","createSeekRequest","createSeekSuccess","createSeekError","acceptSeekRequest","_seekId","acceptSeekSuccess","challengeAi","data","createSeek","_isString","acceptSeek","seekId","normalizedSeek","seekSchema","errorMessage","itemId","defaultSingleGameItemState","isLoading","isFlipped","rewindToMoveIndex","singleGameSlice","getSingleGameRequest","Object","assign","getSingleGameSuccess","result","getSingleGameError","abortGameRequest","abortGameSuccess","abortGameError","resignGameRequest","resignGameSuccess","resignGameError","offerDrawRequest","offerDrawSuccess","offerDrawError","acceptDrawOfferRequest","acceptDrawOfferSuccess","acceptDrawOfferError","declineDrawOfferRequest","declineDrawOfferSuccess","declineDrawOfferError","flipBoard","rewindToMove","moveIndex","fetchGame","get","abortGame","resignGame","offerDraw","acceptDrawOffer","declineDrawOffer","currentUserSlice","userId","getCurrentUserRequest","getCurrentUserSuccess","getCurrentUserError","loginSuccess","registerSuccess","logoutSuccess","fetchCurrentUser","normalizedUser","login","put","emailAddress","email","password","register","fullName","confirmPassword","agreed","logout","GamePreviewUserName","game","color","aiLevel","GamePreviewResult","winner","className","css","GamePreviewClock","time","isRunning","formattedTime","moment","startOf","milliseconds","format","data-testid","cx","clock","clockRun","GamePreviewsListItem","fen","makeChessInstance","gamePreview","player","status","btime","turn","board","to","position","viewOnly","width","wtime","GamePreviewsList","games","grid","map","item","key","OngoingGamesContainer","useSelector","denormalize","keys","entities","filter","sort","a","b","createdAt","slice","ChallengeButtons","onChallengeAi","onCreateGame","handleChallengeAi","useCallback","handleCreateGame","Button","variant","onClick","ChallengeButtonsContainer","useDispatch","showChallengeAiModal","showSeekModal","ChallengeAiForm","onSubmit","initialValues","level","clockLimit","clockIncrement","values","formikHelpers","handleChange","handleBlur","handleSubmit","isSubmitting","setStatus","setFieldValue","Form","noValidate","e","onChange","Alert","Group","Label","Control","onBlur","value","min","max","step","Row","ButtonGroup","levelButtonGroup","colorSubmits","disabled","title","colorSubmitsButton","blackButton","randomButton","whiteButton","ChallengeAiFormContainer","history","useHistory","challengeAiAndOpenGamePage","then","catch","err","ChallengeAiModal","show","onHide","Modal","animation","Header","closeButton","Title","Body","ChallengeAiModalContainer","isChallengeAiModalVisible","challengeAiModal","handleHide","hideChallengeAiModal","CompletedGamesContainer","CreateSeekForm","onAbort","handleAbort","spinnerWrapper","Spinner","spinner","spinnerButton","CreateSeekFormContainer","disconnect","reconnect","SeekModal","allowClose","backdrop","SeekModalContainer","seekModal","isSeekModalVisible","allowCloseSeekModal","hideSeekModal","_extends","target","i","arguments","length","source","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","d","_ref3","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","_ref","svgRef","props","x","y","viewBox","style","enableBackground","xmlSpace","ref","ForwardRef","forwardRef","SeeksListItem","acceptInProcess","currentUserId","seek","onPlay","handlePlay","gameIsStarted","colorIcon","createdBy","size","SeeksList","seeks","SeeksListContainer","currentUser","seeksList","items","inProcess","HomePage","Card","GameMeta","getGameStatusText","height","cy","r","stroke","strokeWidth","fill","GameMetaContainer","GameClock","clockEmerg","GameControlPanelStatus","container","formatMove","from","GameMoves","onRewindToMove","movesHistory","scrollToElementRef","useRef","lastMovesQnt","lastGameStatus","useEffect","current","scrollTop","scrollHeight","chess","movesQnt","verbose","movesPairs","_chunk","makeRewindToMoveHandler","movesWrapper","pair","index","whiteMoveIndex","blackMoveIndex","Fragment","moveNumber","role","selected","GameControlPanelUserName","userName","GameControlPanelTopToolbar","isFirstMove","isLastMove","hasPrevMove","hasNextMove","onFlipBoard","onRewindToPrevMove","onRewindToNextMove","onRewindToFirstMove","onRewindToLastMove","handleFlipBoard","handleRewindToPrevMove","handleRewindToNextMove","handleRewindToFirstMove","handleRewindToLastMove","buttonsWrapper","icon","faRetweet","faAngleDoubleLeft","faAngleLeft","faAngleRight","faAngleDoubleRight","GameControlPanelBottomToolbar","canAbortGame","canOfferDraw","canResignGame","onAbortGame","onOfferDraw","onResignGame","handleAbortGame","handleOfferDraw","handleResignGame","faTimes","faHandshake","faFlag","DrawOfferDialog","onAccept","onDecline","handleAccept","handleDecline","dialogWrapper","acceptBtn","faCheck","declineBtn","dialogText","GameControlPanel","orientation","drawOfferSentByCurrentUser","drawOfferSentByOpponent","onAcceptDrawOffer","onDeclineDrawOffer","controlPanel","controlPanelInner","GameControlPanelWrapper","playerPiecesColor","drawOffer","GameControlPanelContainer","singleGameItemState","singleGame","handleAcceptDrawOffer","handleDeclineDrawOffer","handleRewindToMove","SingleGameBoard","onMove","movableColor","chessWithAllMoves","check","in_check","turnColor","PieceColor","WHITE","BLACK","validMoves","getValidMoves","lastMoveSquares","lastMove","singleGameBoard","allowMarkers","clickable","draggable","SingleGameBoardContainer","handleMove","GamePage","useParams","idAsNumber","Number","onLogout","onShowAuthModal","handleLogout","handleShowAuthModal","href","rel","src","process","alt","HeaderContainer","showAuthModal","loginSchema","Yup","shape","required","LoginForm","validationSchema","errors","touched","placeholder","isValid","isInvalid","Feedback","registrationSchema","equals","RegistrationForm","LoginTabsContainer","doLogin","React","doSignUp","Tabs","transition","Tab","eventKey","AuthModal","AuthModalContainer","isAuthModalVisible","authModal","hideAuthModal","Messages","onHideMessage","makeHideMessageHandler","messageId","messages","Toast","onClose","delay","autohide","MessagesContainer","handleHideMessage","App","watchGames","watchSeeks","fetchGames","fetchSeeks","path","Boolean","window","location","hostname","match","getNormalizedDataReducer","users","entitiesSlice","getGamesListSuccess","getSeeksListSuccess","createSeekBySubscription","updateSeekBySubscription","removeSeekBySubscription","updateGameBySubscription","createGameBySubscription","moves","trim","forEach","timePropName","acceptSeekRequestSlice","rootReducer","combineReducers","authModalReducer","challengeAiModalReducer","currentUserReducer","gamesList","gamesListReducer","entitiesReducer","singleGameReducer","seekModalReducer","seeksListReducer","acceptSeekRequestReducer","messagesReducer","store","configureStore","reducer","require","default","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","console","message","startPositionFen","initialFen","Chess","split","sloppy","Error","dataSubscriptionSlice","on","subscriptionData","verb","previous","gamesListSlice","getGamesListRequest","getGamesListError","normalizedGames","seeksListSlice","getSeeksListRequest","getSeeksListError","includes","_pull","authModalSlice","challengeAiModalSlice","seekModalSlice"],"mappings":"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","file":"static/js/main.71a2a8d0.chunk.js","sourcesContent":["/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable @typescript-eslint/no-empty-interface */\n/* eslint-disable import/no-cycle */\n\nimport { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { JWR } from \"sails.io.js\";\nimport { normalize } from \"normalizr\";\nimport NormalizedData from \"../../normalizr/interfaces/NormalizedData\";\nimport { AppThunk } from \"../../app/store\";\nimport Game from \"../../interfaces/Game\";\nimport ioClient from \"../../services/ioClient\";\nimport gameSchema from \"../../normalizr/schemas/gameSchema\";\n\ninterface MoveState {}\n\nconst initialState: MoveState = {};\n\nconst moveSlice = createSlice({\n  name: \"move\",\n  initialState,\n  reducers: {\n    makeMoveRequest(_state, _action: PayloadAction<MoveRequestPayload>) {},\n    makeMoveSuccess(_state, _action: PayloadAction<NormalizedData<number>>) {},\n    makeMoveError(_state, _action: PayloadAction<string>) {},\n  },\n  extraReducers: {},\n});\n\nexport const {\n  makeMoveRequest,\n  makeMoveSuccess,\n  makeMoveError,\n} = moveSlice.actions;\n\nexport default moveSlice.reducer;\n\nexport interface MoveRequestPayload {\n  gameId: number;\n  move: string;\n}\n\nexport const makeMove = (\n  gameId: number,\n  move: string\n): AppThunk<Promise<Game>> => (dispatch) => {\n  dispatch(\n    makeMoveRequest({\n      gameId,\n      move,\n    })\n  );\n\n  return new Promise((resolve, reject) => {\n    ioClient.socket.post(\n      `/api/v1/board/game/${gameId}/move/${move}`,\n      {},\n      (body: unknown, jwr: JWR) => {\n        if (jwr.statusCode === 200) {\n          const normalizedGame = normalize(body as Game, gameSchema);\n\n          dispatch(makeMoveSuccess(normalizedGame));\n          resolve(body as Game);\n        } else {\n          dispatch(makeMoveError(body as string));\n          reject(jwr);\n        }\n      }\n    );\n  });\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gamePreview\":\"GamePreviewsListItem_gamePreview__wYvMw\",\"player\":\"GamePreviewsListItem_player__1GbNi\",\"board\":\"GamePreviewsListItem_board__2y4Yc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gameIsStarted\":\"SeeksListItem_gameIsStarted__3-Jpp\",\"colorIcon\":\"SeeksListItem_colorIcon__12bXP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogWrapper\":\"DrawOfferDialog_dialogWrapper__38JK5\",\"acceptBtn\":\"DrawOfferDialog_acceptBtn__1kykG\",\"declineBtn\":\"DrawOfferDialog_declineBtn__3Umym\",\"dialogText\":\"DrawOfferDialog_dialogText__1yBxj\"};","import { schema } from \"normalizr\";\nimport userSchema from \"./userSchema\";\n\nconst gameSchema = new schema.Entity(\"games\", {\n  white: userSchema,\n  black: userSchema,\n});\n\nexport default gameSchema;\n","/* eslint-disable import/no-cycle */\n/* eslint-disable @typescript-eslint/no-empty-interface */\n\nimport { createSlice } from \"@reduxjs/toolkit\";\nimport { AppThunk } from \"../../app/store\";\n\ninterface GameClockState {}\n\nconst initialState: GameClockState = {};\n\nconst gameClockSlice = createSlice({\n  name: \"gameClock\",\n  initialState,\n  reducers: {\n    oneSecondPassed() {},\n  },\n  extraReducers: {},\n});\n\nexport const { oneSecondPassed } = gameClockSlice.actions;\n\nexport default gameClockSlice.reducer;\n\nexport const startGameClock = (): AppThunk<void> => (dispatch) => {\n  setInterval(() => {\n    dispatch(oneSecondPassed());\n  }, 1000);\n};\n","/* eslint-disable import/no-cycle */\n\nimport { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { pullAllBy as _pullAllBy } from \"lodash\";\nimport { acceptSeekError } from \"../challenge/challengeSlice\";\nimport ItemErrorPayload from \"../../interfaces/ItemErrorPayload\";\nimport { Message } from \"../../interfaces/Message\";\n\nconst initialState: Message[] = [];\n\nconst messagesSlice = createSlice({\n  name: \"messages\",\n  initialState,\n  reducers: {\n    showMessage: (state, action: PayloadAction<Message>) => {\n      state.push(action.payload);\n    },\n    hideMessage: (state, action: PayloadAction<string>) => {\n      _pullAllBy(state, [{ id: action.payload }], \"id\");\n    },\n  },\n  extraReducers: {\n    [acceptSeekError.type]: (\n      state,\n      action: PayloadAction<ItemErrorPayload>\n    ) => {\n      state.push({\n        id: \"acceptSeekError\",\n        body: action.payload.error,\n      });\n    },\n  },\n});\n\nexport const { showMessage, hideMessage } = messagesSlice.actions;\n\nexport default messagesSlice.reducer;\n","import socketIOClient from \"socket.io-client\";\nimport sailsIOClient from \"sails.io.js\";\n\nconst ioClient = sailsIOClient(socketIOClient);\n\nioClient.sails.url = \"http://localhost:1337\";\n\nexport default ioClient;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"clock\":\"GameClock_clock__1XkXv\",\"clockRun\":\"GameClock_clockRun__2zomt\",\"clockEmerg\":\"GameClock_clockEmerg__1sFO2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"GameControlPanelStatus_container__119WU\",\"status\":\"GameControlPanelStatus_status__1IARo\",\"result\":\"GameControlPanelStatus_result__3Qu_O\"};","/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable @typescript-eslint/no-empty-interface */\n/* eslint-disable import/no-cycle */\n\nimport { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { JWR } from \"sails.io.js\";\nimport { normalize } from \"normalizr\";\nimport { isString as _isString } from \"lodash\";\nimport NormalizedData from \"../../normalizr/interfaces/NormalizedData\";\nimport { ChallengeAiData } from \"../../interfaces/ChallengeAiData\";\nimport { AppThunk } from \"../../app/store\";\nimport Game from \"../../interfaces/Game\";\nimport ioClient from \"../../services/ioClient\";\nimport gameSchema from \"../../normalizr/schemas/gameSchema\";\nimport { CreateSeekData } from \"../../interfaces/CreateSeekData\";\nimport ItemErrorPayload from \"../../interfaces/ItemErrorPayload\";\nimport { Seek } from \"../../interfaces/Seek\";\nimport seekSchema from \"../../normalizr/schemas/seekSchema\";\n\ninterface ChallengeState {}\n\nconst initialState: ChallengeState = {};\n\nconst challengeSlice = createSlice({\n  name: \"challenge\",\n  initialState,\n  reducers: {\n    challengeAiRequest() {},\n    challengeAiSuccess(\n      _state,\n      _action: PayloadAction<NormalizedData<number>>\n    ) {},\n    challengeAiError(_state, _action: PayloadAction<string>) {},\n    createSeekRequest() {},\n    createSeekSuccess(\n      _state,\n      _action: PayloadAction<NormalizedData<number>>\n    ) {},\n    createSeekError(_state, _action: PayloadAction<string>) {},\n\n    acceptSeekRequest(_state, _seekId: PayloadAction<number>) {},\n    acceptSeekSuccess(\n      _state,\n      _action: PayloadAction<NormalizedData<number>>\n    ) {},\n    acceptSeekError(_state, _action: PayloadAction<ItemErrorPayload>) {},\n  },\n  extraReducers: {},\n});\n\nexport const {\n  challengeAiRequest,\n  challengeAiSuccess,\n  challengeAiError,\n  createSeekRequest,\n  createSeekSuccess,\n  createSeekError,\n  acceptSeekRequest,\n  acceptSeekSuccess,\n  acceptSeekError,\n} = challengeSlice.actions;\n\nexport default challengeSlice.reducer;\n\nexport const challengeAi = (data: ChallengeAiData): AppThunk<Promise<Game>> => (\n  dispatch\n) => {\n  dispatch(challengeAiRequest());\n\n  return new Promise((resolve, reject) => {\n    ioClient.socket.post(\n      `/api/v1/challenge/ai`,\n      data,\n      (body: unknown, jwr: JWR) => {\n        if (jwr.statusCode === 200) {\n          const normalizedGame = normalize(body as Game, gameSchema);\n\n          dispatch(challengeAiSuccess(normalizedGame));\n          resolve(body as Game);\n        } else {\n          dispatch(challengeAiError(body as string));\n          reject(jwr);\n        }\n      }\n    );\n  });\n};\n\nexport const createSeek = (data: CreateSeekData): AppThunk<Promise<Game>> => (\n  dispatch\n) => {\n  dispatch(createSeekRequest());\n\n  return new Promise((resolve, reject) => {\n    ioClient.socket.post(\n      `/api/v1/board/seek`,\n      data,\n      (body: unknown, jwr: JWR) => {\n        if (jwr.statusCode === 200) {\n          const normalizedGame = normalize(body as Game, gameSchema);\n\n          dispatch(createSeekSuccess(normalizedGame));\n          resolve(body as Game);\n        } else {\n          dispatch(\n            createSeekError(_isString(body) ? body : \"Internal server error\")\n          );\n          reject(jwr);\n        }\n      }\n    );\n  });\n};\n\nexport const acceptSeek = (seekId: number): AppThunk<Promise<Seek>> => (\n  dispatch\n) => {\n  dispatch(acceptSeekRequest(seekId));\n\n  return new Promise((resolve, reject) => {\n    ioClient.socket.post(\n      `/api/v1/board/seek/${seekId}/accept`,\n      {},\n      (body: unknown, jwr: JWR) => {\n        if (jwr.statusCode === 200) {\n          const normalizedSeek = normalize(body as Seek, seekSchema);\n\n          dispatch(acceptSeekSuccess(normalizedSeek));\n          resolve(body as Seek);\n        } else {\n          let errorMessage = body as string;\n          if (jwr.statusCode === 401) {\n            errorMessage = \"You must log in to play a game\";\n          }\n\n          dispatch(\n            acceptSeekError({\n              itemId: seekId,\n              error: errorMessage,\n            })\n          );\n          reject(jwr);\n        }\n      }\n    );\n  });\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"clockRun\":\"GamePreviewClock_clockRun__2fzqU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"controlPanel\":\"GameControlPanel_controlPanel__31q_E\",\"controlPanelInner\":\"GameControlPanel_controlPanelInner__mVrde\"};","/* eslint-disable no-param-reassign */\n/* eslint-disable import/no-cycle */\n/* eslint-disable prefer-object-spread */\n/* eslint-disable @typescript-eslint/no-unused-vars */\n\nimport { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { JWR } from \"sails.io.js\";\nimport { normalize } from \"normalizr\";\nimport { AppThunk } from \"../../app/store\";\nimport Game from \"../../interfaces/Game\";\nimport ioClient from \"../../services/ioClient\";\nimport gameSchema from \"../../normalizr/schemas/gameSchema\";\nimport ItemErrorPayload from \"../../interfaces/ItemErrorPayload\";\nimport NormalizedData from \"../../normalizr/interfaces/NormalizedData\";\n\nexport interface RewindToMovePayload {\n  gameId: number;\n  moveIndex: number | null;\n}\n\ninterface SingleGameItemState {\n  isLoading: boolean;\n  error: string | null;\n  isFlipped: boolean;\n  rewindToMoveIndex: number | null;\n}\n\ninterface SingleGameState {\n  [gameId: string]: SingleGameItemState;\n}\n\nexport const defaultSingleGameItemState: SingleGameItemState = {\n  isLoading: true,\n  error: null,\n  isFlipped: false,\n  rewindToMoveIndex: null,\n};\n\nconst initialState: SingleGameState = {};\n\nconst singleGameSlice = createSlice({\n  name: \"singleGame\",\n  initialState,\n  reducers: {\n    getSingleGameRequest(state, action: PayloadAction<number>) {\n      state[action.payload] = Object.assign(\n        {},\n        defaultSingleGameItemState,\n        state[action.payload],\n        {\n          isLoading: true,\n          error: null,\n        }\n      );\n    },\n    getSingleGameSuccess(state, action: PayloadAction<NormalizedData<number>>) {\n      state[action.payload.result] = Object.assign(\n        {},\n        defaultSingleGameItemState,\n        state[action.payload.result],\n        {\n          isLoading: false,\n          error: null,\n        }\n      );\n    },\n    getSingleGameError(state, action: PayloadAction<ItemErrorPayload>) {\n      state[action.payload.itemId] = Object.assign(\n        {},\n        defaultSingleGameItemState,\n        state[action.payload.itemId],\n        {\n          isLoading: false,\n          error: action.payload.error,\n        }\n      );\n    },\n    abortGameRequest(_state, _action: PayloadAction<number>) {},\n    abortGameSuccess(_state, _action: PayloadAction<NormalizedData<number>>) {},\n    abortGameError(_state, _action: PayloadAction<ItemErrorPayload>) {},\n    resignGameRequest(_state, _action: PayloadAction<number>) {},\n    resignGameSuccess(\n      _state,\n      _action: PayloadAction<NormalizedData<number>>\n    ) {},\n    resignGameError(_state, _action: PayloadAction<ItemErrorPayload>) {},\n\n    offerDrawRequest(_state, _action: PayloadAction<number>) {},\n    offerDrawSuccess(_state, _action: PayloadAction<NormalizedData<number>>) {},\n    offerDrawError(_state, _action: PayloadAction<ItemErrorPayload>) {},\n\n    acceptDrawOfferRequest(_state, _action: PayloadAction<number>) {},\n    acceptDrawOfferSuccess(\n      _state,\n      _action: PayloadAction<NormalizedData<number>>\n    ) {},\n    acceptDrawOfferError(_state, _action: PayloadAction<ItemErrorPayload>) {},\n\n    declineDrawOfferRequest(_state, _action: PayloadAction<number>) {},\n    declineDrawOfferSuccess(\n      _state,\n      _action: PayloadAction<NormalizedData<number>>\n    ) {},\n    declineDrawOfferError(_state, _action: PayloadAction<ItemErrorPayload>) {},\n\n    flipBoard(state, action: PayloadAction<number>) {\n      state[action.payload].isFlipped = !state[action.payload].isFlipped;\n    },\n    rewindToMove(state, action: PayloadAction<RewindToMovePayload>) {\n      state[action.payload.gameId].rewindToMoveIndex = action.payload.moveIndex;\n    },\n  },\n  extraReducers: {},\n});\n\nexport const {\n  getSingleGameRequest,\n  getSingleGameSuccess,\n  getSingleGameError,\n  flipBoard,\n  rewindToMove,\n  abortGameRequest,\n  abortGameSuccess,\n  abortGameError,\n  resignGameRequest,\n  resignGameSuccess,\n  resignGameError,\n  offerDrawRequest,\n  offerDrawSuccess,\n  offerDrawError,\n  acceptDrawOfferRequest,\n  acceptDrawOfferSuccess,\n  acceptDrawOfferError,\n  declineDrawOfferRequest,\n  declineDrawOfferSuccess,\n  declineDrawOfferError,\n} = singleGameSlice.actions;\n\nexport default singleGameSlice.reducer;\n\nexport const fetchGame = (id: number): AppThunk<Promise<Game>> => (\n  dispatch\n) => {\n  dispatch(getSingleGameRequest(id));\n\n  return new Promise((resolve, reject) => {\n    ioClient.socket.get(`/game/${id}`, (body: unknown, jwr: JWR) => {\n      if (jwr.statusCode === 200) {\n        const normalizedGame = normalize(body as Game, gameSchema);\n        dispatch(getSingleGameSuccess(normalizedGame));\n        resolve(body as Game);\n      } else {\n        dispatch(\n          getSingleGameError({\n            itemId: id,\n            error: body as string,\n          })\n        );\n        reject(jwr);\n      }\n    });\n  });\n};\n\nexport const abortGame = (id: number): AppThunk<Promise<Game>> => (\n  dispatch\n) => {\n  dispatch(abortGameRequest(id));\n\n  return new Promise((resolve, reject) => {\n    ioClient.socket.post(\n      `/api/v1/board/game/${id}/abort`,\n      (body: unknown, jwr: JWR) => {\n        if (jwr.statusCode === 200) {\n          const normalizedGame = normalize(body as Game, gameSchema);\n          dispatch(abortGameSuccess(normalizedGame));\n          resolve(body as Game);\n        } else {\n          dispatch(\n            abortGameError({\n              itemId: id,\n              error: body as string,\n            })\n          );\n          reject(jwr);\n        }\n      }\n    );\n  });\n};\n\nexport const resignGame = (id: number): AppThunk<Promise<Game>> => (\n  dispatch\n) => {\n  dispatch(resignGameRequest(id));\n\n  return new Promise((resolve, reject) => {\n    ioClient.socket.post(\n      `/api/v1/board/game/${id}/resign`,\n      (body: unknown, jwr: JWR) => {\n        if (jwr.statusCode === 200) {\n          const normalizedGame = normalize(body as Game, gameSchema);\n          dispatch(resignGameSuccess(normalizedGame));\n          resolve(body as Game);\n        } else {\n          dispatch(\n            resignGameError({\n              itemId: id,\n              error: body as string,\n            })\n          );\n          reject(jwr);\n        }\n      }\n    );\n  });\n};\n\nexport const offerDraw = (id: number): AppThunk<Promise<Game>> => (\n  dispatch\n) => {\n  dispatch(offerDrawRequest(id));\n\n  return new Promise((resolve, reject) => {\n    ioClient.socket.post(\n      `/api/v1/board/game/${id}/draw/yes`,\n      (body: unknown, jwr: JWR) => {\n        if (jwr.statusCode === 200) {\n          const normalizedGame = normalize(body as Game, gameSchema);\n          dispatch(offerDrawSuccess(normalizedGame));\n          resolve(body as Game);\n        } else {\n          dispatch(\n            offerDrawError({\n              itemId: id,\n              error: body as string,\n            })\n          );\n          reject(jwr);\n        }\n      }\n    );\n  });\n};\n\nexport const acceptDrawOffer = (id: number): AppThunk<Promise<Game>> => (\n  dispatch\n) => {\n  dispatch(acceptDrawOfferRequest(id));\n\n  return new Promise((resolve, reject) => {\n    ioClient.socket.post(\n      `/api/v1/board/game/${id}/draw/yes`,\n      (body: unknown, jwr: JWR) => {\n        if (jwr.statusCode === 200) {\n          const normalizedGame = normalize(body as Game, gameSchema);\n          dispatch(acceptDrawOfferSuccess(normalizedGame));\n          resolve(body as Game);\n        } else {\n          dispatch(\n            acceptDrawOfferError({\n              itemId: id,\n              error: body as string,\n            })\n          );\n          reject(jwr);\n        }\n      }\n    );\n  });\n};\nexport const declineDrawOffer = (id: number): AppThunk<Promise<Game>> => (\n  dispatch\n) => {\n  dispatch(declineDrawOfferRequest(id));\n\n  return new Promise((resolve, reject) => {\n    ioClient.socket.post(\n      `/api/v1/board/game/${id}/draw/no`,\n      (body: unknown, jwr: JWR) => {\n        if (jwr.statusCode === 200) {\n          const normalizedGame = normalize(body as Game, gameSchema);\n          dispatch(declineDrawOfferSuccess(normalizedGame));\n          resolve(body as Game);\n        } else {\n          dispatch(\n            declineDrawOfferError({\n              itemId: id,\n              error: body as string,\n            })\n          );\n          reject(jwr);\n        }\n      }\n    );\n  });\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"grid\":\"GamePreviewsList_grid__2iggX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"result\":\"GamePreviewResult_result__2DwMU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userName\":\"GameControlPanelUserName_userName__3wRKP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttonsWrapper\":\"GameControlPanelTopToolbar_buttonsWrapper__TJIBo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttonsWrapper\":\"GameControlPanelBottomToolbar_buttonsWrapper__21ame\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"singleGameBoard\":\"SingleGameBoard_singleGameBoard__2rYay\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"messages\":\"Messages_messages__ESZ_K\"};","/* eslint-disable no-param-reassign */\n/* eslint-disable import/no-cycle */\n\nimport { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { normalize } from \"normalizr\";\nimport { JWR } from \"sails.io.js\";\nimport { AppThunk } from \"../../app/store\";\nimport ioClient from \"../../services/ioClient\";\nimport User from \"../../interfaces/User\";\nimport LoginData from \"../../interfaces/LoginData\";\nimport SignUpData from \"../../interfaces/SignUpData\";\nimport userSchema from \"../../normalizr/schemas/userSchema\";\nimport NormalizedData from \"../../normalizr/interfaces/NormalizedData\";\n\ninterface CurrentUserState {\n  userId: number | null;\n  isLoading: boolean;\n  error: string | null;\n}\n\nconst initialState: CurrentUserState = {\n  userId: null,\n  isLoading: true,\n  error: null,\n};\n\nconst currentUserSlice = createSlice({\n  name: \"currentUser\",\n  initialState,\n  reducers: {\n    getCurrentUserRequest(state) {\n      state.isLoading = true;\n      state.error = null;\n    },\n    getCurrentUserSuccess(\n      state,\n      action: PayloadAction<NormalizedData<number> | null>\n    ) {\n      state.userId = action.payload ? action.payload.result : null;\n      state.isLoading = false;\n      state.error = null;\n    },\n    getCurrentUserError(state, action: PayloadAction<string>) {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n    loginSuccess(state, action: PayloadAction<NormalizedData<number>>) {\n      state.userId = action.payload.result;\n    },\n    registerSuccess(state, action: PayloadAction<NormalizedData<number>>) {\n      state.userId = action.payload.result;\n    },\n    logoutSuccess(state) {\n      state.userId = null;\n    },\n  },\n});\n\nexport const {\n  getCurrentUserRequest,\n  getCurrentUserSuccess,\n  getCurrentUserError,\n  loginSuccess,\n  registerSuccess,\n  logoutSuccess,\n} = currentUserSlice.actions;\n\nexport default currentUserSlice.reducer;\n\nexport const fetchCurrentUser = (): AppThunk<Promise<User | null>> => (\n  dispatch\n) => {\n  dispatch(getCurrentUserRequest());\n\n  return new Promise((resolve, reject) => {\n    ioClient.socket.get(\"/api/v1/account/me\", (body: unknown, jwr: JWR) => {\n      if (jwr.statusCode === 200) {\n        const normalizedUser = normalize(body as User, userSchema);\n\n        dispatch(getCurrentUserSuccess(normalizedUser));\n        resolve(body as User);\n      } else if (jwr.statusCode === 401) {\n        dispatch(getCurrentUserSuccess(null));\n        resolve(null);\n      } else {\n        dispatch(getCurrentUserError(body as string));\n        reject(jwr);\n      }\n    });\n  });\n};\n\nexport const login = (data: LoginData): AppThunk<Promise<User>> => (\n  dispatch\n) => {\n  return new Promise((resolve, reject) => {\n    ioClient.socket.put(\n      \"/api/v1/entrance/login\",\n      {\n        // rememberMe: true, // because of warning in backend @see https://tracker.yandex.ru/CHESSPWA-47\n        emailAddress: data.email,\n        password: data.password,\n      },\n      (body: unknown, jwr: JWR) => {\n        if (jwr.statusCode === 200) {\n          const normalizedUser = normalize(body as User, userSchema);\n\n          dispatch(loginSuccess(normalizedUser));\n          resolve(body as User);\n        } else {\n          reject(jwr);\n        }\n      }\n    );\n  });\n};\n\nexport const register = (data: SignUpData): AppThunk<Promise<User>> => (\n  dispatch\n) => {\n  return new Promise((resolve, reject) => {\n    ioClient.socket.post(\n      \"/api/v1/entrance/signup\",\n      {\n        fullName: data.fullName,\n        emailAddress: data.email,\n        password: data.password,\n        confirmPassword: data.password,\n        agreed: true,\n      },\n      (body: unknown, jwr: JWR) => {\n        if (jwr.statusCode === 200) {\n          const normalizedUser = normalize(body as User, userSchema);\n\n          dispatch(registerSuccess(normalizedUser));\n          resolve(body as User);\n        } else {\n          reject(jwr);\n        }\n      }\n    );\n  });\n};\n\nexport const logout = (): AppThunk<Promise<void>> => (dispatch) => {\n  return new Promise((resolve, reject) => {\n    ioClient.socket.post(\n      \"/api/v1/account/logout\",\n      {},\n      (body: unknown, jwr: JWR) => {\n        if (jwr.statusCode === 200) {\n          dispatch(logoutSuccess());\n          resolve();\n        } else {\n          reject(jwr);\n        }\n      }\n    );\n  });\n};\n","/* eslint-disable @typescript-eslint/no-non-null-assertion */\n\nimport React, { FC } from \"react\";\nimport Game from \"../../interfaces/Game\";\nimport { PieceColor } from \"../../types/PieceColor\";\n\nexport interface GamePreviewUserNameProps {\n  game?: Game;\n  color?: PieceColor;\n}\n\nexport const GamePreviewUserName: FC<GamePreviewUserNameProps> = ({\n  game,\n  color = \"white\",\n}) => {\n  if (!game) {\n    return null;\n  }\n\n  return (\n    <span>\n      {game[color] ? game[color]!.fullName : `AI level ${game.aiLevel}`}\n    </span>\n  );\n};\n","/* eslint-disable @typescript-eslint/no-non-null-assertion */\n\nimport React, { FC } from \"react\";\nimport Game from \"../../interfaces/Game\";\nimport { PieceColor } from \"../../types/PieceColor\";\nimport css from \"./GamePreviewResult.module.scss\";\n\nexport interface GamePreviewResultProps {\n  game?: Game;\n  color?: PieceColor;\n}\n\nexport const GamePreviewResult: FC<GamePreviewResultProps> = ({\n  game,\n  color = \"white\",\n}) => {\n  if (!game) {\n    return null;\n  }\n\n  let result = \"½\";\n  if (game.winner) {\n    if (game.winner === color) {\n      result = \"1\";\n    } else {\n      result = \"0\";\n    }\n  }\n\n  return <span className={css.result}>{result}</span>;\n};\n","import React, { FC } from \"react\";\nimport moment from \"moment\";\nimport cx from \"classnames\";\nimport css from \"./GamePreviewClock.module.scss\";\n\nexport interface GamePreviewClockProps {\n  time?: number; // in msec\n  isRunning?: boolean;\n}\n\nexport const GamePreviewClock: FC<GamePreviewClockProps> = ({\n  time = 0,\n  isRunning = false,\n}) => {\n  const formattedTime = moment()\n    .startOf(\"day\")\n    .milliseconds(time)\n    .format(\"mm:ss\");\n\n  return (\n    <div\n      data-testid=\"time\"\n      className={cx(css.clock, { [css.clockRun]: isRunning })}\n    >\n      {formattedTime}\n    </div>\n  );\n};\n","import React, { FC } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Board } from \"ii-react-chessboard\";\nimport Game from \"../../interfaces/Game\";\nimport makeChessInstance from \"../../utils/makeChessInstance\";\nimport css from \"./GamePreviewsListItem.module.scss\";\nimport { GamePreviewUserName } from \"./GamePreviewUserName\";\nimport { GamePreviewResult } from \"./GamePreviewResult\";\nimport { GamePreviewClock } from \"./GamePreviewClock\";\n\nexport interface GamePreviewsListItemProps {\n  game?: Game;\n}\n\nexport const GamePreviewsListItem: FC<GamePreviewsListItemProps> = ({\n  game,\n}) => {\n  if (!game) {\n    return null;\n  }\n\n  const fen: string = makeChessInstance(game).fen();\n\n  return (\n    <div className={css.gamePreview}>\n      <div className={css.player}>\n        <GamePreviewUserName game={game} color=\"black\" />\n        {game.status === \"started\" && (\n          <GamePreviewClock\n            time={game.btime}\n            isRunning={game.turn === \"black\"}\n          />\n        )}\n        {game.status !== \"started\" && game.status !== \"aborted\" && (\n          <GamePreviewResult game={game} color=\"black\" />\n        )}\n      </div>\n      <div className={css.board}>\n        <Link to={`/game/${game.id}`}>\n          <Board position={fen} viewOnly={false} width={240} />\n        </Link>\n      </div>\n      <div className={css.player}>\n        <GamePreviewUserName game={game} color=\"white\" />\n        {game.status === \"started\" && (\n          <GamePreviewClock\n            time={game.wtime}\n            isRunning={game.turn === \"white\"}\n          />\n        )}\n        {game.status !== \"started\" && game.status !== \"aborted\" && (\n          <GamePreviewResult game={game} color=\"white\" />\n        )}\n      </div>\n    </div>\n  );\n};\n","import React, { FC } from \"react\";\nimport Game from \"../../interfaces/Game\";\nimport css from \"./GamePreviewsList.module.scss\";\nimport { GamePreviewsListItem } from \"./GamePreviewsListItem\";\n\nexport interface GamePreviewsListProps {\n  games?: Game[];\n}\n\nexport const GamePreviewsList: FC<GamePreviewsListProps> = ({ games = [] }) => {\n  return (\n    <div className={css.grid}>\n      {games.map((item) => (\n        <GamePreviewsListItem game={item} key={item.id} />\n      ))}\n    </div>\n  );\n};\n","import React, { FC } from \"react\";\nimport { denormalize } from \"normalizr\";\nimport { useSelector } from \"react-redux\";\nimport { GamePreviewsList } from \"./GamePreviewsList\";\nimport { RootState } from \"../../app/rootReducer\";\nimport gameSchema from \"../../normalizr/schemas/gameSchema\";\nimport Game from \"../../interfaces/Game\";\n\nconst limit = 9;\n\nconst OngoingGamesContainer: FC<unknown> = () => {\n  const games = useSelector((state: RootState) =>\n    denormalize(Object.keys(state.entities.games), [gameSchema], state.entities)\n      .filter((game: Game) => game.status === \"started\")\n      .sort((a: Game, b: Game) => b.createdAt - a.createdAt)\n      .slice(0, limit)\n  );\n\n  return <GamePreviewsList games={games} />;\n};\n\nexport default OngoingGamesContainer;\n","import React, { FC, useCallback } from \"react\";\nimport { Button } from \"react-bootstrap\";\n\nexport interface ChallengeButtonsProps {\n  onChallengeAi?(): void;\n  onCreateGame?(): void;\n}\n\nexport const ChallengeButtons: FC<ChallengeButtonsProps> = ({\n  onChallengeAi,\n  onCreateGame,\n}) => {\n  const handleChallengeAi = useCallback(() => {\n    if (onChallengeAi) {\n      onChallengeAi();\n    }\n  }, [onChallengeAi]);\n\n  const handleCreateGame = useCallback(() => {\n    if (onCreateGame) {\n      onCreateGame();\n    }\n  }, [onCreateGame]);\n\n  return (\n    <div className=\"mb-3\">\n      <Button\n        variant=\"primary\"\n        onClick={handleCreateGame}\n        data-testid=\"create-game-btn\"\n        className=\"mr-3\"\n      >\n        Create a game\n      </Button>\n      <Button\n        variant=\"primary\"\n        onClick={handleChallengeAi}\n        data-testid=\"challenge-ai-btn\"\n      >\n        Play with the computer\n      </Button>\n    </div>\n  );\n};\n","import React, { FC, useCallback } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { ChallengeButtons } from \"./ChallengeButtons\";\nimport { showChallengeAiModal } from \"../challenge-ai-modal/challengeAiModalSlice\";\nimport { showSeekModal } from \"../seek-modal/seekModalSlice\";\n\nconst ChallengeButtonsContainer: FC<unknown> = () => {\n  const dispatch = useDispatch();\n\n  const handleChallengeAi = useCallback(() => {\n    dispatch(showChallengeAiModal());\n  }, [dispatch]);\n\n  const handleCreateGame = useCallback(() => {\n    dispatch(showSeekModal());\n  }, [dispatch]);\n\n  return (\n    <ChallengeButtons\n      onChallengeAi={handleChallengeAi}\n      onCreateGame={handleCreateGame}\n    />\n  );\n};\n\nexport default ChallengeButtonsContainer;\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { Formik, FormikHelpers } from \"formik\";\nimport React, { FC, FormEvent } from \"react\";\nimport cx from \"classnames\";\nimport { Alert, Button, ButtonGroup, Form, Row } from \"react-bootstrap\";\nimport { ChallengeAiData } from \"../../interfaces/ChallengeAiData\";\nimport css from \"./ChallengeAiForm.module.scss\";\n\nexport interface ChallengeAiFormProps {\n  onSubmit?(\n    values: ChallengeAiData,\n    formikHelpers: FormikHelpers<ChallengeAiData>\n  ): void | Promise<any>;\n}\n\nexport const ChallengeAiForm: FC<ChallengeAiFormProps> = ({ onSubmit }) => {\n  return (\n    <Formik\n      initialValues={{\n        level: 2,\n        color: \"\",\n        clockLimit: 300,\n        clockIncrement: 3,\n      }}\n      onSubmit={(values, formikHelpers): Promise<any> | void => {\n        if (onSubmit) {\n          return onSubmit(\n            values as ChallengeAiData,\n            formikHelpers as FormikHelpers<ChallengeAiData>\n          );\n        }\n        return undefined;\n      }}\n    >\n      {({\n        values,\n        handleChange,\n        handleBlur,\n        handleSubmit,\n        isSubmitting,\n        status,\n        setStatus,\n        setFieldValue,\n        /* and other goodies */\n      }) => (\n        <Form\n          noValidate\n          onSubmit={(e) => handleSubmit(e as FormEvent<HTMLFormElement>)}\n          onChange={() => setStatus(\"\")}\n        >\n          {!!status && <Alert variant=\"danger\">{status}</Alert>}\n          <fieldset>\n            <Form.Group>\n              <Form.Label>\n                Minutes per side: {values.clockLimit / 60}\n              </Form.Label>\n              <Form.Control\n                type=\"range\"\n                name=\"clockLimit\"\n                onBlur={handleBlur}\n                value={values.clockLimit}\n                onChange={handleChange}\n                min=\"60\"\n                max=\"1800\"\n                step=\"60\"\n              />\n            </Form.Group>\n\n            <Form.Group>\n              <Form.Label>\n                Increment in seconds: {values.clockIncrement}\n              </Form.Label>\n              <Form.Control\n                type=\"range\"\n                name=\"clockIncrement\"\n                onBlur={handleBlur}\n                value={values.clockIncrement}\n                onChange={handleChange}\n                min=\"0\"\n                max=\"60\"\n              />\n            </Form.Group>\n          </fieldset>\n\n          <div className=\"text-center\">Level</div>\n\n          <Row>\n            <ButtonGroup className={cx(\"mx-auto\", css.levelButtonGroup)}>\n              {[1, 2, 3, 4].map((level) => (\n                <Button\n                  key={level}\n                  type=\"button\"\n                  variant={level === values.level ? \"dark\" : \"light\"}\n                  onClick={() => setFieldValue(\"level\", level)}\n                >\n                  {level}\n                </Button>\n              ))}\n            </ButtonGroup>\n          </Row>\n\n          <div className=\"text-center\">A.I. Level: {values.level}</div>\n\n          <div className={css.colorSubmits}>\n            <button\n              disabled={isSubmitting}\n              type=\"submit\"\n              title=\"Black\"\n              className={cx(css.colorSubmitsButton, css.blackButton)}\n              onClick={() => setFieldValue(\"color\", \"black\")}\n            >\n              <i />\n            </button>\n            <button\n              disabled={isSubmitting}\n              type=\"submit\"\n              title=\"Random side\"\n              className={cx(css.colorSubmitsButton, css.randomButton)}\n              onClick={() => setFieldValue(\"color\", \"random\")}\n            >\n              <i />\n            </button>\n            <button\n              disabled={isSubmitting}\n              type=\"submit\"\n              title=\"White\"\n              className={cx(css.colorSubmitsButton, css.whiteButton)}\n              onClick={() => setFieldValue(\"color\", \"white\")}\n            >\n              <i />\n            </button>\n          </div>\n        </Form>\n      )}\n    </Formik>\n  );\n};\n","import React, { FC, useCallback } from \"react\";\nimport { FormikHelpers } from \"formik\";\nimport { useHistory } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport { ChallengeAiForm } from \"./ChallengeAiForm\";\nimport { AppDispatch } from \"../../app/store\";\nimport { challengeAi } from \"../challenge/challengeSlice\";\nimport { ChallengeAiData } from \"../../interfaces/ChallengeAiData\";\nimport Game from \"../../interfaces/Game\";\n\nconst ChallengeAiFormContainer: FC<unknown> = () => {\n  const dispatch = useDispatch<AppDispatch>();\n\n  const history = useHistory();\n\n  const challengeAiAndOpenGamePage = useCallback(\n    (\n      values: ChallengeAiData,\n      formikHelpers: FormikHelpers<ChallengeAiData>\n    ) => {\n      return dispatch(challengeAi(values))\n        .then((game: Game) => {\n          history.push(`/game/${game.id}`);\n        })\n        .catch((err) => {\n          if (err.statusCode === 401) {\n            formikHelpers.setStatus(\"You must log in to play with computer\");\n          } else {\n            formikHelpers.setStatus(\"Internal server error\");\n          }\n        });\n    },\n    [dispatch, history]\n  );\n\n  return <ChallengeAiForm onSubmit={challengeAiAndOpenGamePage} />;\n};\n\nexport default ChallengeAiFormContainer;\n","import React, { FC } from \"react\";\nimport { Modal } from \"react-bootstrap\";\nimport ChallengeAiFormContainer from \"./ChallengeAiFormContainer\";\n\nexport interface ChallengeAiModalProps {\n  show?: boolean;\n  onHide?(): void;\n}\n\nexport const ChallengeAiModal: FC<ChallengeAiModalProps> = ({\n  show = false,\n  onHide,\n}) => {\n  return (\n    <Modal show={show} onHide={onHide} animation={false}>\n      <Modal.Header closeButton>\n        <Modal.Title>Play with the computer</Modal.Title>\n      </Modal.Header>\n\n      <Modal.Body>\n        <ChallengeAiFormContainer />\n      </Modal.Body>\n    </Modal>\n  );\n};\n","import React, { FC, useCallback } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { ChallengeAiModal } from \"./ChallengeAiModal\";\nimport { RootState } from \"../../app/rootReducer\";\nimport { hideChallengeAiModal } from \"./challengeAiModalSlice\";\n\nconst ChallengeAiModalContainer: FC<unknown> = () => {\n  const { isChallengeAiModalVisible } = useSelector(\n    (state: RootState) => state.challengeAiModal\n  );\n\n  const dispatch = useDispatch();\n\n  const handleHide = useCallback(() => {\n    dispatch(hideChallengeAiModal());\n  }, [dispatch]);\n\n  return (\n    <ChallengeAiModal show={isChallengeAiModalVisible} onHide={handleHide} />\n  );\n};\n\nexport default ChallengeAiModalContainer;\n","import React, { FC } from \"react\";\nimport { denormalize } from \"normalizr\";\nimport { useSelector } from \"react-redux\";\nimport { GamePreviewsList } from \"./GamePreviewsList\";\nimport { RootState } from \"../../app/rootReducer\";\nimport gameSchema from \"../../normalizr/schemas/gameSchema\";\nimport Game from \"../../interfaces/Game\";\n\nconst limit = 9;\n\nconst CompletedGamesContainer: FC<unknown> = () => {\n  const games = useSelector((state: RootState) =>\n    denormalize(Object.keys(state.entities.games), [gameSchema], state.entities)\n      .filter(\n        (game: Game) => game.status !== \"started\" && game.status !== \"aborted\"\n      )\n      .sort((a: Game, b: Game) => b.createdAt - a.createdAt)\n      .slice(0, limit)\n  );\n\n  return <GamePreviewsList games={games} />;\n};\n\nexport default CompletedGamesContainer;\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { Formik, FormikHelpers } from \"formik\";\nimport React, { FC, FormEvent, useCallback } from \"react\";\nimport { Alert, Button, Form, Spinner } from \"react-bootstrap\";\nimport cx from \"classnames\";\nimport { CreateSeekData } from \"../../interfaces/CreateSeekData\";\nimport { ChallengeAiData } from \"../../interfaces/ChallengeAiData\";\nimport css from \"./CreateSeekForm.module.scss\";\n\nexport interface CreateSeekFormProps {\n  onSubmit?(\n    values: CreateSeekData,\n    formikHelpers: FormikHelpers<CreateSeekData>\n  ): void | Promise<any>;\n  onAbort?(): void;\n}\n\nexport const CreateSeekForm: FC<CreateSeekFormProps> = ({\n  onSubmit,\n  onAbort,\n}) => {\n  const handleAbort = useCallback(() => {\n    if (onAbort) {\n      onAbort();\n    }\n  }, [onAbort]);\n\n  return (\n    <Formik\n      initialValues={{\n        color: \"\",\n        clockLimit: 300,\n        clockIncrement: 3,\n      }}\n      onSubmit={(values, formikHelpers): Promise<any> | void => {\n        if (onSubmit) {\n          return onSubmit(\n            values as ChallengeAiData,\n            formikHelpers as FormikHelpers<CreateSeekData>\n          );\n        }\n        return undefined;\n      }}\n    >\n      {({\n        values,\n        handleChange,\n        handleBlur,\n        handleSubmit,\n        isSubmitting,\n        status,\n        setStatus,\n        setFieldValue,\n        /* and other goodies */\n      }) => (\n        <Form\n          noValidate\n          onSubmit={(e) => handleSubmit(e as FormEvent<HTMLFormElement>)}\n          onChange={() => setStatus(\"\")}\n        >\n          {!!status && <Alert variant=\"danger\">{status}</Alert>}\n          <fieldset>\n            <Form.Group>\n              <Form.Label>\n                Minutes per side: {values.clockLimit / 60}\n              </Form.Label>\n              <Form.Control\n                disabled={isSubmitting}\n                type=\"range\"\n                name=\"clockLimit\"\n                onBlur={handleBlur}\n                value={values.clockLimit}\n                onChange={handleChange}\n                min=\"60\"\n                max=\"1800\"\n                step=\"60\"\n              />\n            </Form.Group>\n\n            <Form.Group>\n              <Form.Label>\n                Increment in seconds: {values.clockIncrement}\n              </Form.Label>\n              <Form.Control\n                disabled={isSubmitting}\n                type=\"range\"\n                name=\"clockIncrement\"\n                onBlur={handleBlur}\n                value={values.clockIncrement}\n                onChange={handleChange}\n                min=\"0\"\n                max=\"60\"\n              />\n            </Form.Group>\n          </fieldset>\n\n          <div className={css.colorSubmits}>\n            <button\n              disabled={isSubmitting}\n              type=\"submit\"\n              title=\"Black\"\n              className={cx(css.colorSubmitsButton, css.blackButton)}\n              onClick={() => setFieldValue(\"color\", \"black\")}\n            >\n              <i />\n            </button>\n            <button\n              disabled={isSubmitting}\n              type=\"submit\"\n              title=\"Random side\"\n              className={cx(css.colorSubmitsButton, css.randomButton)}\n              onClick={() => setFieldValue(\"color\", \"random\")}\n            >\n              <i />\n            </button>\n            <button\n              disabled={isSubmitting}\n              type=\"submit\"\n              title=\"White\"\n              className={cx(css.colorSubmitsButton, css.whiteButton)}\n              onClick={() => setFieldValue(\"color\", \"white\")}\n            >\n              <i />\n            </button>\n          </div>\n\n          {isSubmitting && (\n            <div className={css.spinnerWrapper}>\n              <Spinner animation=\"border\" className={css.spinner}>\n                <span className=\"sr-only\">Waiting for opponent...</span>\n              </Spinner>\n\n              <Button\n                variant=\"danger\"\n                className={css.spinnerButton}\n                onClick={handleAbort}\n              >\n                Abort\n              </Button>\n            </div>\n          )}\n        </Form>\n      )}\n    </Formik>\n  );\n};\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n\nimport React, { FC, useCallback } from \"react\";\nimport { FormikHelpers } from \"formik\";\nimport { useDispatch } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { CreateSeekForm } from \"./CreateSeekForm\";\nimport { createSeek } from \"../challenge/challengeSlice\";\nimport { CreateSeekData } from \"../../interfaces/CreateSeekData\";\nimport { AppDispatch } from \"../../app/store\";\nimport Game from \"../../interfaces/Game\";\n\nimport ioClient from \"../../services/ioClient\";\n\nconst CreateSeekFormContainer: FC<unknown> = () => {\n  const dispatch = useDispatch<AppDispatch>();\n\n  const history = useHistory();\n\n  const handleSubmit = useCallback(\n    (values: CreateSeekData, formikHelpers: FormikHelpers<CreateSeekData>) => {\n      return dispatch(createSeek(values))\n        .then((game: Game) => {\n          history.push(`/game/${game.id}`);\n        })\n        .catch((err) => {\n          if (err.statusCode === 401) {\n            formikHelpers.setStatus(\"You must log in to create a game\");\n          } else if (err.statusCode === 0) {\n            // request is aborted by client. do nothing\n          } else {\n            formikHelpers.setStatus(\"Internal server error\");\n          }\n        });\n    },\n    [dispatch, history]\n  );\n\n  // @todo. This is temporary solution. We need to use HTTP requests instead of sockets and we need\n  //  to abort the createSeek HTTP request instead of sockets disconnect.\n  const handleAbort = useCallback(() => {\n    // @ts-ignore\n    ioClient.socket.disconnect();\n    ioClient.socket.reconnect();\n  }, []);\n\n  return <CreateSeekForm onSubmit={handleSubmit} onAbort={handleAbort} />;\n};\n\nexport default CreateSeekFormContainer;\n","import React, { FC } from \"react\";\nimport { Modal } from \"react-bootstrap\";\nimport CreateSeekFormContainer from \"./CreateSeekFormContainer\";\n\nexport interface SeekModalProps {\n  allowClose?: boolean;\n  show?: boolean;\n  onHide?(): void;\n}\n\nexport const SeekModal: FC<SeekModalProps> = ({\n  allowClose = true,\n  show = false,\n  onHide,\n}) => {\n  return (\n    <Modal\n      show={show}\n      onHide={onHide}\n      animation={false}\n      backdrop={allowClose ? true : \"static\"}\n    >\n      <Modal.Header closeButton={allowClose}>\n        <Modal.Title>Create a game</Modal.Title>\n      </Modal.Header>\n\n      <Modal.Body>\n        <CreateSeekFormContainer />\n      </Modal.Body>\n    </Modal>\n  );\n};\n","import React, { FC, useCallback } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { SeekModal } from \"./SeekModal\";\nimport { RootState } from \"../../app/rootReducer\";\nimport { hideSeekModal } from \"./seekModalSlice\";\n\nconst SeekModalContainer: FC<unknown> = () => {\n  const { isSeekModalVisible, allowCloseSeekModal } = useSelector(\n    (state: RootState) => state.seekModal\n  );\n\n  const dispatch = useDispatch();\n\n  const handleHide = useCallback(() => {\n    dispatch(hideSeekModal());\n  }, [dispatch]);\n\n  return (\n    <SeekModal\n      allowClose={allowCloseSeekModal}\n      show={isSeekModalVisible}\n      onHide={handleHide}\n    />\n  );\n};\n\nexport default SeekModalContainer;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M256,0C114.618,0,0,114.618,0,256s114.618,256,256,256s256-114.618,256-256S397.382,0,256,0z M256,469.333 c-117.818,0-213.333-95.515-213.333-213.333S138.182,42.667,256,42.667S469.333,138.182,469.333,256S373.818,469.333,256,469.333z \"\n})));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref9 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref10 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref11 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref12 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref13 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref14 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref15 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref16 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref17 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar SvgWhite = function SvgWhite(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Layer_1\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 512 512\",\n    style: {\n      enableBackground: \"new 0 0 512 512\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgWhite, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/white.1009e168.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M256,0C114.837,0,0,114.837,0,256s114.837,256,256,256s256-114.837,256-256S397.163,0,256,0z\"\n})));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref9 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref10 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref11 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref12 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref13 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref14 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref15 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref16 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref17 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar SvgBlack = function SvgBlack(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Layer_1\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 512 512\",\n    style: {\n      enableBackground: \"new 0 0 512 512\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgBlack, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/black.f1ae6ff6.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"c198_half_moon\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M29.105,14.552c0-0.03-0.004-0.06-0.004-0.092C29.054,6.481,22.584,0.027,14.6,0.002C14.585,0.002,14.569,0,14.556,0 h-0.002l0,0C6.547,0,0.051,6.47,0.005,14.468c0,0.027-0.004,0.053-0.004,0.084v0.002l0,0c0,8.037,6.517,14.553,14.553,14.553l0,0 h0.002c0.014,0,0.029-0.003,0.044-0.003c8.016-0.025,14.507-6.529,14.507-14.55l0,0L29.105,14.552L29.105,14.552z M14.556,2.079 c6.877,0,12.473,5.596,12.473,12.473c0,6.876-5.596,12.476-12.473,12.476V2.079z\"\n})), /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Capa_1_271_\"\n}));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref9 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref10 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref11 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref12 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref13 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref14 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref15 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref16 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref17 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar SvgRandom = function SvgRandom(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 29.107 29.107\",\n    style: {\n      enableBackground: \"new 0 0 29.107 29.107\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgRandom, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/random.668e615f.svg\";\nexport { ForwardRef as ReactComponent };","/* eslint-disable @typescript-eslint/no-non-null-assertion */\n\nimport React, { FC, useCallback } from \"react\";\nimport { Button, Spinner } from \"react-bootstrap\";\nimport cx from \"classnames\";\nimport { Seek } from \"../../interfaces/Seek\";\nimport css from \"./SeeksListItem.module.scss\";\nimport { ReactComponent as WhiteIcon } from \"./icons/white.svg\";\nimport { ReactComponent as BlackIcon } from \"./icons/black.svg\";\nimport { ReactComponent as RandomIcon } from \"./icons/random.svg\";\n\nexport interface SeeksListItemProps {\n  acceptInProcess?: number | null;\n  currentUserId?: number | null;\n  seek?: Seek;\n  onPlay?(seekId: number): void;\n}\n\nexport const SeeksListItem: FC<SeeksListItemProps> = ({\n  acceptInProcess = null,\n  currentUserId = null,\n  seek,\n  onPlay,\n}) => {\n  const handlePlay = useCallback(() => {\n    if (onPlay) {\n      onPlay(seek!.id);\n    }\n  }, [onPlay, seek]);\n\n  if (!seek) {\n    return null;\n  }\n\n  return (\n    <div\n      data-testid=\"seek-wrapper\"\n      className={cx(\"d-flex\", \"align-items-center\", \"border-bottom\", {\n        [css.gameIsStarted]: seek.game,\n      })}\n    >\n      <div className=\"d-flex pl-2\">\n        {seek.color === \"white\" && (\n          <WhiteIcon data-testid=\"white-icon\" className={css.colorIcon} />\n        )}\n        {seek.color === \"black\" && (\n          <BlackIcon data-testid=\"black-icon\" className={css.colorIcon} />\n        )}\n        {seek.color === \"random\" && (\n          <RandomIcon data-testid=\"random-icon\" className={css.colorIcon} />\n        )}\n      </div>\n      <div data-testid=\"user-name\" className=\"mr-auto p-2\">\n        {seek.createdBy.fullName}\n      </div>\n      <div data-testid=\"time-control\" className=\"p-2\">\n        {seek.clockLimit / 60} + {seek.clockIncrement}\n      </div>\n      <div className=\"p-2\">\n        {currentUserId !== seek.createdBy.id && (\n          <Button\n            data-testid=\"play-btn\"\n            onClick={handlePlay}\n            disabled={acceptInProcess !== null || !!seek.game}\n          >\n            {acceptInProcess === seek.id && (\n              <Spinner\n                animation=\"border\"\n                data-testid=\"play-btn-spinner\"\n                size=\"sm\"\n                className=\"mr-2\"\n              >\n                <span className=\"sr-only\">Sending...</span>\n              </Spinner>\n            )}\n            Play\n          </Button>\n        )}\n      </div>\n    </div>\n  );\n};\n","import React, { FC } from \"react\";\nimport { Seek } from \"../../interfaces/Seek\";\nimport { SeeksListItem } from \"./SeeksListItem\";\n\nexport interface SeeksListProps {\n  acceptInProcess?: number | null;\n  currentUserId?: number | null;\n  seeks?: Seek[];\n  onPlay?(seekId: number): void;\n}\n\nexport const SeeksList: FC<SeeksListProps> = ({\n  acceptInProcess = null,\n  currentUserId = null,\n  seeks = [],\n  onPlay,\n}) => {\n  return (\n    <div>\n      {seeks.map((item) => (\n        <SeeksListItem\n          acceptInProcess={acceptInProcess}\n          currentUserId={currentUserId}\n          seek={item}\n          onPlay={onPlay}\n          key={item.id}\n        />\n      ))}\n    </div>\n  );\n};\n","/* eslint-disable @typescript-eslint/no-non-null-assertion */\n\nimport React, { FC, useCallback } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { denormalize } from \"normalizr\";\nimport seekSchema from \"../../normalizr/schemas/seekSchema\";\nimport { RootState } from \"../../app/rootReducer\";\nimport { SeeksList } from \"./SeeksList\";\nimport { acceptSeek } from \"../challenge/challengeSlice\";\nimport { AppDispatch } from \"../../app/store\";\nimport { Seek } from \"../../interfaces/Seek\";\n\nconst SeeksListContainer: FC<unknown> = () => {\n  const dispatch = useDispatch<AppDispatch>();\n\n  const history = useHistory();\n\n  const currentUserId = useSelector(\n    (state: RootState) => state.currentUser.userId\n  );\n\n  const seeks = useSelector((state: RootState) =>\n    denormalize(state.seeksList.items, [seekSchema], state.entities)\n  );\n\n  const acceptSeekRequest = useSelector(\n    (state: RootState) => state.acceptSeekRequest\n  );\n\n  const acceptInProcess = acceptSeekRequest.inProcess\n    ? acceptSeekRequest.itemId\n    : null;\n\n  const handlePlay = useCallback(\n    (seekId: number) => {\n      return dispatch(acceptSeek(seekId))\n        .then((seek: Seek) => {\n          history.push(`/game/${seek.game!.id}`);\n        })\n        .catch(() => {});\n    },\n    [dispatch, history]\n  );\n\n  return (\n    <SeeksList\n      currentUserId={currentUserId}\n      seeks={seeks}\n      onPlay={handlePlay}\n      acceptInProcess={acceptInProcess}\n    />\n  );\n};\n\nexport default SeeksListContainer;\n","import React, { FC } from \"react\";\nimport { Card } from \"react-bootstrap\";\nimport OngoingGamesContainer from \"../games-list/OngoingGamesContainer\";\nimport ChallengeButtonsContainer from \"./ChallengeButtonsContainer\";\nimport ChallengeAiModalContainer from \"../challenge-ai-modal/ChallengeAiModalContainer\";\nimport CompletedGamesContainer from \"../games-list/CompletedGamesContainer\";\nimport SeekModalContainer from \"../seek-modal/SeekModalContainer\";\nimport SeeksListContainer from \"../seeks-list/SeeksListContainer\";\n\nconst HomePage: FC<unknown> = () => {\n  return (\n    <>\n      <ChallengeAiModalContainer />\n      <SeekModalContainer />\n      <div className=\"d-flex justify-content-center\">\n        <ChallengeButtonsContainer />\n      </div>\n\n      <Card className=\"mb-3\">\n        <Card.Body>\n          <Card.Title>Waiting for opponent</Card.Title>\n          <SeeksListContainer />\n        </Card.Body>\n      </Card>\n\n      <Card className=\"mb-3\">\n        <Card.Body>\n          <Card.Title>Playing right now</Card.Title>\n          <OngoingGamesContainer />\n        </Card.Body>\n      </Card>\n\n      <Card>\n        <Card.Body>\n          <Card.Title>Finished</Card.Title>\n          <CompletedGamesContainer />\n        </Card.Body>\n      </Card>\n    </>\n  );\n};\n\nexport default HomePage;\n","import Game from \"../interfaces/Game\";\n\nexport default (game: Game): string => {\n  if (game.status === \"outoftime\") {\n    if (game.winner === \"white\") {\n      return \"Time out • White is victorious\";\n    }\n    if (game.winner === \"black\") {\n      return \"Time out • Black is victorious\";\n    }\n  }\n\n  if (game.status === \"resign\") {\n    if (game.winner === \"black\") {\n      return \"White resigned • Black is victorious\";\n    }\n    if (game.winner === \"white\") {\n      return \"Black resigned • White is victorious\";\n    }\n  }\n\n  if (game.status === \"aborted\") {\n    return \"Game aborted\";\n  }\n\n  if (game.status === \"mate\") {\n    if (game.winner === \"white\") {\n      return \"Checkmate • White is victorious\";\n    }\n    if (game.winner === \"black\") {\n      return \"Checkmate • Black is victorious\";\n    }\n  }\n\n  if (game.status === \"draw\") {\n    return \"Draw\";\n  }\n\n  if (game.status === \"stalemate\") {\n    return \"Stalemate\";\n  }\n\n  return \"Playing right now\";\n};\n","import React, { FC } from \"react\";\nimport { Card } from \"react-bootstrap\";\nimport cx from \"classnames\";\nimport Game from \"../../interfaces/Game\";\nimport getGameStatusText from \"../../utils/getGameStatusText\";\n\nexport interface GameMetaProps {\n  game?: Game;\n}\n\nexport const GameMeta: FC<GameMetaProps> = ({ game }) => {\n  if (!game) {\n    return null;\n  }\n\n  return (\n    <Card>\n      <Card.Body>\n        <div>\n          Time Control:{\" \"}\n          <span data-testid=\"time-control\">\n            {game.clockLimit / 60} + {game.clockIncrement}\n          </span>\n        </div>\n        <div\n          data-testid=\"game-status\"\n          className={cx({\n            \"text-success\": game.status === \"started\",\n            \"text-danger\": game.status !== \"started\",\n          })}\n        >\n          {getGameStatusText(game)}\n        </div>\n        <div data-testid=\"white-user\">\n          <svg height=\"18\" width=\"16\" className=\"mr-1\">\n            <circle\n              cx=\"9\"\n              cy=\"9\"\n              r=\"6\"\n              stroke=\"black\"\n              strokeWidth=\"1\"\n              fill=\"#fff\"\n            />\n          </svg>\n          {game.white ? game.white.fullName : `AI level ${game.aiLevel}`}\n        </div>\n        <div data-testid=\"black-user\">\n          <svg height=\"18\" width=\"16\" className=\"mr-1\">\n            <circle\n              cx=\"8\"\n              cy=\"8\"\n              r=\"6\"\n              stroke=\"black\"\n              strokeWidth=\"1\"\n              fill=\"#000\"\n            />\n          </svg>\n          {game.black ? game.black.fullName : `AI level ${game.aiLevel}`}\n        </div>\n      </Card.Body>\n    </Card>\n  );\n};\n","import React, { FC } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { denormalize } from \"normalizr\";\nimport { RootState } from \"../../app/rootReducer\";\nimport gameSchema from \"../../normalizr/schemas/gameSchema\";\nimport { GameMeta } from \"./GameMeta\";\n\nexport interface SingleGameMetaContainerProps {\n  id: number;\n}\n\nexport const GameMetaContainer: FC<SingleGameMetaContainerProps> = ({ id }) => {\n  const game = useSelector((state: RootState) =>\n    denormalize(id, gameSchema, state.entities)\n  );\n\n  if (game) {\n    return <GameMeta game={game} />;\n  }\n  return null;\n};\n","import React, { FC } from \"react\";\nimport moment from \"moment\";\nimport cx from \"classnames\";\nimport css from \"./GameClock.module.scss\";\n\nexport interface GameClockProps {\n  time?: number; // in msec\n  isRunning?: boolean;\n}\n\nexport const GameClock: FC<GameClockProps> = ({\n  time = 0,\n  isRunning = false,\n}) => {\n  const formattedTime = moment()\n    .startOf(\"day\")\n    .milliseconds(time)\n    .format(\"mm:ss\");\n\n  return (\n    <div\n      data-testid=\"time\"\n      className={cx(css.clock, {\n        [css.clockRun]: isRunning,\n        [css.clockEmerg]: time < 10000,\n      })}\n    >\n      {formattedTime}\n    </div>\n  );\n};\n","import React, { FC } from \"react\";\nimport Game from \"../../interfaces/Game\";\nimport getGameStatusText from \"../../utils/getGameStatusText\";\nimport css from \"./GameControlPanelStatus.module.scss\";\n\nexport interface GameControlPanelStatusProps {\n  game?: Game;\n}\n\nexport const GameControlPanelStatus: FC<GameControlPanelStatusProps> = ({\n  game,\n}) => {\n  if (!game) {\n    return null;\n  }\n\n  let result = \"½-½\";\n  if (game.winner) {\n    if (game.winner === \"white\") {\n      result = \"1-0\";\n    } else {\n      result = \"0-1\";\n    }\n  }\n\n  return (\n    <div className={css.container}>\n      <div className={css.result} data-testid=\"game-result\">\n        {result}\n      </div>\n      <div className={css.status} data-testid=\"game-status\">\n        {getGameStatusText(game)}\n      </div>\n    </div>\n  );\n};\n","/* eslint-disable react/no-array-index-key */\n/* eslint-disable jsx-a11y/click-events-have-key-events */ // @todo\n/* eslint-disable jsx-a11y/interactive-supports-focus */ // @todo\n\nimport React, { FC, useEffect, useRef } from \"react\";\nimport { chunk as _chunk } from \"lodash\";\nimport { Move } from \"chess.js\";\nimport cx from \"classnames\";\nimport Game from \"../../interfaces/Game\";\nimport makeChessInstance from \"../../utils/makeChessInstance\";\nimport css from \"./GameMoves.module.scss\";\nimport { GameControlPanelStatus } from \"./GameControlPanelStatus\";\nimport GameStatus from \"../../types/GameStatus\";\n\nexport interface GameMovesProps {\n  game?: Game;\n  rewindToMoveIndex?: number | null;\n  onRewindToMove?(moveIndex: number): void;\n}\n\nconst formatMove = (move: Move): string => {\n  return `${move.from}${move.to}`;\n};\n\nexport const GameMoves: FC<GameMovesProps> = ({\n  game,\n  rewindToMoveIndex = null,\n  onRewindToMove,\n}) => {\n  let movesHistory: Move[] = [];\n\n  const scrollToElementRef = useRef<HTMLDivElement>(null);\n  const lastMovesQnt = useRef<number>(-1);\n  const lastGameStatus = useRef<GameStatus>();\n\n  // @todo. add unit test\n  useEffect(() => {\n    if (!game) {\n      return;\n    }\n\n    if (\n      (lastMovesQnt.current !== movesHistory.length ||\n        lastGameStatus.current !== game.status) &&\n      rewindToMoveIndex === null\n    ) {\n      if (scrollToElementRef.current) {\n        scrollToElementRef.current.scrollTop =\n          scrollToElementRef.current.scrollHeight;\n      }\n    }\n    lastMovesQnt.current = movesHistory.length;\n    lastGameStatus.current = game.status;\n  }, [\n    game,\n    lastMovesQnt,\n    lastGameStatus,\n    movesHistory.length,\n    rewindToMoveIndex,\n    scrollToElementRef,\n  ]);\n\n  if (!game) {\n    return null;\n  }\n\n  const chess = makeChessInstance(game);\n\n  movesHistory = chess.history({ verbose: true });\n\n  const movesQnt = movesHistory.length;\n\n  const movesPairs = _chunk(movesHistory, 2);\n\n  const makeRewindToMoveHandler = (moveIndex: number) => {\n    return () => {\n      if (onRewindToMove) {\n        onRewindToMove(moveIndex);\n      }\n    };\n  };\n\n  return (\n    <div className={css.movesWrapper} ref={scrollToElementRef}>\n      {movesPairs.map((pair, index) => {\n        const whiteMoveIndex = index * 2 + 1;\n        const blackMoveIndex = index * 2 + 2;\n\n        return (\n          <React.Fragment key={`move-${index}`}>\n            <div className={css.moveNumber}>{index + 1}</div>\n            <div\n              data-testid={`move-${whiteMoveIndex}`}\n              onClick={makeRewindToMoveHandler(whiteMoveIndex)}\n              role=\"button\"\n              className={cx(css.move, {\n                [css.selected]:\n                  rewindToMoveIndex === whiteMoveIndex ||\n                  (rewindToMoveIndex === null && movesQnt === whiteMoveIndex),\n              })}\n            >\n              {formatMove(pair[0])}\n            </div>\n            {pair[1] && (\n              <div\n                data-testid={`move-${blackMoveIndex}`}\n                onClick={makeRewindToMoveHandler(blackMoveIndex)}\n                role=\"button\"\n                className={cx(css.move, {\n                  [css.selected]:\n                    rewindToMoveIndex === blackMoveIndex ||\n                    (rewindToMoveIndex === null && movesQnt === blackMoveIndex),\n                })}\n              >\n                {formatMove(pair[1])}\n              </div>\n            )}\n          </React.Fragment>\n        );\n      })}\n\n      {game.status !== \"started\" && <GameControlPanelStatus game={game} />}\n    </div>\n  );\n};\n","/* eslint-disable @typescript-eslint/no-non-null-assertion */\n\nimport React, { FC } from \"react\";\nimport Game from \"../../interfaces/Game\";\nimport { PieceColor } from \"../../types/PieceColor\";\nimport css from \"./GameControlPanelUserName.module.scss\";\n\nexport interface GameControlPanelUserNameProps {\n  game?: Game;\n  color?: PieceColor;\n}\n\nexport const GameControlPanelUserName: FC<GameControlPanelUserNameProps> = ({\n  game,\n  color = \"white\",\n}) => {\n  if (!game) {\n    return null;\n  }\n\n  return (\n    <div className={css.userName}>\n      {game[color] ? game[color]!.fullName : `AI level ${game.aiLevel}`}\n    </div>\n  );\n};\n","import React, { FC, useCallback } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faRetweet,\n  faAngleDoubleLeft,\n  faAngleDoubleRight,\n  faAngleLeft,\n  faAngleRight,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { Button } from \"react-bootstrap\";\nimport css from \"./GameControlPanelTopToolbar.module.scss\";\n\nexport interface GameControlPanelTopToolbarProps {\n  isFirstMove?: boolean;\n  isLastMove?: boolean;\n  hasPrevMove?: boolean;\n  hasNextMove?: boolean;\n  onFlipBoard?(): void;\n  onRewindToPrevMove?(): void;\n  onRewindToNextMove?(): void;\n  onRewindToFirstMove?(): void;\n  onRewindToLastMove?(): void;\n}\n\nexport const GameControlPanelTopToolbar: FC<GameControlPanelTopToolbarProps> = ({\n  isFirstMove = false,\n  isLastMove = false,\n  hasPrevMove = false,\n  hasNextMove = false,\n  onFlipBoard,\n  onRewindToPrevMove,\n  onRewindToNextMove,\n  onRewindToFirstMove,\n  onRewindToLastMove,\n}) => {\n  const handleFlipBoard = useCallback(() => {\n    if (onFlipBoard) {\n      onFlipBoard();\n    }\n  }, [onFlipBoard]);\n  const handleRewindToPrevMove = useCallback(() => {\n    if (onRewindToPrevMove) {\n      onRewindToPrevMove();\n    }\n  }, [onRewindToPrevMove]);\n  const handleRewindToNextMove = useCallback(() => {\n    if (onRewindToNextMove) {\n      onRewindToNextMove();\n    }\n  }, [onRewindToNextMove]);\n  const handleRewindToFirstMove = useCallback(() => {\n    if (onRewindToFirstMove) {\n      onRewindToFirstMove();\n    }\n  }, [onRewindToFirstMove]);\n  const handleRewindToLastMove = useCallback(() => {\n    if (onRewindToLastMove) {\n      onRewindToLastMove();\n    }\n  }, [onRewindToLastMove]);\n\n  return (\n    <div className={css.buttonsWrapper}>\n      <Button\n        type=\"button\"\n        variant=\"link\"\n        data-testid=\"flip-board-btn\"\n        onClick={handleFlipBoard}\n      >\n        <FontAwesomeIcon icon={faRetweet} />\n        <span className=\"sr-only\">Flip board</span>\n      </Button>\n\n      <Button\n        type=\"button\"\n        variant=\"link\"\n        data-testid=\"rewind-to-first-move-btn\"\n        onClick={handleRewindToFirstMove}\n        disabled={isFirstMove}\n      >\n        <FontAwesomeIcon icon={faAngleDoubleLeft} />\n        <span className=\"sr-only\">Rewind to first move</span>\n      </Button>\n\n      <Button\n        type=\"button\"\n        variant=\"link\"\n        data-testid=\"rewind-to-prev-move-btn\"\n        onClick={handleRewindToPrevMove}\n        disabled={!hasPrevMove}\n      >\n        <FontAwesomeIcon icon={faAngleLeft} />\n        <span className=\"sr-only\">Rewind to prev move</span>\n      </Button>\n\n      <Button\n        type=\"button\"\n        variant=\"link\"\n        data-testid=\"rewind-to-next-move-btn\"\n        onClick={handleRewindToNextMove}\n        disabled={!hasNextMove}\n      >\n        <FontAwesomeIcon icon={faAngleRight} />\n        <span className=\"sr-only\">Rewind to next move</span>\n      </Button>\n\n      <Button\n        type=\"button\"\n        variant=\"link\"\n        data-testid=\"rewind-to-last-move-btn\"\n        onClick={handleRewindToLastMove}\n        disabled={isLastMove}\n      >\n        <FontAwesomeIcon icon={faAngleDoubleRight} />\n        <span className=\"sr-only\">Rewind to last move</span>\n      </Button>\n    </div>\n  );\n};\n","import React, { FC, useCallback } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faFlag,\n  faHandshake,\n  faTimes,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { Button } from \"react-bootstrap\";\nimport css from \"./GameControlPanelBottomToolbar.module.scss\";\n\nexport interface GameControlPanelBottomToolbarProps {\n  canAbortGame?: boolean;\n  canOfferDraw?: boolean;\n  canResignGame?: boolean;\n  onAbortGame?(): void;\n  onOfferDraw?(): void;\n  onResignGame?(): void;\n}\n\nexport const GameControlPanelBottomToolbar: FC<GameControlPanelBottomToolbarProps> = ({\n  canAbortGame = false,\n  canOfferDraw = false,\n  canResignGame = false,\n  onAbortGame,\n  onOfferDraw,\n  onResignGame,\n}) => {\n  const handleAbortGame = useCallback(() => {\n    if (onAbortGame) {\n      onAbortGame();\n    }\n  }, [onAbortGame]);\n  const handleOfferDraw = useCallback(() => {\n    if (onOfferDraw) {\n      onOfferDraw();\n    }\n  }, [onOfferDraw]);\n  const handleResignGame = useCallback(() => {\n    if (onResignGame) {\n      onResignGame();\n    }\n  }, [onResignGame]);\n\n  return (\n    <div className={css.buttonsWrapper}>\n      <Button\n        type=\"button\"\n        variant=\"link\"\n        data-testid=\"abort-game-btn\"\n        onClick={handleAbortGame}\n        disabled={!canAbortGame}\n      >\n        <FontAwesomeIcon icon={faTimes} />\n        <span className=\"sr-only\">Abort</span>\n      </Button>\n      <Button\n        type=\"button\"\n        variant=\"link\"\n        data-testid=\"offer-draw-btn\"\n        onClick={handleOfferDraw}\n        disabled={!canOfferDraw}\n      >\n        <FontAwesomeIcon icon={faHandshake} />\n        <span className=\"sr-only\">Offer a draw</span>\n      </Button>\n      <Button\n        type=\"button\"\n        variant=\"link\"\n        data-testid=\"resign-game-btn\"\n        onClick={handleResignGame}\n        disabled={!canResignGame}\n      >\n        <FontAwesomeIcon icon={faFlag} />\n        <span className=\"sr-only\">Resign</span>\n      </Button>\n    </div>\n  );\n};\n","import React, { FC, useCallback } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { Button } from \"react-bootstrap\";\nimport { faTimes, faCheck } from \"@fortawesome/free-solid-svg-icons\";\nimport css from \"./DrawOfferDialog.module.scss\";\n\nexport interface DrawOfferDialogProps {\n  onAccept?(): void;\n  onDecline?(): void;\n}\n\nexport const DrawOfferDialog: FC<DrawOfferDialogProps> = ({\n  onAccept,\n  onDecline,\n}) => {\n  const handleAccept = useCallback(() => {\n    if (onAccept) {\n      onAccept();\n    }\n  }, [onAccept]);\n\n  const handleDecline = useCallback(() => {\n    if (onDecline) {\n      onDecline();\n    }\n  }, [onDecline]);\n\n  return (\n    <div className={css.dialogWrapper}>\n      <Button\n        type=\"button\"\n        variant=\"link\"\n        data-testid=\"accept-btn\"\n        onClick={handleAccept}\n        className={css.acceptBtn}\n      >\n        <FontAwesomeIcon icon={faCheck} />\n        <span className=\"sr-only\">Accept</span>\n      </Button>\n\n      <Button\n        type=\"button\"\n        variant=\"link\"\n        data-testid=\"decline-btn\"\n        onClick={handleDecline}\n        className={css.declineBtn}\n      >\n        <FontAwesomeIcon icon={faTimes} />\n        <span className=\"sr-only\">Decline</span>\n      </Button>\n      <div className={css.dialogText}>Your opponent offers a draw</div>\n    </div>\n  );\n};\n","import React, { FC } from \"react\";\nimport css from \"./GameControlPanel.module.scss\";\nimport Game from \"../../interfaces/Game\";\nimport { PieceColor } from \"../../types/PieceColor\";\nimport { GameClock } from \"./GameClock\";\nimport { GameMoves } from \"./GameMoves\";\nimport { GameControlPanelUserName } from \"./GameControlPanelUserName\";\nimport { GameControlPanelTopToolbar } from \"./GameControlPanelTopToolbar\";\nimport { GameControlPanelBottomToolbar } from \"./GameControlPanelBottomToolbar\";\nimport makeChessInstance from \"../../utils/makeChessInstance\";\nimport { DrawOfferDialog } from \"./DrawOfferDialog\";\n\nexport interface GameControlPanelProps {\n  game?: Game;\n  orientation?: PieceColor;\n  rewindToMoveIndex?: number | null;\n  canAbortGame?: boolean;\n  canDrawOffer?: boolean;\n  canOfferDraw?: boolean;\n  canResignGame?: boolean;\n  drawOfferSentByCurrentUser?: boolean;\n  drawOfferSentByOpponent?: boolean;\n  onAcceptDrawOffer?(): void;\n  onDeclineDrawOffer?(): void;\n  onRewindToMove?(moveIndex: number): void;\n  onFlipBoard?(): void;\n  onRewindToPrevMove?(): void;\n  onRewindToNextMove?(): void;\n  onRewindToFirstMove?(): void;\n  onRewindToLastMove?(): void;\n  onAbortGame?(): void;\n  onOfferDraw?(): void;\n  onResignGame?(): void;\n}\n\nexport const GameControlPanel: FC<GameControlPanelProps> = ({\n  game,\n  orientation = \"white\",\n  rewindToMoveIndex = null,\n  canAbortGame = false,\n  canOfferDraw = false,\n  canResignGame = false,\n  drawOfferSentByCurrentUser = false,\n  drawOfferSentByOpponent = false,\n  onAcceptDrawOffer,\n  onDeclineDrawOffer,\n  onRewindToMove,\n  onFlipBoard,\n  onRewindToPrevMove,\n  onRewindToNextMove,\n  onRewindToFirstMove,\n  onRewindToLastMove,\n  onAbortGame,\n  onOfferDraw,\n  onResignGame,\n}) => {\n  if (!game) {\n    return null;\n  }\n\n  const chess = makeChessInstance(game);\n\n  const movesHistory = chess.history();\n\n  const isFirstMove = movesHistory.length === 0 || rewindToMoveIndex === 0;\n\n  const isLastMove = rewindToMoveIndex === null;\n\n  const hasPrevMove = movesHistory.length !== 0 && rewindToMoveIndex !== 0;\n\n  const hasNextMove = rewindToMoveIndex !== null;\n\n  return (\n    <div className={css.controlPanel}>\n      <GameClock\n        time={orientation === \"white\" ? game.btime : game.wtime}\n        isRunning={game.turn !== orientation}\n      />\n      <div className={css.controlPanelInner}>\n        <GameControlPanelUserName\n          game={game}\n          color={orientation === \"white\" ? \"black\" : \"white\"}\n        />\n        <GameControlPanelTopToolbar\n          isFirstMove={isFirstMove}\n          isLastMove={isLastMove}\n          hasPrevMove={hasPrevMove}\n          hasNextMove={hasNextMove}\n          onFlipBoard={onFlipBoard}\n          onRewindToPrevMove={onRewindToPrevMove}\n          onRewindToNextMove={onRewindToNextMove}\n          onRewindToFirstMove={onRewindToFirstMove}\n          onRewindToLastMove={onRewindToLastMove}\n        />\n        <GameMoves\n          game={game}\n          rewindToMoveIndex={rewindToMoveIndex}\n          onRewindToMove={onRewindToMove}\n        />\n        {drawOfferSentByOpponent && (\n          <DrawOfferDialog\n            onAccept={onAcceptDrawOffer}\n            onDecline={onDeclineDrawOffer}\n          />\n        )}\n        {drawOfferSentByCurrentUser && (\n          <div\n            className=\"alert alert-warning text-center\"\n            role=\"alert\"\n            data-testid=\"draw-offer-sent-message\"\n          >\n            Draw offer sent\n          </div>\n        )}\n        <GameControlPanelBottomToolbar\n          canAbortGame={canAbortGame}\n          canOfferDraw={canOfferDraw}\n          canResignGame={canResignGame}\n          onAbortGame={onAbortGame}\n          onOfferDraw={onOfferDraw}\n          onResignGame={onResignGame}\n        />\n        <GameControlPanelUserName\n          game={game}\n          color={orientation === \"white\" ? \"white\" : \"black\"}\n        />\n      </div>\n      <GameClock\n        time={orientation === \"white\" ? game.wtime : game.btime}\n        isRunning={game.turn === orientation}\n      />\n    </div>\n  );\n};\n","import React, { FC } from \"react\";\nimport { ChessInstance } from \"chess.js\";\nimport Game from \"../../interfaces/Game\";\nimport { GameControlPanel } from \"./GameControlPanel\";\nimport User from \"../../interfaces/User\";\nimport { PieceColor } from \"../../types/PieceColor\";\nimport makeChessInstance from \"../../utils/makeChessInstance\";\n\nexport interface SingleGameControlPanelWrapperProps {\n  game?: Game;\n  currentUser?: User;\n  isFlipped?: boolean;\n  rewindToMoveIndex?: number | null;\n  onFlipBoard?(): void;\n  onAcceptDrawOffer?(): void;\n  onDeclineDrawOffer?(): void;\n  onAbortGame?(): void;\n  onOfferDraw?(): void;\n  onResignGame?(): void;\n  onRewindToMove?(moveIndex: number | null): void;\n}\n\nexport const GameControlPanelWrapper: FC<SingleGameControlPanelWrapperProps> = ({\n  game,\n  currentUser,\n  isFlipped = false,\n  rewindToMoveIndex = null,\n  onFlipBoard,\n  onAcceptDrawOffer,\n  onDeclineDrawOffer,\n  onAbortGame,\n  onOfferDraw,\n  onResignGame,\n  onRewindToMove,\n}) => {\n  if (!game) {\n    return null;\n  }\n\n  const chessWithAllMoves: ChessInstance = makeChessInstance(game);\n\n  const movesHistory = chessWithAllMoves.history({ verbose: true });\n\n  let orientation: PieceColor = \"white\";\n  if (currentUser && currentUser.id === game.black?.id) {\n    orientation = \"black\";\n  }\n  if (isFlipped) {\n    orientation = orientation === \"white\" ? \"black\" : \"white\";\n  }\n\n  let playerPiecesColor: PieceColor | null = null;\n  if (currentUser) {\n    if (currentUser.id === game.white?.id) {\n      playerPiecesColor = \"white\";\n    } else if (currentUser.id === game.black?.id) {\n      playerPiecesColor = \"black\";\n    }\n  }\n\n  let drawOfferSentByCurrentUser = false;\n  if (\n    currentUser &&\n    (currentUser.id === game.white?.id || currentUser.id === game.black?.id) &&\n    game.status === \"started\" &&\n    game.drawOffer === playerPiecesColor\n  ) {\n    drawOfferSentByCurrentUser = true;\n  }\n\n  let drawOfferSentByOpponent = false;\n  if (\n    currentUser &&\n    (currentUser.id === game.white?.id || currentUser.id === game.black?.id) &&\n    game.status === \"started\" &&\n    game.drawOffer !== null &&\n    game.drawOffer !== playerPiecesColor\n  ) {\n    drawOfferSentByOpponent = true;\n  }\n\n  let canAbortGame = false;\n  if (\n    currentUser &&\n    (currentUser.id === game.white?.id || currentUser.id === game.black?.id) &&\n    game.status === \"started\" &&\n    movesHistory.length < 2\n  ) {\n    canAbortGame = true;\n  }\n\n  let canResignGame = false;\n  if (\n    currentUser &&\n    (currentUser.id === game.white?.id || currentUser.id === game.black?.id) &&\n    game.status === \"started\" &&\n    movesHistory.length > 1\n  ) {\n    canResignGame = true;\n  }\n\n  let canOfferDraw = false;\n  if (\n    currentUser &&\n    (currentUser.id === game.white?.id || currentUser.id === game.black?.id) &&\n    game.drawOffer === null &&\n    game.aiLevel === 0 &&\n    game.status === \"started\" &&\n    movesHistory.length > 1\n  ) {\n    canOfferDraw = true;\n  }\n\n  // @todo. use useCallback hook\n  const handleRewindToMove = (moveIndex: number) => {\n    if (onRewindToMove) {\n      if (moveIndex === movesHistory.length) {\n        onRewindToMove(null);\n      } else {\n        onRewindToMove(moveIndex);\n      }\n    }\n  };\n\n  // @todo. use useCallback hook\n  const handleRewindToFirstMove = () => {\n    if (onRewindToMove) {\n      onRewindToMove(0);\n    }\n  };\n\n  // @todo. use useCallback hook\n  const handleRewindToLastMove = () => {\n    if (onRewindToMove) {\n      onRewindToMove(null);\n    }\n  };\n\n  // @todo. use useCallback hook\n  const handleRewindToPrevMove = () => {\n    if (onRewindToMove) {\n      if (rewindToMoveIndex === null) {\n        onRewindToMove(movesHistory.length - 1);\n      } else {\n        onRewindToMove(rewindToMoveIndex - 1);\n      }\n    }\n  };\n\n  // @todo. use useCallback hook\n  const handleRewindToNextMove = () => {\n    if (onRewindToMove) {\n      if (rewindToMoveIndex === movesHistory.length - 1) {\n        onRewindToMove(null);\n      } else {\n        onRewindToMove((rewindToMoveIndex as number) + 1);\n      }\n    }\n  };\n\n  return (\n    <GameControlPanel\n      game={game}\n      orientation={orientation}\n      rewindToMoveIndex={rewindToMoveIndex}\n      canAbortGame={canAbortGame}\n      canResignGame={canResignGame}\n      canOfferDraw={canOfferDraw}\n      drawOfferSentByCurrentUser={drawOfferSentByCurrentUser}\n      drawOfferSentByOpponent={drawOfferSentByOpponent}\n      onAcceptDrawOffer={onAcceptDrawOffer}\n      onDeclineDrawOffer={onDeclineDrawOffer}\n      onFlipBoard={onFlipBoard}\n      onAbortGame={onAbortGame}\n      onOfferDraw={onOfferDraw}\n      onResignGame={onResignGame}\n      onRewindToMove={handleRewindToMove}\n      onRewindToFirstMove={handleRewindToFirstMove}\n      onRewindToLastMove={handleRewindToLastMove}\n      onRewindToPrevMove={handleRewindToPrevMove}\n      onRewindToNextMove={handleRewindToNextMove}\n    />\n  );\n};\n","import React, { FC, useCallback } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { denormalize } from \"normalizr\";\nimport { RootState } from \"../../app/rootReducer\";\nimport gameSchema from \"../../normalizr/schemas/gameSchema\";\nimport { GameControlPanelWrapper } from \"./GameControlPanelWrapper\";\nimport User from \"../../interfaces/User\";\nimport userSchema from \"../../normalizr/schemas/userSchema\";\nimport {\n  abortGame,\n  acceptDrawOffer,\n  declineDrawOffer,\n  defaultSingleGameItemState,\n  flipBoard,\n  offerDraw,\n  resignGame,\n  rewindToMove,\n} from \"./singleGameSlice\";\nimport { AppDispatch } from \"../../app/store\";\n\nexport interface SingleGameControlPanelContainerProps {\n  id: number;\n}\n\nexport const GameControlPanelContainer: FC<SingleGameControlPanelContainerProps> = ({\n  id,\n}) => {\n  const dispatch = useDispatch<AppDispatch>();\n\n  const game = useSelector((state: RootState) =>\n    denormalize(id, gameSchema, state.entities)\n  );\n\n  const singleGameItemState =\n    useSelector((state: RootState) => state.singleGame[id]) ||\n    defaultSingleGameItemState;\n\n  const currentUser: User | undefined = useSelector((state: RootState) => {\n    if (state.currentUser.userId) {\n      return denormalize(state.currentUser.userId, userSchema, state.entities);\n    }\n    return undefined;\n  });\n\n  const handleFlipBoard = useCallback(() => {\n    dispatch(flipBoard(id));\n  }, [dispatch, id]);\n\n  const handleAbortGame = useCallback(() => {\n    dispatch(abortGame(id));\n  }, [dispatch, id]);\n\n  const handleAcceptDrawOffer = useCallback(() => {\n    dispatch(acceptDrawOffer(id));\n  }, [dispatch, id]);\n\n  const handleDeclineDrawOffer = useCallback(() => {\n    dispatch(declineDrawOffer(id));\n  }, [dispatch, id]);\n\n  const handleResignGame = useCallback(() => {\n    dispatch(resignGame(id));\n  }, [dispatch, id]);\n\n  const handleOfferDraw = useCallback(() => {\n    dispatch(offerDraw(id));\n  }, [dispatch, id]);\n\n  const handleRewindToMove = useCallback(\n    (moveIndex: number | null) => {\n      dispatch(\n        rewindToMove({\n          moveIndex,\n          gameId: id,\n        })\n      );\n    },\n    [dispatch, id]\n  );\n\n  if (game) {\n    return (\n      <GameControlPanelWrapper\n        game={game}\n        currentUser={currentUser}\n        isFlipped={singleGameItemState.isFlipped}\n        rewindToMoveIndex={singleGameItemState.rewindToMoveIndex}\n        onFlipBoard={handleFlipBoard}\n        onAbortGame={handleAbortGame}\n        onAcceptDrawOffer={handleAcceptDrawOffer}\n        onDeclineDrawOffer={handleDeclineDrawOffer}\n        onOfferDraw={handleOfferDraw}\n        onResignGame={handleResignGame}\n        onRewindToMove={handleRewindToMove}\n      />\n    );\n  }\n  return null;\n};\n","import React, { FC } from \"react\";\nimport {\n  Board,\n  getValidMoves,\n  Move,\n  PieceColor,\n  ValidMoves,\n} from \"ii-react-chessboard\";\nimport { ChessInstance } from \"chess.js\";\nimport Game from \"../../interfaces/Game\";\nimport makeChessInstance from \"../../utils/makeChessInstance\";\nimport User from \"../../interfaces/User\";\nimport css from \"./SingleGameBoard.module.scss\";\n\nexport interface SingleGameBoardProps {\n  currentUser?: User;\n  game?: Game;\n  isFlipped?: boolean;\n  onMove?(move: Move): void;\n  rewindToMoveIndex?: number | null;\n}\n\nexport const SingleGameBoard: FC<SingleGameBoardProps> = ({\n  currentUser,\n  game,\n  isFlipped = false,\n  onMove,\n  rewindToMoveIndex = null,\n}) => {\n  if (!game) {\n    return null;\n  }\n\n  const chessWithAllMoves: ChessInstance = makeChessInstance(game);\n\n  const chess: ChessInstance =\n    rewindToMoveIndex === null\n      ? chessWithAllMoves\n      : makeChessInstance(game, rewindToMoveIndex);\n\n  const fen: string = chess.fen();\n\n  const check: boolean = chess.in_check();\n\n  const turnColor: PieceColor =\n    game.turn === \"white\" ? PieceColor.WHITE : PieceColor.BLACK;\n\n  const validMoves: ValidMoves = getValidMoves(chess);\n\n  let viewOnly = true;\n  if (\n    currentUser &&\n    (currentUser.id === game.white?.id || currentUser.id === game.black?.id) &&\n    game.status === \"started\" &&\n    rewindToMoveIndex === null\n  ) {\n    viewOnly = false;\n  }\n\n  let movableColor: PieceColor | undefined;\n  if (currentUser && currentUser.id === game.white?.id) {\n    movableColor = PieceColor.WHITE;\n  }\n  if (currentUser && currentUser.id === game.black?.id) {\n    movableColor = PieceColor.BLACK;\n  }\n\n  let orientation = PieceColor.WHITE;\n  if (currentUser && currentUser.id === game.black?.id) {\n    orientation = PieceColor.BLACK;\n  }\n  if (isFlipped) {\n    orientation =\n      orientation === PieceColor.WHITE ? PieceColor.BLACK : PieceColor.WHITE;\n  }\n\n  const movesHistory = chessWithAllMoves.history({ verbose: true });\n\n  let lastMoveSquares: string[] | undefined;\n  if (rewindToMoveIndex === null) {\n    if (movesHistory.length) {\n      const lastMove = movesHistory[movesHistory.length - 1];\n      lastMoveSquares = [lastMove.from, lastMove.to];\n    }\n  } else if (rewindToMoveIndex > 0) {\n    const lastMove = movesHistory[rewindToMoveIndex - 1];\n    lastMoveSquares = [lastMove.from, lastMove.to];\n  }\n\n  return (\n    <div className={css.singleGameBoard}>\n      <Board\n        allowMarkers\n        check={check}\n        clickable\n        draggable\n        lastMoveSquares={lastMoveSquares}\n        movableColor={movableColor}\n        onMove={onMove}\n        orientation={orientation}\n        position={fen}\n        turnColor={turnColor}\n        validMoves={validMoves}\n        viewOnly={viewOnly}\n      />\n    </div>\n  );\n};\n","import React, { FC, useCallback } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Move } from \"ii-react-chessboard\";\nimport { denormalize } from \"normalizr\";\nimport { RootState } from \"../../app/rootReducer\";\nimport gameSchema from \"../../normalizr/schemas/gameSchema\";\nimport { SingleGameBoard } from \"./SingleGameBoard\";\nimport User from \"../../interfaces/User\";\nimport userSchema from \"../../normalizr/schemas/userSchema\";\nimport { defaultSingleGameItemState } from \"./singleGameSlice\";\nimport { makeMove } from \"../move/moveSlice\";\nimport { AppDispatch } from \"../../app/store\";\n\nexport interface SingleGameBoardProps {\n  id: number;\n}\n\nexport const SingleGameBoardContainer: FC<SingleGameBoardProps> = ({ id }) => {\n  const dispatch = useDispatch<AppDispatch>();\n\n  const game = useSelector((state: RootState) =>\n    denormalize(id, gameSchema, state.entities)\n  );\n\n  const currentUser: User | undefined = useSelector((state: RootState) => {\n    if (state.currentUser.userId) {\n      return denormalize(state.currentUser.userId, userSchema, state.entities);\n    }\n    return undefined;\n  });\n\n  const singleGameItemState =\n    useSelector((state: RootState) => state.singleGame[id]) ||\n    defaultSingleGameItemState;\n\n  const handleMove = useCallback(\n    (move: Move) => {\n      dispatch(makeMove(id, `${move.from}${move.to}`));\n    },\n    [dispatch, id]\n  );\n\n  if (game) {\n    return (\n      <SingleGameBoard\n        game={game}\n        currentUser={currentUser}\n        isFlipped={singleGameItemState.isFlipped}\n        rewindToMoveIndex={singleGameItemState.rewindToMoveIndex}\n        onMove={handleMove}\n      />\n    );\n  }\n  return null;\n};\n","import React, { FC, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport { GameMetaContainer } from \"./GameMetaContainer\";\nimport { GameControlPanelContainer } from \"./GameControlPanelContainer\";\nimport { SingleGameBoardContainer } from \"./SingleGameBoardContainer\";\nimport { fetchGame } from \"./singleGameSlice\";\nimport { AppDispatch } from \"../../app/store\";\n\ninterface GamePageParams {\n  id: string;\n}\n\nconst GamePage: FC<unknown> = () => {\n  const dispatch = useDispatch<AppDispatch>();\n\n  const { id } = useParams<GamePageParams>();\n\n  const idAsNumber = Number(id);\n\n  useEffect(() => {\n    dispatch(fetchGame(idAsNumber));\n  }, [dispatch, idAsNumber]);\n\n  return (\n    <div className=\"row\">\n      <div className=\"col-3\">\n        <GameMetaContainer id={idAsNumber} />\n      </div>\n      <div className=\"col-6\">\n        <SingleGameBoardContainer id={idAsNumber} />\n      </div>\n      <div className=\"col-3\">\n        <GameControlPanelContainer id={idAsNumber} />\n      </div>\n    </div>\n  );\n};\n\nexport default GamePage;\n","import React, { FC, useCallback } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Button } from \"react-bootstrap\";\nimport User from \"../../interfaces/User\";\n\nexport interface HeaderProps {\n  currentUser?: User | null;\n  onLogout?(): void;\n  onShowAuthModal?(): void;\n}\n\nexport const Header: FC<HeaderProps> = ({\n  currentUser = null,\n  onLogout,\n  onShowAuthModal,\n}) => {\n  const handleLogout = useCallback(() => {\n    if (onLogout) {\n      onLogout();\n    }\n  }, [onLogout]);\n\n  const handleShowAuthModal = useCallback(() => {\n    if (onShowAuthModal) {\n      onShowAuthModal();\n    }\n  }, [onShowAuthModal]);\n\n  return (\n    <header className=\"d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom box-shadow\">\n      <div className=\"offset-4 col-4 text-center\">\n        <Link className=\"blog-header-logo text-dark\" to=\"/\">\n          Chess PWA\n        </Link>\n      </div>\n      <div className=\"col-4 d-flex justify-content-end align-items-center\">\n        {currentUser ? (\n          <>\n            <div className=\"mr-3\">Hi, {currentUser.fullName}</div>\n            <Button\n              className=\"btn btn-sm btn-danger mr-3\"\n              data-testid=\"logout-btn\"\n              onClick={handleLogout}\n            >\n              Logout\n            </Button>\n          </>\n        ) : (\n          <Button\n            className=\"btn btn-sm btn-success mr-3\"\n            data-testid=\"login-btn\"\n            onClick={handleShowAuthModal}\n          >\n            Login / Register\n          </Button>\n        )}\n\n        <a\n          href=\"https://github.com/ildar-icoosoft/chess-pwa\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          <img\n            src={`${process.env.PUBLIC_URL}/imgs/GitHub-Mark-32px.png`}\n            alt=\"\"\n          />\n        </a>\n      </div>\n    </header>\n  );\n};\n","import React, { FC, useCallback } from \"react\";\nimport { denormalize } from \"normalizr\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Header } from \"./Header\";\nimport User from \"../../interfaces/User\";\nimport { RootState } from \"../../app/rootReducer\";\nimport userSchema from \"../../normalizr/schemas/userSchema\";\nimport { logout } from \"../current-user/currentUserSlice\";\nimport { showAuthModal } from \"../auth-modal/authModalSlice\";\n\nconst HeaderContainer: FC<unknown> = () => {\n  const currentUser: User | null = useSelector((state: RootState) => {\n    if (state.currentUser.userId) {\n      return denormalize(state.currentUser.userId, userSchema, state.entities);\n    }\n    return null;\n  });\n\n  const dispatch = useDispatch();\n\n  const handleLogout = useCallback(() => {\n    dispatch(logout());\n  }, [dispatch]);\n\n  const handleShowAuthModal = useCallback(() => {\n    dispatch(showAuthModal());\n  }, [dispatch]);\n\n  return (\n    <Header\n      currentUser={currentUser}\n      onLogout={handleLogout}\n      onShowAuthModal={handleShowAuthModal}\n    />\n  );\n};\n\nexport default HeaderContainer;\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport React, { FC, FormEvent } from \"react\";\nimport { Formik, FormikHelpers } from \"formik\";\nimport { Alert, Button, Form } from \"react-bootstrap\";\nimport * as Yup from \"yup\";\nimport LoginData from \"../../interfaces/LoginData\";\n\nconst loginSchema = Yup.object().shape({\n  email: Yup.string().email(\"Invalid email\").required(\"Required\"),\n  password: Yup.string()\n    .min(6, \"Password length must be >= 6\")\n    .required(\"Required\"),\n});\n\nexport interface LoginFormProps {\n  onSubmit?(\n    values: LoginData,\n    formikHelpers: FormikHelpers<LoginData>\n  ): void | Promise<any>;\n}\n\nexport const LoginForm: FC<LoginFormProps> = ({ onSubmit }) => {\n  return (\n    <Formik\n      initialValues={{ email: \"\", password: \"\" }}\n      validationSchema={loginSchema}\n      onSubmit={(values, formikHelpers): Promise<any> | void => {\n        if (onSubmit) {\n          return onSubmit(values as LoginData, formikHelpers);\n        }\n        return undefined;\n      }}\n    >\n      {({\n        errors,\n        values,\n        touched,\n        handleChange,\n        handleBlur,\n        handleSubmit,\n        isSubmitting,\n        status,\n        setStatus,\n        /* and other goodies */\n      }) => (\n        <Form\n          noValidate\n          onSubmit={(e) => handleSubmit(e as FormEvent<HTMLFormElement>)}\n          onChange={() => setStatus(\"\")}\n        >\n          {!!status && <Alert variant=\"danger\">{status}</Alert>}\n          <Form.Group>\n            <Form.Label>Email address</Form.Label>\n            <Form.Control\n              type=\"email\"\n              name=\"email\"\n              placeholder=\"Enter email\"\n              onBlur={handleBlur}\n              value={values.email}\n              onChange={handleChange}\n              isValid={touched.email && !errors.email}\n              isInvalid={touched.email && !!errors.email}\n            />\n            <Form.Control.Feedback type=\"invalid\">\n              {errors.email}\n            </Form.Control.Feedback>\n          </Form.Group>\n\n          <Form.Group>\n            <Form.Label>Password</Form.Label>\n            <Form.Control\n              type=\"password\"\n              name=\"password\"\n              placeholder=\"Password\"\n              onChange={handleChange}\n              onBlur={handleBlur}\n              value={values.password}\n              isValid={touched.password && !errors.password}\n              isInvalid={touched.password && !!errors.password}\n            />\n            <Form.Control.Feedback type=\"invalid\">\n              {errors.password}\n            </Form.Control.Feedback>\n          </Form.Group>\n          <Button variant=\"primary\" type=\"submit\" disabled={isSubmitting}>\n            Login\n          </Button>\n        </Form>\n      )}\n    </Formik>\n  );\n};\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport React, { FC, FormEvent } from \"react\";\nimport { Formik } from \"formik\";\nimport { Alert, Button, Form } from \"react-bootstrap\";\nimport * as Yup from \"yup\";\nimport { FormikHelpers } from \"formik/dist/types\";\n\nconst registrationSchema = Yup.object().shape({\n  fullName: Yup.string().required(\"Required\"),\n  email: Yup.string().email(\"Invalid email\").required(\"Required\"),\n  password: Yup.string()\n    .min(6, \"Password length must be >= 6\")\n    .required(\"Required\"),\n  confirmPassword: Yup.string()\n    .equals([Yup.ref(\"password\")], \"Please repeat the password\")\n    .required(\"Required\"),\n});\n\nexport interface RegistrationFormData {\n  fullName: string;\n  email: string;\n  password: string;\n  confirmPassword: string;\n}\n\nexport interface RegistrationFormProps {\n  onSubmit?(\n    values: RegistrationFormData,\n    formikHelpers: FormikHelpers<RegistrationFormData>\n  ): void | Promise<any>;\n}\n\nexport const RegistrationForm: FC<RegistrationFormProps> = ({ onSubmit }) => {\n  return (\n    <Formik\n      initialValues={{\n        fullName: \"\",\n        email: \"\",\n        password: \"\",\n        confirmPassword: \"\",\n      }}\n      validationSchema={registrationSchema}\n      onSubmit={(values, formikHelpers): Promise<any> | void => {\n        if (onSubmit) {\n          return onSubmit(values as RegistrationFormData, formikHelpers);\n        }\n        return undefined;\n      }}\n    >\n      {({\n        errors,\n        values,\n        touched,\n        handleChange,\n        handleBlur,\n        handleSubmit,\n        isSubmitting,\n        status,\n        setStatus,\n        /* and other goodies */\n      }) => (\n        <Form\n          noValidate\n          onSubmit={(e) => handleSubmit(e as FormEvent<HTMLFormElement>)}\n          onChange={() => setStatus(\"\")}\n        >\n          {!!status && <Alert variant=\"danger\">{status}</Alert>}\n\n          <Form.Group>\n            <Form.Label>Full name</Form.Label>\n            <Form.Control\n              type=\"text\"\n              name=\"fullName\"\n              placeholder=\"Enter full name\"\n              onBlur={handleBlur}\n              value={values.fullName}\n              onChange={handleChange}\n              isValid={touched.fullName && !errors.fullName}\n              isInvalid={touched.fullName && !!errors.fullName}\n            />\n            <Form.Control.Feedback type=\"invalid\">\n              {errors.fullName}\n            </Form.Control.Feedback>\n          </Form.Group>\n\n          <Form.Group>\n            <Form.Label>Email address</Form.Label>\n            <Form.Control\n              type=\"email\"\n              name=\"email\"\n              placeholder=\"Enter email\"\n              onBlur={handleBlur}\n              value={values.email}\n              onChange={handleChange}\n              isValid={touched.email && !errors.email}\n              isInvalid={touched.email && !!errors.email}\n            />\n            <Form.Control.Feedback type=\"invalid\">\n              {errors.email}\n            </Form.Control.Feedback>\n          </Form.Group>\n\n          <Form.Group>\n            <Form.Label>Password</Form.Label>\n            <Form.Control\n              type=\"password\"\n              name=\"password\"\n              placeholder=\"Password\"\n              onChange={handleChange}\n              onBlur={handleBlur}\n              value={values.password}\n              isValid={touched.password && !errors.password}\n              isInvalid={touched.password && !!errors.password}\n            />\n            <Form.Control.Feedback type=\"invalid\">\n              {errors.password}\n            </Form.Control.Feedback>\n          </Form.Group>\n\n          <Form.Group>\n            <Form.Label>Confirm Password</Form.Label>\n            <Form.Control\n              type=\"password\"\n              name=\"confirmPassword\"\n              placeholder=\"Password\"\n              onChange={handleChange}\n              onBlur={handleBlur}\n              value={values.confirmPassword}\n              isValid={touched.confirmPassword && !errors.confirmPassword}\n              isInvalid={touched.confirmPassword && !!errors.confirmPassword}\n            />\n            <Form.Control.Feedback type=\"invalid\">\n              {errors.confirmPassword}\n            </Form.Control.Feedback>\n          </Form.Group>\n\n          <Button variant=\"primary\" type=\"submit\" disabled={isSubmitting}>\n            Register\n          </Button>\n        </Form>\n      )}\n    </Formik>\n  );\n};\n","import React, { FC } from \"react\";\nimport { Tab, Tabs } from \"react-bootstrap\";\nimport { useDispatch } from \"react-redux\";\nimport { FormikHelpers } from \"formik\";\nimport { LoginForm } from \"./LoginForm\";\nimport { RegistrationForm, RegistrationFormData } from \"./RegistrationForm\";\nimport LoginData from \"../../interfaces/LoginData\";\nimport { login, register } from \"../current-user/currentUserSlice\";\nimport { AppDispatch } from \"../../app/store\";\n\nconst LoginTabsContainer: FC<unknown> = () => {\n  const dispatch = useDispatch<AppDispatch>();\n\n  const doLogin = React.useCallback(\n    (values: LoginData, formikHelpers: FormikHelpers<LoginData>) => {\n      return dispatch(login(values)).catch((err) => {\n        if (err.statusCode === 401) {\n          formikHelpers.setStatus(\"Incorrect email or password\");\n        } else {\n          formikHelpers.setStatus(\"Internal server error\");\n        }\n      });\n    },\n    [dispatch]\n  );\n\n  const doSignUp = React.useCallback(\n    (\n      values: RegistrationFormData,\n      formikHelpers: FormikHelpers<RegistrationFormData>\n    ) => {\n      return dispatch(\n        register({\n          fullName: values.fullName,\n          email: values.email,\n          password: values.password,\n        })\n      ).catch((err) => {\n        if (err.statusCode === 409) {\n          formikHelpers.setStatus(\n            \"The provided email address is already in use\"\n          );\n        } else {\n          formikHelpers.setStatus(\"Internal server error\");\n        }\n      });\n    },\n    [dispatch]\n  );\n\n  return (\n    <Tabs transition={false}>\n      <Tab eventKey=\"home\" title=\"Login\">\n        <LoginForm onSubmit={doLogin} />\n      </Tab>\n      <Tab eventKey=\"profile\" title=\"Register\">\n        <RegistrationForm onSubmit={doSignUp} />\n      </Tab>\n    </Tabs>\n  );\n};\n\nexport default LoginTabsContainer;\n","import React, { FC } from \"react\";\nimport { Modal } from \"react-bootstrap\";\nimport LoginTabsContainer from \"./LoginTabsContainer\";\n\nexport interface AuthModalProps {\n  show?: boolean;\n  onHide?(): void;\n}\n\nexport const AuthModal: FC<AuthModalProps> = ({ show = false, onHide }) => {\n  return (\n    <div>\n      <Modal show={show} onHide={onHide} animation={false}>\n        <Modal.Header closeButton>\n          <Modal.Title>Login</Modal.Title>\n        </Modal.Header>\n\n        <Modal.Body>\n          <LoginTabsContainer />\n        </Modal.Body>\n      </Modal>\n    </div>\n  );\n};\n","import React, { FC, useCallback } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { AuthModal } from \"./AuthModal\";\nimport { RootState } from \"../../app/rootReducer\";\nimport { hideAuthModal } from \"./authModalSlice\";\n\nconst AuthModalContainer: FC<unknown> = () => {\n  const { isAuthModalVisible } = useSelector(\n    (state: RootState) => state.authModal\n  );\n\n  const dispatch = useDispatch();\n\n  const handleHide = useCallback(() => {\n    dispatch(hideAuthModal());\n  }, [dispatch]);\n\n  return <AuthModal show={isAuthModalVisible} onHide={handleHide} />;\n};\n\nexport default AuthModalContainer;\n","/* eslint-disable react/no-array-index-key */\n\nimport React, { FC, useCallback } from \"react\";\nimport { Toast } from \"react-bootstrap\";\nimport { Message } from \"../../interfaces/Message\";\nimport css from \"./Messages.module.scss\";\n\nexport interface MessagesProps {\n  items?: Message[];\n  onHideMessage?(messageId: string): void;\n}\n\nexport const Messages: FC<MessagesProps> = ({ items = [], onHideMessage }) => {\n  const makeHideMessageHandler = useCallback(\n    (messageId: string) => () => {\n      if (onHideMessage) {\n        onHideMessage(messageId);\n      }\n    },\n    [onHideMessage]\n  );\n\n  return (\n    <div className={css.messages}>\n      {items.map((item, index) => (\n        <Toast\n          key={index}\n          onClose={makeHideMessageHandler(item.id)}\n          show\n          delay={3000}\n          autohide\n          animation={false}\n        >\n          <Toast.Body>{item.body}</Toast.Body>\n        </Toast>\n      ))}\n    </div>\n  );\n};\n","import React, { FC, useCallback } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Messages } from \"./Messages\";\nimport { RootState } from \"../../app/rootReducer\";\nimport { hideMessage } from \"./messagesSlice\";\n\nconst MessagesContainer: FC<unknown> = () => {\n  const dispatch = useDispatch();\n\n  const messages = useSelector((state: RootState) => state.messages);\n\n  const handleHideMessage = useCallback(\n    (messageId: string) => {\n      dispatch(hideMessage(messageId));\n    },\n    [dispatch]\n  );\n\n  return <Messages items={messages} onHideMessage={handleHideMessage} />;\n};\n\nexport default MessagesContainer;\n","import React, { FC, useEffect } from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"./App.scss\";\nimport HomePage from \"../features/home-page/HomePage\";\nimport GamePage from \"../features/single-game/GamePage\";\nimport { fetchCurrentUser } from \"../features/current-user/currentUserSlice\";\nimport {\n  watchGames,\n  watchSeeks,\n} from \"../features/data-subscription/dataSubscriptionSlice\";\nimport { startGameClock } from \"../features/game-clock/gameClockSlice\";\nimport HeaderContainer from \"../features/header/HeaderContainer\";\nimport AuthModalContainer from \"../features/auth-modal/AuthModalContainer\";\nimport { fetchGames } from \"../features/games-list/gamesListSlice\";\nimport { fetchSeeks } from \"../features/seeks-list/seeksListSlice\";\nimport MessagesContainer from \"../features/messages/MessagesContainer\";\n\nconst App: FC = () => {\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(fetchCurrentUser());\n    dispatch(watchGames());\n    dispatch(watchSeeks());\n    dispatch(startGameClock());\n    dispatch(fetchGames());\n    dispatch(fetchSeeks());\n  }, [dispatch]);\n\n  return (\n    <div className=\"container-fluid\">\n      <Router>\n        <HeaderContainer />\n        <AuthModalContainer />\n        <MessagesContainer />\n\n        <Switch>\n          <Route path=\"/game/:id\">\n            <GamePage />\n          </Route>\n          <Route path=\"/\">\n            <HomePage />\n          </Route>\n        </Switch>\n      </Router>\n    </div>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","/* eslint-disable no-param-reassign */\n/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable import/no-cycle */\n\nimport { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport {\n  getCurrentUserSuccess,\n  loginSuccess,\n  registerSuccess,\n} from \"../current-user/currentUserSlice\";\nimport { getGamesListSuccess } from \"../games-list/gamesListSlice\";\nimport { getSeeksListSuccess } from \"../seeks-list/seeksListSlice\";\nimport {\n  getSingleGameSuccess,\n  abortGameSuccess,\n  resignGameSuccess,\n  offerDrawSuccess,\n  acceptDrawOfferSuccess,\n  declineDrawOfferSuccess,\n} from \"../single-game/singleGameSlice\";\nimport {\n  challengeAiSuccess,\n  createSeekSuccess,\n  acceptSeekSuccess,\n} from \"../challenge/challengeSlice\";\nimport { oneSecondPassed } from \"../game-clock/gameClockSlice\";\nimport {\n  updateGameBySubscription,\n  createGameBySubscription,\n  createSeekBySubscription,\n  updateSeekBySubscription,\n  removeSeekBySubscription,\n} from \"../data-subscription/dataSubscriptionSlice\";\nimport {\n  makeMoveRequest,\n  makeMoveSuccess,\n  MoveRequestPayload,\n} from \"../move/moveSlice\";\nimport NormalizedUserEntity from \"../../normalizr/interfaces/NormalizedUserEntity\";\nimport NormalizedGameEntity from \"../../normalizr/interfaces/NormalizedGameEntity\";\nimport makeChessInstance from \"../../utils/makeChessInstance\";\nimport NormalizedSeekEntity from \"../../normalizr/interfaces/NormalizedSeekEntity\";\n\nexport interface EntitiesState {\n  users: Record<string, NormalizedUserEntity>;\n  games: Record<string, NormalizedGameEntity>;\n  seeks: Record<string, NormalizedSeekEntity>;\n}\n\nconst initialState: EntitiesState = {\n  users: {},\n  games: {},\n  seeks: {},\n};\n\nconst getNormalizedDataReducer = (\n  state: EntitiesState,\n  action: Pick<\n    PayloadAction<{\n      entities: Partial<EntitiesState>;\n    }>,\n    \"payload\"\n  >\n) => {\n  Object.assign(state.users, action.payload.entities.users);\n  Object.assign(state.games, action.payload.entities.games);\n  Object.assign(state.seeks, action.payload.entities.seeks);\n};\n\nconst entitiesSlice = createSlice({\n  name: \"entities\",\n  initialState,\n  reducers: {},\n  extraReducers: {\n    [getCurrentUserSuccess.type]: (\n      state: EntitiesState,\n      action: PayloadAction<null | {\n        entities: Partial<EntitiesState>;\n      }>\n    ) => {\n      if (action.payload) {\n        getNormalizedDataReducer(state, {\n          payload: action.payload,\n        });\n      }\n    },\n    [loginSuccess.type]: getNormalizedDataReducer,\n    [registerSuccess.type]: getNormalizedDataReducer,\n    [getGamesListSuccess.type]: getNormalizedDataReducer,\n    [getSeeksListSuccess.type]: getNormalizedDataReducer,\n    [getSingleGameSuccess.type]: getNormalizedDataReducer,\n    [abortGameSuccess.type]: getNormalizedDataReducer,\n    [resignGameSuccess.type]: getNormalizedDataReducer,\n    [offerDrawSuccess.type]: getNormalizedDataReducer,\n    [acceptDrawOfferSuccess.type]: getNormalizedDataReducer,\n    [declineDrawOfferSuccess.type]: getNormalizedDataReducer,\n    [challengeAiSuccess.type]: getNormalizedDataReducer,\n    [createSeekSuccess.type]: getNormalizedDataReducer,\n    [createSeekBySubscription.type]: getNormalizedDataReducer,\n    [updateSeekBySubscription.type]: getNormalizedDataReducer,\n    [removeSeekBySubscription.type]: (\n      state: EntitiesState,\n      action: PayloadAction<number>\n    ) => {\n      delete state.seeks[action.payload];\n    },\n    [updateGameBySubscription.type]: getNormalizedDataReducer,\n    [createGameBySubscription.type]: getNormalizedDataReducer,\n    [makeMoveRequest.type]: (\n      state: EntitiesState,\n      action: PayloadAction<MoveRequestPayload>\n    ) => {\n      state.games[action.payload.gameId].turn =\n        state.games[action.payload.gameId].turn === \"white\" ? \"black\" : \"white\";\n      state.games[action.payload.gameId].moves = `${\n        state.games[action.payload.gameId].moves\n      } ${action.payload.move}`.trim();\n    },\n    [makeMoveSuccess.type]: getNormalizedDataReducer,\n    [acceptSeekSuccess.type]: getNormalizedDataReducer,\n    [oneSecondPassed.type]: (state: EntitiesState) => {\n      const gameIds = Object.keys(state.games);\n\n      gameIds.forEach((gameId) => {\n        const game = state.games[gameId];\n\n        if (game.status === \"started\") {\n          const chess = makeChessInstance(game);\n\n          if (chess.history().length > 1) {\n            const timePropName = game.turn === \"white\" ? \"wtime\" : \"btime\";\n\n            game[timePropName] -= 1000;\n            if (game[timePropName] < 0) {\n              game[timePropName] = 0;\n            }\n\n            if (game[timePropName] === 0) {\n              game.status = \"outoftime\";\n              game.winner = game.turn === \"white\" ? \"black\" : \"white\";\n            }\n          }\n        }\n      });\n    },\n  },\n});\n\nexport default entitiesSlice.reducer;\n","/* eslint-disable no-param-reassign */\n/* eslint-disable import/no-cycle */\n/* eslint-disable @typescript-eslint/no-unused-vars */\n\nimport { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport {\n  acceptSeekRequest,\n  acceptSeekSuccess,\n  acceptSeekError,\n} from \"../challenge/challengeSlice\";\nimport ItemErrorPayload from \"../../interfaces/ItemErrorPayload\";\nimport NormalizedData from \"../../normalizr/interfaces/NormalizedData\";\n\ninterface AcceptSeekRequestState {\n  inProcess: boolean;\n  itemId: number | null;\n  error: string | null;\n}\n\nconst initialState: AcceptSeekRequestState = {\n  inProcess: false,\n  itemId: null,\n  error: null,\n};\n\nconst acceptSeekRequestSlice = createSlice({\n  name: \"acceptSeekRequest\",\n  initialState,\n  reducers: {},\n  extraReducers: {\n    [acceptSeekRequest.type]: (state, action: PayloadAction<number>) => {\n      state.inProcess = true;\n      state.itemId = action.payload;\n      state.error = null;\n    },\n    [acceptSeekSuccess.type]: (\n      state,\n      _action: PayloadAction<NormalizedData<number>>\n    ) => {\n      state.inProcess = false;\n      state.itemId = null;\n      state.error = null;\n    },\n    [acceptSeekError.type]: (\n      state,\n      action: PayloadAction<ItemErrorPayload>\n    ) => {\n      state.inProcess = false;\n      state.itemId = action.payload.itemId;\n      state.error = action.payload.error;\n    },\n  },\n});\n\nexport default acceptSeekRequestSlice.reducer;\n","/* eslint-disable import/no-cycle */\n\nimport { combineReducers } from \"@reduxjs/toolkit\";\nimport gamesListReducer from \"../features/games-list/gamesListSlice\";\nimport seeksListReducer from \"../features/seeks-list/seeksListSlice\";\nimport currentUserReducer from \"../features/current-user/currentUserSlice\";\nimport authModalReducer from \"../features/auth-modal/authModalSlice\";\nimport challengeAiModalReducer from \"../features/challenge-ai-modal/challengeAiModalSlice\";\nimport seekModalReducer from \"../features/seek-modal/seekModalSlice\";\nimport entitiesReducer from \"../features/entities/entitiesSlice\";\nimport singleGameReducer from \"../features/single-game/singleGameSlice\";\nimport acceptSeekRequestReducer from \"../features/accept-seek-request/acceptSeekRequestSlice\";\nimport messagesReducer from \"../features/messages/messagesSlice\";\n\nconst rootReducer = combineReducers({\n  authModal: authModalReducer,\n  challengeAiModal: challengeAiModalReducer,\n  // challenge: challengeReducer,\n  currentUser: currentUserReducer,\n  gamesList: gamesListReducer,\n  entities: entitiesReducer,\n  // dataSubscription: dataSubscriptionReducer,\n  singleGame: singleGameReducer,\n  seekModal: seekModalReducer,\n  seeksList: seeksListReducer,\n  acceptSeekRequest: acceptSeekRequestReducer,\n  messages: messagesReducer,\n});\n\nexport type RootState = ReturnType<typeof rootReducer>;\n\nexport default rootReducer;\n","/* eslint-disable global-require */\n/* eslint-disable @typescript-eslint/no-var-requires */\n/* eslint-disable import/no-cycle */\n\nimport { Action, configureStore } from \"@reduxjs/toolkit\";\nimport { ThunkAction } from \"redux-thunk\";\nimport rootReducer, { RootState } from \"./rootReducer\";\n\nconst store = configureStore({\n  reducer: rootReducer,\n});\n\nif (process.env.NODE_ENV === \"development\" && module.hot) {\n  module.hot.accept(\"./rootReducer\", () => {\n    const newRootReducer = require(\"./rootReducer\").default;\n    store.replaceReducer(newRootReducer);\n  });\n}\n\nexport type AppDispatch = typeof store.dispatch;\n\nexport type AppThunk<R> = ThunkAction<R, RootState, unknown, Action<string>>;\n\nexport default store;\n","/* eslint-disable global-require */\n/* eslint-disable @typescript-eslint/no-var-requires */\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport \"./index.css\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport store from \"./app/store\";\n\nconst render = () => {\n  const App = require(\"./app/App\").default;\n\n  ReactDOM.render(\n    <React.StrictMode>\n      <Provider store={store}>\n        <App />\n      </Provider>\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n  );\n};\n\nrender();\n\nif (process.env.NODE_ENV === \"development\" && module.hot) {\n  module.hot.accept(\"./app/App\", render);\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import { schema } from \"normalizr\";\n\nconst userSchema = new schema.Entity(\"users\");\n\nexport default userSchema;\n","import { Chess, ChessInstance } from \"chess.js\";\nimport Game from \"../interfaces/Game\";\n\nconst startPositionFen =\n  \"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1\";\n\nexport default (\n  game: Pick<Game, \"initialFen\" | \"moves\">,\n  rewindToMoveIndex: number | null = null\n): ChessInstance => {\n  let { initialFen } = game;\n  if (initialFen === \"startpos\") {\n    initialFen = startPositionFen;\n  }\n\n  const chess = new Chess(initialFen);\n\n  if (game.moves) {\n    game.moves.split(\" \").forEach((move, index) => {\n      if (rewindToMoveIndex !== null && index >= rewindToMoveIndex) {\n        return;\n      }\n\n      const result = chess.move(move, {\n        sloppy: true,\n      });\n\n      if (!result) {\n        throw Error(`incorrect move: ${move}`);\n      }\n    });\n  }\n\n  return chess;\n};\n","/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable @typescript-eslint/no-empty-interface */\n/* eslint-disable import/no-cycle */\n\nimport { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { normalize } from \"normalizr\";\nimport NormalizedData from \"../../normalizr/interfaces/NormalizedData\";\nimport { AppThunk } from \"../../app/store\";\nimport ioClient from \"../../services/ioClient\";\nimport { SubscriptionData } from \"../../interfaces/SubscriptionData\";\nimport gameSchema from \"../../normalizr/schemas/gameSchema\";\nimport seekSchema from \"../../normalizr/schemas/seekSchema\";\n\ninterface DataSubscriptionState {}\n\nconst initialState: DataSubscriptionState = {};\n\nconst dataSubscriptionSlice = createSlice({\n  name: \"dataSubscription\",\n  initialState,\n  reducers: {\n    updateGameBySubscription(\n      _state,\n      _action: PayloadAction<NormalizedData<number>>\n    ) {},\n    createGameBySubscription(\n      _state,\n      _action: PayloadAction<NormalizedData<number>>\n    ) {},\n    updateSeekBySubscription(\n      _state,\n      _action: PayloadAction<NormalizedData<number>>\n    ) {},\n    createSeekBySubscription(\n      _state,\n      _action: PayloadAction<NormalizedData<number>>\n    ) {},\n    removeSeekBySubscription(_state, _action: PayloadAction<number>) {},\n  },\n  extraReducers: {},\n});\n\nexport const {\n  updateGameBySubscription,\n  createGameBySubscription,\n  updateSeekBySubscription,\n  createSeekBySubscription,\n  removeSeekBySubscription,\n} = dataSubscriptionSlice.actions;\n\nexport default dataSubscriptionSlice.reducer;\n\nexport const watchGames = (): AppThunk<void> => (dispatch) => {\n  ioClient.socket.on(\"game\", (subscriptionData: SubscriptionData) => {\n    if (subscriptionData.verb === \"updated\") {\n      const game = {\n        ...subscriptionData.previous,\n        ...subscriptionData.data,\n      };\n\n      const normalizedGame = normalize(game, gameSchema);\n\n      dispatch(updateGameBySubscription(normalizedGame));\n    } else if (subscriptionData.verb === \"created\") {\n      const normalizedGame = normalize(subscriptionData.data, gameSchema);\n\n      dispatch(createGameBySubscription(normalizedGame));\n    }\n  });\n};\n\nexport const watchSeeks = (): AppThunk<void> => (dispatch) => {\n  ioClient.socket.on(\"seek\", (subscriptionData: SubscriptionData) => {\n    if (subscriptionData.verb === \"updated\") {\n      const seek = {\n        ...subscriptionData.previous,\n        ...subscriptionData.data,\n      };\n\n      const normalizedSeek = normalize(seek, seekSchema);\n\n      dispatch(updateSeekBySubscription(normalizedSeek));\n    } else if (subscriptionData.verb === \"created\") {\n      const normalizedSeek = normalize(subscriptionData.data, seekSchema);\n\n      dispatch(createSeekBySubscription(normalizedSeek));\n    } else if (subscriptionData.verb === \"destroyed\") {\n      dispatch(removeSeekBySubscription(subscriptionData.id));\n    }\n  });\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"colorSubmits\":\"CreateSeekForm_colorSubmits__1rtRc\",\"colorSubmitsButton\":\"CreateSeekForm_colorSubmitsButton__2SUlU\",\"whiteButton\":\"CreateSeekForm_whiteButton__2Jb8D\",\"blackButton\":\"CreateSeekForm_blackButton__1J0eY\",\"randomButton\":\"CreateSeekForm_randomButton__34hZ3\",\"spinnerWrapper\":\"CreateSeekForm_spinnerWrapper__1uHk1\",\"spinnerButton\":\"CreateSeekForm_spinnerButton__2VfoE\"};","import { schema } from \"normalizr\";\nimport userSchema from \"./userSchema\";\nimport gameSchema from \"./gameSchema\";\n\nconst seekSchema = new schema.Entity(\"seeks\", {\n  createdBy: userSchema,\n  game: gameSchema,\n});\n\nexport default seekSchema;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"levelButtonGroup\":\"ChallengeAiForm_levelButtonGroup__1lnm_\",\"colorSubmits\":\"ChallengeAiForm_colorSubmits__1pM28\",\"colorSubmitsButton\":\"ChallengeAiForm_colorSubmitsButton__2P6Lx\",\"whiteButton\":\"ChallengeAiForm_whiteButton__2nTjs\",\"blackButton\":\"ChallengeAiForm_blackButton__1LVeL\",\"randomButton\":\"ChallengeAiForm_randomButton__1S07l\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"movesWrapper\":\"GameMoves_movesWrapper__2X9ck\",\"moveNumber\":\"GameMoves_moveNumber__3tyZT\",\"move\":\"GameMoves_move__21iOk\",\"selected\":\"GameMoves_selected__2FXRO\"};","/* eslint-disable no-param-reassign */\n/* eslint-disable import/no-cycle */\n/* eslint-disable @typescript-eslint/no-unused-vars */\n\nimport { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { JWR } from \"sails.io.js\";\nimport { normalize } from \"normalizr\";\nimport { AppThunk } from \"../../app/store\";\nimport Game from \"../../interfaces/Game\";\nimport ioClient from \"../../services/ioClient\";\nimport gameSchema from \"../../normalizr/schemas/gameSchema\";\nimport NormalizedData from \"../../normalizr/interfaces/NormalizedData\";\n\ninterface GamesListState {\n  isLoading: boolean;\n  error: string | null;\n}\n\nconst initialState: GamesListState = {\n  isLoading: true,\n  error: null,\n};\n\nconst gamesListSlice = createSlice({\n  name: \"games\",\n  initialState,\n  reducers: {\n    getGamesListRequest(state) {\n      state.isLoading = true;\n      state.error = null;\n    },\n    getGamesListSuccess(\n      state,\n      _action: PayloadAction<NormalizedData<number[]>>\n    ) {\n      state.isLoading = false;\n      state.error = null;\n    },\n    getGamesListError(state, action: PayloadAction<string>) {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n  },\n});\n\nexport const {\n  getGamesListRequest,\n  getGamesListSuccess,\n  getGamesListError,\n} = gamesListSlice.actions;\n\nexport default gamesListSlice.reducer;\n\nexport const fetchGames = (): AppThunk<Promise<Game[]>> => (dispatch) => {\n  dispatch(getGamesListRequest());\n\n  return new Promise((resolve, reject) => {\n    ioClient.socket.get(\"/game\", (body: unknown, jwr: JWR) => {\n      if (jwr.statusCode === 200) {\n        const normalizedGames = normalize(body as Game[], [gameSchema]);\n        dispatch(getGamesListSuccess(normalizedGames));\n\n        resolve(body as Game[]);\n      } else {\n        dispatch(getGamesListError(body as string));\n        reject(jwr);\n      }\n    });\n  });\n};\n","/* eslint-disable no-param-reassign */\n/* eslint-disable import/no-cycle */\n\nimport { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { pull as _pull } from \"lodash\";\nimport { JWR } from \"sails.io.js\";\nimport { normalize } from \"normalizr\";\nimport NormalizedData from \"../../normalizr/interfaces/NormalizedData\";\nimport { AppThunk } from \"../../app/store\";\nimport ioClient from \"../../services/ioClient\";\nimport { Seek } from \"../../interfaces/Seek\";\nimport seekSchema from \"../../normalizr/schemas/seekSchema\";\nimport {\n  createSeekBySubscription,\n  updateSeekBySubscription,\n  removeSeekBySubscription,\n} from \"../data-subscription/dataSubscriptionSlice\";\n\ninterface SeeksListState {\n  isLoading: boolean;\n  error: string | null;\n  items: number[];\n}\n\nconst initialState: SeeksListState = {\n  isLoading: true,\n  error: null,\n  items: [],\n};\n\nconst seeksListSlice = createSlice({\n  name: \"seeks\",\n  initialState,\n  reducers: {\n    getSeeksListRequest(state) {\n      state.isLoading = true;\n      state.error = null;\n    },\n    getSeeksListSuccess(\n      state,\n      action: PayloadAction<NormalizedData<number[]>>\n    ) {\n      state.isLoading = false;\n      state.error = null;\n      state.items = action.payload.result;\n    },\n    getSeeksListError(state, action: PayloadAction<string>) {\n      state.isLoading = false;\n      state.error = action.payload;\n      state.items = [];\n    },\n  },\n  extraReducers: {\n    [createSeekBySubscription.type]: (\n      state: SeeksListState,\n      action: PayloadAction<NormalizedData<number>>\n    ) => {\n      if (!state.items.includes(action.payload.result)) {\n        state.items.push(action.payload.result);\n      }\n    },\n    [updateSeekBySubscription.type]: (\n      state: SeeksListState,\n      action: PayloadAction<NormalizedData<number>>\n    ) => {\n      if (!state.items.includes(action.payload.result)) {\n        state.items.push(action.payload.result);\n      }\n    },\n    [removeSeekBySubscription.type]: (\n      state: SeeksListState,\n      action: PayloadAction<number>\n    ) => {\n      _pull(state.items, action.payload);\n    },\n  },\n});\n\nexport const {\n  getSeeksListRequest,\n  getSeeksListSuccess,\n  getSeeksListError,\n} = seeksListSlice.actions;\n\nexport default seeksListSlice.reducer;\n\nexport const fetchSeeks = (): AppThunk<Promise<Seek[]>> => (dispatch) => {\n  dispatch(getSeeksListRequest());\n\n  return new Promise((resolve, reject) => {\n    ioClient.socket.get(\"/seek\", (body: unknown, jwr: JWR) => {\n      if (jwr.statusCode === 200) {\n        const normalizedGames = normalize(body as Seek[], [seekSchema]);\n        dispatch(getSeeksListSuccess(normalizedGames));\n\n        resolve(body as Seek[]);\n      } else {\n        dispatch(getSeeksListError(body as string));\n        reject(jwr);\n      }\n    });\n  });\n};\n","/* eslint-disable no-param-reassign */\n/* eslint-disable import/no-cycle */\n\nimport { createSlice } from \"@reduxjs/toolkit\";\nimport {\n  loginSuccess,\n  registerSuccess,\n} from \"../current-user/currentUserSlice\";\n\ninterface AuthModalState {\n  isAuthModalVisible: boolean;\n}\n\nconst initialState: AuthModalState = {\n  isAuthModalVisible: false,\n};\n\nconst authModalSlice = createSlice({\n  name: \"authModal\",\n  initialState,\n  reducers: {\n    showAuthModal(state) {\n      state.isAuthModalVisible = true;\n    },\n    hideAuthModal(state) {\n      state.isAuthModalVisible = false;\n    },\n  },\n  extraReducers: {\n    [loginSuccess.type]: (state) => {\n      state.isAuthModalVisible = false;\n    },\n    [registerSuccess.type]: (state) => {\n      state.isAuthModalVisible = false;\n    },\n  },\n});\n\nexport const { showAuthModal, hideAuthModal } = authModalSlice.actions;\n\nexport default authModalSlice.reducer;\n","/* eslint-disable no-param-reassign */\n/* eslint-disable import/no-cycle */\n\nimport { createSlice } from \"@reduxjs/toolkit\";\nimport { challengeAiSuccess } from \"../challenge/challengeSlice\";\n\ninterface ChallengeAiModalState {\n  isChallengeAiModalVisible: boolean;\n}\n\nconst initialState: ChallengeAiModalState = {\n  isChallengeAiModalVisible: false,\n};\n\nconst challengeAiModalSlice = createSlice({\n  name: \"challengeAiModal\",\n  initialState,\n  reducers: {\n    showChallengeAiModal(state) {\n      state.isChallengeAiModalVisible = true;\n    },\n    hideChallengeAiModal(state) {\n      state.isChallengeAiModalVisible = false;\n    },\n  },\n  extraReducers: {\n    [challengeAiSuccess.type]: (state) => {\n      state.isChallengeAiModalVisible = false;\n    },\n  },\n});\n\nexport const {\n  showChallengeAiModal,\n  hideChallengeAiModal,\n} = challengeAiModalSlice.actions;\n\nexport default challengeAiModalSlice.reducer;\n","/* eslint-disable no-param-reassign */\n/* eslint-disable import/no-cycle */\n\nimport { createSlice } from \"@reduxjs/toolkit\";\nimport {\n  createSeekRequest,\n  createSeekSuccess,\n  createSeekError,\n} from \"../challenge/challengeSlice\";\n\ninterface SeekModalState {\n  isSeekModalVisible: boolean;\n  allowCloseSeekModal: boolean;\n}\n\nconst initialState: SeekModalState = {\n  isSeekModalVisible: false,\n  allowCloseSeekModal: true,\n};\n\nconst seekModalSlice = createSlice({\n  name: \"seekModal\",\n  initialState,\n  reducers: {\n    showSeekModal(state) {\n      state.isSeekModalVisible = true;\n    },\n    hideSeekModal(state) {\n      state.isSeekModalVisible = false;\n    },\n  },\n  extraReducers: {\n    [createSeekRequest.type]: (state) => {\n      state.allowCloseSeekModal = false;\n    },\n    [createSeekSuccess.type]: (state) => {\n      state.isSeekModalVisible = false;\n      state.allowCloseSeekModal = true;\n    },\n    [createSeekError.type]: (state) => {\n      state.allowCloseSeekModal = true;\n    },\n  },\n});\n\nexport const { showSeekModal, hideSeekModal } = seekModalSlice.actions;\n\nexport default seekModalSlice.reducer;\n"],"sourceRoot":""}