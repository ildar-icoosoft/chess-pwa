(this["webpackJsonpchess-pwa"]=this["webpackJsonpchess-pwa"]||[]).push([[0],{10:function(e,t,n){"use strict";var a=n(188),r=n.n(a),c=n(189),o=n.n(c)()(r.a);o.sails.url="https://zenproject.ru:1337",t.a=o},108:function(e,t,n){e.exports={gamePreview:"GamePreviewsListItem_gamePreview__wYvMw",player:"GamePreviewsListItem_player__1GbNi",board:"GamePreviewsListItem_board__2y4Yc"}},109:function(e,t,n){e.exports={gameIsStarted:"SeeksListItem_gameIsStarted__3-Jpp",colorIcon:"SeeksListItem_colorIcon__12bXP"}},11:function(e,t,n){"use strict";var a=n(27);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Internal server error";return e.headers["X-Exit-Description"]?e.headers["X-Exit-Description"]:Object(a.isString)(e.body)?e.body:t}},110:function(e,t,n){e.exports={userNameWrapper:"GameControlPanelUserName_userNameWrapper__3TpIe",connectedIcon:"GameControlPanelUserName_connectedIcon__1Wqhf"}},111:function(e,t,n){e.exports={dialogWrapper:"DrawOfferDialog_dialogWrapper__38JK5",acceptBtn:"DrawOfferDialog_acceptBtn__1kykG",declineBtn:"DrawOfferDialog_declineBtn__3Umym",dialogText:"DrawOfferDialog_dialogText__1yBxj"}},112:function(e,t,n){e.exports={currentUserMessage:"ChatMessagesListItem_currentUserMessage__1a4Jr",userName:"ChatMessagesListItem_userName__21pOB",messageWrapper:"ChatMessagesListItem_messageWrapper__1Yveh"}},120:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return o}));var a=n(12),r=Object(a.b)({name:"gameClock",initialState:{},reducers:{oneSecondPassed:function(){}},extraReducers:{}}),c=r.actions.oneSecondPassed,o=(r.reducer,function(){return function(e){var t=setInterval((function(){e(c())}),1e3);return function(){clearInterval(t)}}})},121:function(e,t,n){"use strict";n.d(t,"b",(function(){return b}));var a,r=n(4),c=n(12),o=n(27),i=n(22),l=n(78),s=n(21),u=n(15),m=n(31),d=Object(c.b)({name:"messages",initialState:[],reducers:{showMessage:function(e,t){e.push(t.payload)},hideMessage:function(e,t){Object(o.pullAllBy)(e,[{id:t.payload}],"id")}},extraReducers:(a={},Object(r.a)(a,i.b.type,(function(e,t){e.push({id:"acceptSeekError",body:t.payload.error})})),Object(r.a)(a,l.b.type,(function(e,t){e.push({id:"makeMoveError",body:t.payload})})),Object(r.a)(a,s.c.type,(function(e,t){e.push({id:"getCurrentUserError",body:t.payload})})),Object(r.a)(a,s.h.type,(function(e,t){e.push({id:"logoutError",body:t.payload})})),Object(r.a)(a,u.b.type,(function(e,t){e.push({id:"abortGameError",body:t.payload.error})})),Object(r.a)(a,m.b.type,(function(e,t){e.push({id:"createChatMessageError",body:t.payload.error})})),Object(r.a)(a,u.s.type,(function(e,t){e.push({id:"resignGameError",body:t.payload.error})})),Object(r.a)(a,u.p.type,(function(e,t){e.push({id:"offerDrawError",body:t.payload.error})})),Object(r.a)(a,u.e.type,(function(e,t){e.push({id:"acceptDrawOfferError",body:t.payload.error})})),Object(r.a)(a,u.h.type,(function(e,t){e.push({id:"declineDrawOfferError",body:t.payload.error})})),a)}),f=d.actions,b=(f.showMessage,f.hideMessage);t.a=d.reducer},13:function(e,t,n){"use strict";var a=n(7),r=n(16),c=new a.c.Entity("games",{white:r.a,black:r.a});t.a=c},144:function(e,t,n){e.exports={currentUser:"UsersListItem_currentUser__3Oixp",connectedIcon:"UsersListItem_connectedIcon__2GK65"}},145:function(e,t,n){e.exports={clock:"GameClock_clock__1XkXv",clockRun:"GameClock_clockRun__2zomt",clockEmerg:"GameClock_clockEmerg__1sFO2"}},146:function(e,t,n){e.exports={container:"GameControlPanelStatus_container__119WU",status:"GameControlPanelStatus_status__1IARo",result:"GameControlPanelStatus_result__3Qu_O"}},15:function(e,t,n){"use strict";n.d(t,"k",(function(){return l})),n.d(t,"n",(function(){return d})),n.d(t,"m",(function(){return b})),n.d(t,"u",(function(){return p})),n.d(t,"c",(function(){return g})),n.d(t,"b",(function(){return E})),n.d(t,"t",(function(){return h})),n.d(t,"s",(function(){return w})),n.d(t,"q",(function(){return y})),n.d(t,"p",(function(){return k})),n.d(t,"f",(function(){return C})),n.d(t,"e",(function(){return _})),n.d(t,"i",(function(){return M})),n.d(t,"h",(function(){return R})),n.d(t,"l",(function(){return I})),n.d(t,"a",(function(){return L})),n.d(t,"r",(function(){return x})),n.d(t,"o",(function(){return B})),n.d(t,"d",(function(){return P})),n.d(t,"g",(function(){return G}));var a=n(12),r=n(7),c=n(10),o=n(13),i=n(11),l={isLoading:!0,error:null,isFlipped:!1,rewindToMoveIndex:null},s=Object(a.b)({name:"singleGame",initialState:{},reducers:{getSingleGameRequest:function(e,t){e[t.payload]=Object.assign({},l,e[t.payload],{isLoading:!0,error:null})},getSingleGameSuccess:function(e,t){e[t.payload.result]=Object.assign({},l,e[t.payload.result],{isLoading:!1,error:null})},getSingleGameError:function(e,t){e[t.payload.itemId]=Object.assign({},l,e[t.payload.itemId],{isLoading:!1,error:t.payload.error})},abortGameRequest:function(e,t){},abortGameSuccess:function(e,t){},abortGameError:function(e,t){},resignGameRequest:function(e,t){},resignGameSuccess:function(e,t){},resignGameError:function(e,t){},offerDrawRequest:function(e,t){},offerDrawSuccess:function(e,t){},offerDrawError:function(e,t){},acceptDrawOfferRequest:function(e,t){},acceptDrawOfferSuccess:function(e,t){},acceptDrawOfferError:function(e,t){},declineDrawOfferRequest:function(e,t){},declineDrawOfferSuccess:function(e,t){},declineDrawOfferError:function(e,t){},flipBoard:function(e,t){e[t.payload].isFlipped=!e[t.payload].isFlipped},rewindToMove:function(e,t){e[t.payload.gameId].rewindToMoveIndex=t.payload.moveIndex}},extraReducers:{}}),u=s.actions,m=u.getSingleGameRequest,d=u.getSingleGameSuccess,f=u.getSingleGameError,b=u.flipBoard,p=u.rewindToMove,v=u.abortGameRequest,g=u.abortGameSuccess,E=u.abortGameError,O=u.resignGameRequest,h=u.resignGameSuccess,w=u.resignGameError,j=u.offerDrawRequest,y=u.offerDrawSuccess,k=u.offerDrawError,S=u.acceptDrawOfferRequest,C=u.acceptDrawOfferSuccess,_=u.acceptDrawOfferError,N=u.declineDrawOfferRequest,M=u.declineDrawOfferSuccess,R=u.declineDrawOfferError;t.j=s.reducer;var I=function(e){return function(t){return t(m(e)),new Promise((function(n,a){c.a.socket.get("/api/v1/game/".concat(e),(function(c,l){if(200===l.statusCode){var s=Object(r.b)(c,o.a);t(d(s)),n(c)}else t(f({itemId:e,error:Object(i.a)(l)})),a(l)}))}))}},L=function(e){return function(t){return t(v(e)),new Promise((function(n,a){c.a.socket.post("/api/v1/board/game/".concat(e,"/abort"),(function(c,l){if(200===l.statusCode){var s=Object(r.b)(c,o.a);t(g(s)),n(c)}else t(E({itemId:e,error:Object(i.a)(l)})),a(l)}))}))}},x=function(e){return function(t){return t(O(e)),new Promise((function(n,a){c.a.socket.post("/api/v1/board/game/".concat(e,"/resign"),(function(c,l){if(200===l.statusCode){var s=Object(r.b)(c,o.a);t(h(s)),n(c)}else t(w({itemId:e,error:Object(i.a)(l)})),a(l)}))}))}},B=function(e){return function(t){return t(j(e)),new Promise((function(n,a){c.a.socket.post("/api/v1/board/game/".concat(e,"/draw/yes"),(function(c,l){if(200===l.statusCode){var s=Object(r.b)(c,o.a);t(y(s)),n(c)}else t(k({itemId:e,error:Object(i.a)(l)})),a(l)}))}))}},P=function(e){return function(t){return t(S(e)),new Promise((function(n,a){c.a.socket.post("/api/v1/board/game/".concat(e,"/draw/yes"),(function(c,l){if(200===l.statusCode){var s=Object(r.b)(c,o.a);t(C(s)),n(c)}else t(_({itemId:e,error:Object(i.a)(l)})),a(l)}))}))}},G=function(e){return function(t){return t(N(e)),new Promise((function(n,a){c.a.socket.post("/api/v1/board/game/".concat(e,"/draw/no"),(function(c,l){if(200===l.statusCode){var s=Object(r.b)(c,o.a);t(M(s)),n(c)}else t(R({itemId:e,error:Object(i.a)(l)})),a(l)}))}))}}},159:function(e,t,n){e.exports={clockRun:"GamePreviewClock_clockRun__2fzqU"}},16:function(e,t,n){"use strict";var a=new(n(7).c.Entity)("users");t.a=a},164:function(e,t,n){e.exports={colorIcon:"GameMeta_colorIcon__2-cJ5"}},165:function(e,t,n){e.exports={controlPanel:"GameControlPanel_controlPanel__31q_E",controlPanelInner:"GameControlPanel_controlPanelInner__mVrde"}},18:function(e,t,n){"use strict";n.d(t,"f",(function(){return f})),n.d(t,"b",(function(){return b})),n.d(t,"g",(function(){return p})),n.d(t,"c",(function(){return v})),n.d(t,"e",(function(){return g})),n.d(t,"d",(function(){return E})),n.d(t,"h",(function(){return O})),n.d(t,"a",(function(){return h})),n.d(t,"j",(function(){return w})),n.d(t,"k",(function(){return j})),n.d(t,"l",(function(){return y})),n.d(t,"i",(function(){return k}));var a=n(143),r=n(12),c=n(7),o=n(10),i=n(13),l=n(59),s=n(16),u=n(77),m=Object(r.b)({name:"dataSubscription",initialState:{},reducers:{updateGameBySubscription:function(e,t){},createGameBySubscription:function(e,t){},updateSeekBySubscription:function(e,t){},createSeekBySubscription:function(e,t){},removeSeekBySubscription:function(e,t){},createUserBySubscription:function(e,t){},updateUserBySubscription:function(e,t){},createChatMessageBySubscription:function(e,t){}},extraReducers:{}}),d=m.actions,f=d.updateGameBySubscription,b=d.createGameBySubscription,p=d.updateSeekBySubscription,v=d.createSeekBySubscription,g=d.removeSeekBySubscription,E=d.createUserBySubscription,O=d.updateUserBySubscription,h=d.createChatMessageBySubscription,w=(m.reducer,function(){return function(e){o.a.socket.on("game",(function(t){if("updated"===t.verb){var n=Object(a.a)({},t.previous,{},t.data),r=Object(c.b)(n,i.a);e(f(r))}else if("created"===t.verb){var o=Object(c.b)(t.data,i.a);e(b(o))}}))}}),j=function(){return function(e){o.a.socket.on("seek",(function(t){if("updated"===t.verb){var n=Object(a.a)({},t.previous,{},t.data),r=Object(c.b)(n,l.a);e(p(r))}else if("created"===t.verb){var o=Object(c.b)(t.data,l.a);e(v(o))}else"destroyed"===t.verb&&e(g(t.id))}))}},y=function(){return function(e){o.a.socket.on("user",(function(t){if("updated"===t.verb){var n=Object(a.a)({},t.previous,{},t.data),r=Object(c.b)(n,s.a);e(O(r))}else if("created"===t.verb){var o=Object(c.b)(t.data,s.a);e(E(o))}}))}},k=function(){return function(e){o.a.socket.on("chat-message",(function(t){if("created"===t.verb){var n=Object(c.b)(t.data,u.a);e(h(n))}}))}}},191:function(e,t,n){e.exports={grid:"GamePreviewsList_grid__2iggX"}},192:function(e,t,n){e.exports={result:"GamePreviewResult_result__2DwMU"}},201:function(e,t,n){e.exports={buttonsWrapper:"GameControlPanelTopToolbar_buttonsWrapper__TJIBo"}},202:function(e,t,n){e.exports={buttonsWrapper:"GameControlPanelBottomToolbar_buttonsWrapper__21ame"}},203:function(e,t,n){e.exports={singleGameBoard:"SingleGameBoard_singleGameBoard__2rYay"}},204:function(e,t,n){e.exports={chatMessages:"ChatMessagesList_chatMessages__4clbd"}},205:function(e,t,n){e.exports={textInput:"PostChatMessageForm_textInput__1LkoS"}},209:function(e,t,n){e.exports={messages:"Messages_messages__ESZ_K"}},21:function(e,t,n){"use strict";n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return d})),n.d(t,"f",(function(){return b})),n.d(t,"j",(function(){return g})),n.d(t,"h",(function(){return w})),n.d(t,"b",(function(){return j})),n.d(t,"e",(function(){return y})),n.d(t,"i",(function(){return k})),n.d(t,"g",(function(){return S}));var a=n(12),r=n(7),c=n(10),o=n(16),i=n(11),l=Object(a.b)({name:"currentUser",initialState:{userId:null,isLoading:!0,error:null},reducers:{getCurrentUserRequest:function(e){e.isLoading=!0,e.error=null},getCurrentUserSuccess:function(e,t){e.userId=t.payload?t.payload.result:null,e.isLoading=!1,e.error=null},getCurrentUserError:function(e,t){e.isLoading=!1,e.error=t.payload},loginRequest:function(e){},loginSuccess:function(e,t){e.userId=t.payload.result},loginError:function(e,t){},registerRequest:function(e){},registerSuccess:function(e,t){e.userId=t.payload.result},registerError:function(e,t){},logoutRequest:function(e){},logoutSuccess:function(e){e.userId=null},logoutError:function(e,t){}}}),s=l.actions,u=s.getCurrentUserRequest,m=s.getCurrentUserSuccess,d=s.getCurrentUserError,f=s.loginRequest,b=s.loginSuccess,p=s.loginError,v=s.registerRequest,g=s.registerSuccess,E=s.registerError,O=s.logoutRequest,h=s.logoutSuccess,w=s.logoutError;t.a=l.reducer;var j=function(){return function(e){return e(u()),new Promise((function(t,n){c.a.socket.get("/api/v1/account/me",(function(a,c){if(200===c.statusCode){var l=Object(r.b)(a,o.a);e(m(l)),t(a)}else 401===c.statusCode?(e(m(null)),t(null)):(e(d(Object(i.a)(c))),n(c))}))}))}},y=function(e){return function(t){return t(f()),new Promise((function(n,a){c.a.socket.put("/api/v1/entrance/login",{emailAddress:e.email,password:e.password},(function(e,c){if(200===c.statusCode){var l=Object(r.b)(e,o.a);t(b(l)),n(e)}else t(p(Object(i.a)(c))),a(c)}))}))}},k=function(e){return function(t){return t(v()),new Promise((function(n,a){c.a.socket.post("/api/v1/entrance/signup",{fullName:e.fullName,emailAddress:e.email,password:e.password,confirmPassword:e.password,agreed:!0},(function(e,c){if(200===c.statusCode){var l=Object(r.b)(e,o.a);t(g(l)),n(e)}else t(E(Object(i.a)(c))),a(c)}))}))}},S=function(){return function(e){return e(O()),new Promise((function(t,n){c.a.socket.post("/api/v1/account/logout",{},(function(a,r){200===r.statusCode?(e(h()),t()):(e(w(Object(i.a)(r))),n(r))}))}))}}},212:function(e,t,n){e.exports=n(275)},22:function(e,t,n){"use strict";n.d(t,"f",(function(){return d})),n.d(t,"i",(function(){return b})),n.d(t,"j",(function(){return p})),n.d(t,"h",(function(){return v})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return E})),n.d(t,"b",(function(){return O})),n.d(t,"e",(function(){return h})),n.d(t,"g",(function(){return w})),n.d(t,"a",(function(){return j}));var a=n(12),r=n(7),c=n(10),o=n(13),i=n(59),l=n(11),s=Object(a.b)({name:"challenge",initialState:{},reducers:{challengeAiRequest:function(){},challengeAiSuccess:function(e,t){},challengeAiError:function(e,t){},createSeekRequest:function(){},createSeekSuccess:function(e,t){},createSeekError:function(e,t){},acceptSeekRequest:function(e,t){},acceptSeekSuccess:function(e,t){},acceptSeekError:function(e,t){}},extraReducers:{}}),u=s.actions,m=u.challengeAiRequest,d=u.challengeAiSuccess,f=u.challengeAiError,b=u.createSeekRequest,p=u.createSeekSuccess,v=u.createSeekError,g=u.acceptSeekRequest,E=u.acceptSeekSuccess,O=u.acceptSeekError,h=(s.reducer,function(e){return function(t){return t(m()),new Promise((function(n,a){c.a.socket.post("/api/v1/challenge/ai",e,(function(e,c){if(200===c.statusCode){var i=Object(r.b)(e,o.a);t(d(i)),n(e)}else t(f(Object(l.a)(c))),a(c)}))}))}}),w=function(e){return function(t){return t(b()),new Promise((function(n,a){c.a.socket.post("/api/v1/board/seek",e,(function(e,c){if(200===c.statusCode){var i=Object(r.b)(e,o.a);t(p(i)),n(e)}else t(v(Object(l.a)(c))),a(c)}))}))}},j=function(e){return function(t){return t(g(e)),new Promise((function(n,a){c.a.socket.post("/api/v1/board/seek/".concat(e,"/accept"),{},(function(c,o){if(200===o.statusCode){var s=Object(r.b)(c,i.a);t(E(s)),n(c)}else t(O({itemId:e,error:Object(l.a)(o)})),a(o)}))}))}}},220:function(e,t,n){},249:function(e,t){},254:function(e,t,n){},271:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(55),o=n(20),i=n(8),l=(n(253),n(254),n(287)),s=n(7),u=n(191),m=n.n(u),d=n(83),f=n(27),b=n(51),p=n(108),v=n.n(p),g=Object(a.memo)((function(e){var t=e.game,n=e.color,a=void 0===n?"white":n;return t?r.a.createElement("span",null,t[a]?t[a].fullName:"AI level ".concat(t.aiLevel)):null}),(function(e,t){return Object(f.isEqualWith)(e,t,(function(e,t,n){if("wtime"===n||"btime"===n)return!0}))})),E=n(192),O=n.n(E),h=function(e){var t=e.game,n=e.color,a=void 0===n?"white":n;if(!t)return null;var c="\xbd";return t.winner&&(c=t.winner===a?"1":"0"),r.a.createElement("span",{className:O.a.result},c)},w=n(4),j=n(123),y=n.n(j),k=n(2),S=n.n(k),C=n(159),_=n.n(C),N=function(e){var t=e.time,n=void 0===t?0:t,a=e.isRunning,c=void 0!==a&&a,o=y()().startOf("day").milliseconds(n).format("mm:ss");return r.a.createElement("div",{"data-testid":"time",className:S()(_.a.clock,Object(w.a)({},_.a.clockRun,c))},o)},M=Object(a.memo)((function(e){var t=e.game;if(!t)return null;var n=Object(b.a)(t).fen();return r.a.createElement("div",{className:v.a.gamePreview},r.a.createElement("div",{className:v.a.player},r.a.createElement(g,{game:t,color:"black"}),"started"===t.status&&r.a.createElement(N,{time:t.btime,isRunning:"black"===t.turn}),"started"!==t.status&&"aborted"!==t.status&&r.a.createElement(h,{game:t,color:"black"})),r.a.createElement("div",{className:v.a.board},r.a.createElement(c.b,{to:"/game/".concat(t.id)},r.a.createElement(d.Board,{position:n,viewOnly:!1,width:240}))),r.a.createElement("div",{className:v.a.player},r.a.createElement(g,{game:t,color:"white"}),"started"===t.status&&r.a.createElement(N,{time:t.wtime,isRunning:"white"===t.turn}),"started"!==t.status&&"aborted"!==t.status&&r.a.createElement(h,{game:t,color:"white"})))}),(function(e,t){return Object(f.isEqual)(e,t)})),R=n(277),I=Object(a.memo)((function(e){var t=e.emptyContentMessage,n=void 0===t?"content is empty":t,a=e.isEmpty,c=void 0!==a&&a,o=e.isLoading,i=void 0!==o&&o,l=e.error,s=void 0===l?null:l,u=e.showEmptyContentMessage;return c&&!i&&!s&&(void 0===u||u)?r.a.createElement("div",{className:"alert alert-warning text-center",role:"alert","data-testid":"empty-content-message"},n):i&&c?r.a.createElement("div",{className:"text-center"},r.a.createElement(R.a,{animation:"border",role:"status","data-testid":"loading-spinner"},r.a.createElement("span",{className:"sr-only"},"Loading..."))):s?r.a.createElement("div",{className:"alert alert-danger text-center",role:"alert","data-testid":"error-message"},s):null})),L=function(e){var t=e.games,n=void 0===t?[]:t,a=e.isLoading,c=void 0!==a&&a,o=e.error,i=void 0===o?null:o,l=e.emptyContentMessage;return r.a.createElement("div",null,r.a.createElement(I,{isLoading:c,error:i,isEmpty:0===n.length,emptyContentMessage:l}),r.a.createElement("div",{className:m.a.grid},n.map((function(e){return r.a.createElement(M,{game:e,key:e.id})}))))},x=n(13),B=function(){var e=Object(i.useSelector)((function(e){return Object(s.a)(Object.keys(e.entities.games),[x.a],e.entities).filter((function(e){return"started"===e.status})).sort((function(e,t){return t.createdAt-e.createdAt})).slice(0,9)})),t=Object(i.useSelector)((function(e){return e.gamesList.isLoading})),n=Object(i.useSelector)((function(e){return e.gamesList.error}));return r.a.createElement(L,{games:e,isLoading:t,error:n,emptyContentMessage:"Nobody is playing right now"})},P=n(278),G=function(e){var t=e.onChallengeAi,n=e.onCreateGame,c=Object(a.useCallback)((function(){t&&t()}),[t]),o=Object(a.useCallback)((function(){n&&n()}),[n]);return r.a.createElement("div",{className:"mb-3"},r.a.createElement(P.a,{variant:"primary",onClick:o,"data-testid":"create-game-btn",className:"mr-3"},"Create a game"),r.a.createElement(P.a,{variant:"primary",onClick:c,"data-testid":"challenge-ai-btn"},"Play with the computer"))},D=n(38),q=function(){var e=Object(i.useDispatch)(),t=Object(a.useCallback)((function(){e(Object(D.c)({name:"challengeAi",allowClose:!0}))}),[e]),n=Object(a.useCallback)((function(){e(Object(D.c)({name:"seek",allowClose:!0}))}),[e]);return r.a.createElement(G,{onChallengeAi:t,onCreateGame:n})},U=n(283),T=n(57),A=n(284),F=n(279),W=n(280),V=n(281),H=n(65),z=n.n(H),J=function(e){var t=e.onSubmit;return r.a.createElement(T.a,{initialValues:{level:2,color:"",clockLimit:300,clockIncrement:0},onSubmit:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,n){if(t)return t(e,n)}))},(function(e){var t=e.values,n=e.handleChange,a=e.handleBlur,c=e.handleSubmit,o=e.isSubmitting,i=e.status,l=e.setStatus,s=e.setFieldValue;return r.a.createElement(A.a,{noValidate:!0,onSubmit:function(e){return c(e)},onChange:function(){return l("")}},!!i&&r.a.createElement(F.a,{variant:"danger"},i),r.a.createElement("fieldset",null,r.a.createElement(A.a.Group,null,r.a.createElement(A.a.Label,null,"Minutes per side: ",t.clockLimit/60),r.a.createElement(A.a.Control,{type:"range",name:"clockLimit",onBlur:a,value:t.clockLimit,onChange:n,min:"60",max:"1800",step:"60"})),r.a.createElement(A.a.Group,null,r.a.createElement(A.a.Label,null,"Increment in seconds: ",t.clockIncrement),r.a.createElement(A.a.Control,{type:"range",name:"clockIncrement",onBlur:a,value:t.clockIncrement,onChange:n,min:"0",max:"60"}))),r.a.createElement("div",{className:"text-center"},"Level"),r.a.createElement(W.a,null,r.a.createElement(V.a,{className:S()("mx-auto",z.a.levelButtonGroup)},[1,2,3,4].map((function(e){return r.a.createElement(P.a,{key:e,type:"button",variant:e===t.level?"dark":"light",onClick:function(){return s("level",e)}},e)})))),r.a.createElement("div",{className:"text-center"},"A.I. Level: ",t.level),r.a.createElement("div",{className:z.a.colorSubmits},r.a.createElement("button",{disabled:o,type:"submit",title:"Black",className:S()(z.a.colorSubmitsButton,z.a.blackButton),onClick:function(){return s("color","black")}},r.a.createElement("i",null)),r.a.createElement("button",{disabled:o,type:"submit",title:"Random side",className:S()(z.a.colorSubmitsButton,z.a.randomButton),onClick:function(){return s("color","random")}},r.a.createElement("i",null)),r.a.createElement("button",{disabled:o,type:"submit",title:"White",className:S()(z.a.colorSubmitsButton,z.a.whiteButton),onClick:function(){return s("color","white")}},r.a.createElement("i",null))))}))},K=n(22),Q=n(11),X=function(){var e=Object(i.useDispatch)(),t=Object(o.f)(),n=Object(a.useCallback)((function(n,a){return e(Object(K.e)(n)).then((function(e){t.push("/game/".concat(e.id))})).catch((function(e){a.setStatus(Object(Q.a)(e))}))}),[e,t]);return r.a.createElement(J,{onSubmit:n})},Y=function(e){var t=e.show,n=void 0!==t&&t,a=e.onHide;return r.a.createElement(U.a,{show:n,onHide:a,animation:!1},r.a.createElement(U.a.Header,{closeButton:!0},r.a.createElement(U.a.Title,null,"Play with the computer")),r.a.createElement(U.a.Body,null,r.a.createElement(X,null)))},Z=function(){var e=Object(i.useSelector)((function(e){return"challengeAi"===e.modal.showModal})),t=Object(i.useDispatch)(),n=Object(a.useCallback)((function(){t(Object(D.b)())}),[t]);return r.a.createElement(Y,{show:e,onHide:n})},$=function(){var e=Object(i.useSelector)((function(e){return Object(s.a)(Object.keys(e.entities.games),[x.a],e.entities).filter((function(e){return"started"!==e.status&&"aborted"!==e.status})).sort((function(e,t){return t.createdAt-e.createdAt})).slice(0,9)}),(function(e,t){return JSON.stringify(e.map((function(e){return e.id})))===JSON.stringify(t.map((function(e){return e.id})))})),t=Object(i.useSelector)((function(e){return e.gamesList.isLoading})),n=Object(i.useSelector)((function(e){return e.gamesList.error}));return r.a.createElement(L,{games:e,isLoading:t,error:n,emptyContentMessage:"There is no finished games yet"})},ee=n(53),te=n.n(ee),ne=function(e){var t=e.onSubmit,n=e.onAbort,c=Object(a.useCallback)((function(){n&&n()}),[n]);return r.a.createElement(T.a,{initialValues:{color:"",clockLimit:300,clockIncrement:0},onSubmit:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,n){if(t)return t(e,n)}))},(function(e){var t=e.values,n=e.handleChange,a=e.handleBlur,o=e.handleSubmit,i=e.isSubmitting,l=e.status,s=e.setStatus,u=e.setFieldValue;return r.a.createElement(A.a,{noValidate:!0,onSubmit:function(e){return o(e)},onChange:function(){return s("")}},!!l&&r.a.createElement(F.a,{variant:"danger"},l),r.a.createElement("fieldset",null,r.a.createElement(A.a.Group,null,r.a.createElement(A.a.Label,null,"Minutes per side: ",t.clockLimit/60),r.a.createElement(A.a.Control,{disabled:i,type:"range",name:"clockLimit",onBlur:a,value:t.clockLimit,onChange:n,min:"60",max:"1800",step:"60"})),r.a.createElement(A.a.Group,null,r.a.createElement(A.a.Label,null,"Increment in seconds: ",t.clockIncrement),r.a.createElement(A.a.Control,{disabled:i,type:"range",name:"clockIncrement",onBlur:a,value:t.clockIncrement,onChange:n,min:"0",max:"60"}))),r.a.createElement("div",{className:te.a.colorSubmits},r.a.createElement("button",{disabled:i,type:"submit",title:"Black",className:S()(te.a.colorSubmitsButton,te.a.blackButton),onClick:function(){return u("color","black")}},r.a.createElement("i",null)),r.a.createElement("button",{disabled:i,type:"submit",title:"Random side",className:S()(te.a.colorSubmitsButton,te.a.randomButton),onClick:function(){return u("color","random")}},r.a.createElement("i",null)),r.a.createElement("button",{disabled:i,type:"submit",title:"White",className:S()(te.a.colorSubmitsButton,te.a.whiteButton),onClick:function(){return u("color","white")}},r.a.createElement("i",null))),i&&r.a.createElement("div",{className:te.a.spinnerWrapper},r.a.createElement(R.a,{animation:"border",className:te.a.spinner},r.a.createElement("span",{className:"sr-only"},"Waiting for opponent...")),r.a.createElement(P.a,{variant:"danger",className:te.a.spinnerButton,onClick:c},"Abort")))}))},ae=n(10),re=function(){var e=Object(i.useDispatch)(),t=Object(o.f)(),n=Object(a.useCallback)((function(n,a){return e(Object(K.g)(n)).then((function(e){t.push("/game/".concat(e.id))})).catch((function(e){0===e.statusCode||a.setStatus(Object(Q.a)(e))}))}),[e,t]),c=Object(a.useCallback)((function(){ae.a.socket.disconnect(),ae.a.socket.reconnect()}),[]);return r.a.createElement(ne,{onSubmit:n,onAbort:c})},ce=function(e){var t=e.allowClose,n=void 0===t||t,a=e.show,c=void 0!==a&&a,o=e.onHide;return r.a.createElement(U.a,{show:c,onHide:o,animation:!1,backdrop:!!n||"static"},r.a.createElement(U.a.Header,{closeButton:n},r.a.createElement(U.a.Title,null,"Create a game")),r.a.createElement(U.a.Body,null,r.a.createElement(re,null)))},oe=function(){var e=Object(i.useSelector)((function(e){return"seek"===e.modal.showModal})),t=Object(i.useSelector)((function(e){return e.modal.allowClose})),n=Object(i.useDispatch)(),c=Object(a.useCallback)((function(){n(Object(D.b)())}),[n]);return r.a.createElement(ce,{allowClose:t,show:e,onHide:c})},ie=n(59),le=n(109),se=n.n(le);function ue(){return(ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function me(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var de=r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("path",{d:"M256,0C114.618,0,0,114.618,0,256s114.618,256,256,256s256-114.618,256-256S397.382,0,256,0z M256,469.333 c-117.818,0-213.333-95.515-213.333-213.333S138.182,42.667,256,42.667S469.333,138.182,469.333,256S373.818,469.333,256,469.333z "}))),fe=r.a.createElement("g",null),be=r.a.createElement("g",null),pe=r.a.createElement("g",null),ve=r.a.createElement("g",null),ge=r.a.createElement("g",null),Ee=r.a.createElement("g",null),Oe=r.a.createElement("g",null),he=r.a.createElement("g",null),we=r.a.createElement("g",null),je=r.a.createElement("g",null),ye=r.a.createElement("g",null),ke=r.a.createElement("g",null),Se=r.a.createElement("g",null),Ce=r.a.createElement("g",null),_e=r.a.createElement("g",null),Ne=function(e){var t=e.svgRef,n=e.title,a=me(e,["svgRef","title"]);return r.a.createElement("svg",ue({id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",ref:t},a),n?r.a.createElement("title",null,n):null,de,fe,be,pe,ve,ge,Ee,Oe,he,we,je,ye,ke,Se,Ce,_e)},Me=r.a.forwardRef((function(e,t){return r.a.createElement(Ne,ue({svgRef:t},e))}));n.p;function Re(){return(Re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Ie(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Le=r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("path",{d:"M256,0C114.837,0,0,114.837,0,256s114.837,256,256,256s256-114.837,256-256S397.163,0,256,0z"}))),xe=r.a.createElement("g",null),Be=r.a.createElement("g",null),Pe=r.a.createElement("g",null),Ge=r.a.createElement("g",null),De=r.a.createElement("g",null),qe=r.a.createElement("g",null),Ue=r.a.createElement("g",null),Te=r.a.createElement("g",null),Ae=r.a.createElement("g",null),Fe=r.a.createElement("g",null),We=r.a.createElement("g",null),Ve=r.a.createElement("g",null),He=r.a.createElement("g",null),ze=r.a.createElement("g",null),Je=r.a.createElement("g",null),Ke=function(e){var t=e.svgRef,n=e.title,a=Ie(e,["svgRef","title"]);return r.a.createElement("svg",Re({id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",ref:t},a),n?r.a.createElement("title",null,n):null,Le,xe,Be,Pe,Ge,De,qe,Ue,Te,Ae,Fe,We,Ve,He,ze,Je)},Qe=r.a.forwardRef((function(e,t){return r.a.createElement(Ke,Re({svgRef:t},e))}));n.p;function Xe(){return(Xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Ye(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Ze=r.a.createElement("g",null,r.a.createElement("g",{id:"c198_half_moon"},r.a.createElement("path",{d:"M29.105,14.552c0-0.03-0.004-0.06-0.004-0.092C29.054,6.481,22.584,0.027,14.6,0.002C14.585,0.002,14.569,0,14.556,0 h-0.002l0,0C6.547,0,0.051,6.47,0.005,14.468c0,0.027-0.004,0.053-0.004,0.084v0.002l0,0c0,8.037,6.517,14.553,14.553,14.553l0,0 h0.002c0.014,0,0.029-0.003,0.044-0.003c8.016-0.025,14.507-6.529,14.507-14.55l0,0L29.105,14.552L29.105,14.552z M14.556,2.079 c6.877,0,12.473,5.596,12.473,12.473c0,6.876-5.596,12.476-12.473,12.476V2.079z"})),r.a.createElement("g",{id:"Capa_1_271_"})),$e=r.a.createElement("g",null),et=r.a.createElement("g",null),tt=r.a.createElement("g",null),nt=r.a.createElement("g",null),at=r.a.createElement("g",null),rt=r.a.createElement("g",null),ct=r.a.createElement("g",null),ot=r.a.createElement("g",null),it=r.a.createElement("g",null),lt=r.a.createElement("g",null),st=r.a.createElement("g",null),ut=r.a.createElement("g",null),mt=r.a.createElement("g",null),dt=r.a.createElement("g",null),ft=r.a.createElement("g",null),bt=function(e){var t=e.svgRef,n=e.title,a=Ye(e,["svgRef","title"]);return r.a.createElement("svg",Xe({id:"Capa_1",x:"0px",y:"0px",viewBox:"0 0 29.107 29.107",style:{enableBackground:"new 0 0 29.107 29.107"},xmlSpace:"preserve",ref:t},a),n?r.a.createElement("title",null,n):null,Ze,$e,et,tt,nt,at,rt,ct,ot,it,lt,st,ut,mt,dt,ft)},pt=r.a.forwardRef((function(e,t){return r.a.createElement(bt,Xe({svgRef:t},e))})),vt=(n.p,function(e){var t=e.acceptInProcess,n=void 0===t?null:t,c=e.currentUserId,o=void 0===c?null:c,i=e.seek,l=e.onPlay,s=Object(a.useCallback)((function(){l&&l(i.id)}),[l,i]);return i?r.a.createElement("div",{"data-testid":"seek-wrapper",className:S()("d-flex","align-items-center","border-bottom",Object(w.a)({},se.a.gameIsStarted,i.game))},r.a.createElement("div",{className:"d-flex pl-2"},"white"===i.color&&r.a.createElement(Me,{"data-testid":"white-icon",className:se.a.colorIcon}),"black"===i.color&&r.a.createElement(Qe,{"data-testid":"black-icon",className:se.a.colorIcon}),"random"===i.color&&r.a.createElement(pt,{"data-testid":"random-icon",className:se.a.colorIcon})),r.a.createElement("div",{"data-testid":"user-name",className:"mr-auto p-2"},i.createdBy.fullName),r.a.createElement("div",{"data-testid":"time-control",className:"p-2"},i.clockLimit/60," + ",i.clockIncrement),r.a.createElement("div",{className:"p-2"},o!==i.createdBy.id&&r.a.createElement(P.a,{"data-testid":"play-btn",onClick:s,disabled:null!==n||!!i.game},n===i.id&&r.a.createElement(R.a,{animation:"border","data-testid":"play-btn-spinner",size:"sm",className:"mr-2"},r.a.createElement("span",{className:"sr-only"},"Sending...")),"Play"))):null}),gt=function(e){var t=e.acceptInProcess,n=void 0===t?null:t,a=e.currentUserId,c=void 0===a?null:a,o=e.seeks,i=void 0===o?[]:o,l=e.onPlay,s=e.isLoading,u=void 0!==s&&s,m=e.error,d=void 0===m?null:m;return r.a.createElement("div",null,r.a.createElement(I,{isLoading:u,error:d,isEmpty:0===i.length,emptyContentMessage:"Nobody is waiting for opponent"}),r.a.createElement("div",null,i.map((function(e){return r.a.createElement(vt,{acceptInProcess:n,currentUserId:c,seek:e,onPlay:l,key:e.id})}))))},Et=function(){var e=Object(i.useDispatch)(),t=Object(o.f)(),n=Object(i.useSelector)((function(e){return e.currentUser.userId})),c=Object(i.useSelector)((function(e){return Object(s.a)(e.seeksList.items,[ie.a],e.entities)})),l=Object(i.useSelector)((function(e){return e.seeksList.isLoading})),u=Object(i.useSelector)((function(e){return e.seeksList.error})),m=Object(i.useSelector)((function(e){return e.acceptSeekRequest})),d=m.inProcess?m.itemId:null,f=Object(a.useCallback)((function(n){return e(Object(K.a)(n)).then((function(e){t.push("/game/".concat(e.game.id))})).catch((function(){}))}),[e,t]);return r.a.createElement(gt,{currentUserId:n,seeks:c,onPlay:f,acceptInProcess:d,isLoading:l,error:u})},Ot=n(37),ht=n(200),wt=n.n(ht),jt=n(144),yt=n.n(jt);function kt(){return(kt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function St(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Ct=r.a.createElement("circle",{cx:9,cy:9,r:6,stroke:"#629924",strokeWidth:1,fill:"#629924"}),_t=function(e){var t=e.svgRef,n=e.title,a=St(e,["svgRef","title"]);return r.a.createElement("svg",kt({height:18,width:16,ref:t},a),n?r.a.createElement("title",null,n):null,Ct)},Nt=r.a.forwardRef((function(e,t){return r.a.createElement(_t,kt({svgRef:t},e))}));n.p;function Mt(){return(Mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Rt(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var It=r.a.createElement("circle",{cx:9,cy:9,r:6,stroke:"#BBB6B4",strokeWidth:1,fill:"#fff"}),Lt=function(e){var t=e.svgRef,n=e.title,a=Rt(e,["svgRef","title"]);return r.a.createElement("svg",Mt({height:18,width:16,ref:t},a),n?r.a.createElement("title",null,n):null,It)},xt=r.a.forwardRef((function(e,t){return r.a.createElement(Lt,Mt({svgRef:t},e))})),Bt=(n.p,function(e){var t=e.currentUserId,n=void 0===t?null:t,a=e.user;return a?r.a.createElement("div",{"data-testid":"user-wrapper",className:S()("d-flex","align-items-center","border-bottom",Object(w.a)({},yt.a.currentUser,a.id===n))},r.a.createElement("div",{className:"d-flex pl-2"},a.isOnline&&r.a.createElement(Nt,{"data-testid":"online-icon",className:yt.a.connectedIcon,title:"online"}),!a.isOnline&&r.a.createElement(xt,{"data-testid":"offline-icon",className:yt.a.connectedIcon,title:"offline"})),r.a.createElement("div",{"data-testid":"user-name",className:"mr-auto p-2"},a.fullName),r.a.createElement("div",{"data-testid":"registration-date",title:"registration date"},wt()(a.createdAt).format("LLL"))):null}),Pt=function(e){var t=e.currentUserId,n=void 0===t?null:t,a=e.users,c=void 0===a?[]:a,o=e.isLoading,i=void 0!==o&&o,l=e.error,s=void 0===l?null:l;return r.a.createElement("div",null,r.a.createElement(I,{isLoading:i,error:s,isEmpty:0===c.length,emptyContentMessage:"There is no players yet"}),r.a.createElement("div",null,c.map((function(e){return r.a.createElement(Bt,{currentUserId:n,user:e,key:e.id})}))))},Gt=n(16),Dt=function(){var e=Object(i.useSelector)((function(e){return e.currentUser.userId})),t=Object(Ot.useDeepEqualSelector)((function(e){return Object(s.a)(e.usersList.items,[Gt.a],e.entities)})),n=Object(i.useSelector)((function(e){return e.usersList.isLoading})),a=Object(i.useSelector)((function(e){return e.usersList.error}));return r.a.createElement(Pt,{users:t,isLoading:n,error:a,currentUserId:e})},qt=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Z,null),r.a.createElement(oe,null),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(q,null)),r.a.createElement(l.a,{className:"mb-3"},r.a.createElement(l.a.Body,null,r.a.createElement(l.a.Title,null,"Our players"),r.a.createElement(Dt,null))),r.a.createElement(l.a,{className:"mb-3"},r.a.createElement(l.a.Body,null,r.a.createElement(l.a.Title,null,"Waiting for opponent"),r.a.createElement(Et,null))),r.a.createElement(l.a,{className:"mb-3"},r.a.createElement(l.a.Body,null,r.a.createElement(l.a.Title,null,"Playing right now"),r.a.createElement(B,null))),r.a.createElement(l.a,null,r.a.createElement(l.a.Body,null,r.a.createElement(l.a.Title,null,"Finished"),r.a.createElement($,null))))},Ut=function(e){if("outoftime"===e.status){if("white"===e.winner)return"Time out \u2022 White is victorious";if("black"===e.winner)return"Time out \u2022 Black is victorious"}if("resign"===e.status){if("black"===e.winner)return"White resigned \u2022 Black is victorious";if("white"===e.winner)return"Black resigned \u2022 White is victorious"}if("aborted"===e.status)return"Game aborted";if("mate"===e.status){if("white"===e.winner)return"Checkmate \u2022 White is victorious";if("black"===e.winner)return"Checkmate \u2022 Black is victorious"}return"draw"===e.status?"Draw":"stalemate"===e.status?"Stalemate":"Playing right now"},Tt=n(164),At=n.n(Tt),Ft=function(e){var t=e.game;return t?r.a.createElement(l.a,{className:"mb-3"},r.a.createElement(l.a.Body,{className:"p-2"},r.a.createElement("div",null,"Time Control:"," ",r.a.createElement("span",{"data-testid":"time-control"},t.clockLimit/60," + ",t.clockIncrement)),r.a.createElement("div",{"data-testid":"game-status",className:S()({"text-success":"started"===t.status,"text-danger":"started"!==t.status})},Ut(t)),r.a.createElement("div",{"data-testid":"white-user",className:"d-flex align-items-center"},r.a.createElement(Me,{className:S()(At.a.colorIcon,"mr-1")}),t.white?t.white.fullName:"AI level ".concat(t.aiLevel)),r.a.createElement("div",{"data-testid":"black-user",className:"d-flex align-items-center"},r.a.createElement(Qe,{className:S()(At.a.colorIcon,"mr-1")}),t.black?t.black.fullName:"AI level ".concat(t.aiLevel)))):null},Wt=function(e){var t=e.id,n=Object(Ot.useDeepEqualSelector)((function(e){return Object(s.a)(t,x.a,e.entities)}),(function(e,t,n){if("wtime"===n||"btime"===n)return!0}));return n?r.a.createElement(Ft,{game:n}):null},Vt=n(165),Ht=n.n(Vt),zt=n(145),Jt=n.n(zt),Kt=function(e){var t,n=e.time,a=void 0===n?0:n,c=e.isRunning,o=void 0!==c&&c,i=y()().startOf("day").milliseconds(a).format("mm:ss");return r.a.createElement("div",{"data-testid":"time",className:S()(Jt.a.clock,(t={},Object(w.a)(t,Jt.a.clockRun,o),Object(w.a)(t,Jt.a.clockEmerg,a<1e4),t))},i)},Qt=n(84),Xt=n.n(Qt),Yt=n(146),Zt=n.n(Yt),$t=function(e){var t=e.game;if(!t)return null;var n="\xbd-\xbd";return t.winner&&(n="white"===t.winner?"1-0":"0-1"),r.a.createElement("div",{className:Zt.a.container},r.a.createElement("div",{className:Zt.a.result,"data-testid":"game-result"},n),r.a.createElement("div",{className:Zt.a.status,"data-testid":"game-status"},Ut(t)))},en=n(32),tn=function(e){return"".concat(e.from).concat(e.to)},nn=Object(a.memo)((function(e){var t=e.game,n=e.rewindToMoveIndex,c=void 0===n?null:n,o=e.onRewindToMove,i=Object(a.useRef)(null),l=Object(a.useRef)(-1),s=Object(a.useRef)();if(Object(a.useEffect)((function(){if(t){var e=Object(en.a)(t);l.current===e&&s.current===t.status||null!==c||i.current&&(i.current.scrollTop=i.current.scrollHeight),l.current=e,s.current=t.status}}),[t,l,s,c,i]),!t)return null;var u=Object(b.a)(t).history({verbose:!0}),m=u.length,d=Object(f.chunk)(u,2),p=function(e){return function(){o&&o(e)}};return r.a.createElement("div",{className:Xt.a.movesWrapper,ref:i},d.map((function(e,t){var n=2*t+1,a=2*t+2;return r.a.createElement(r.a.Fragment,{key:"move-".concat(t)},r.a.createElement("div",{className:Xt.a.moveNumber},t+1),r.a.createElement("div",{"data-testid":"move-".concat(n),onClick:p(n),role:"button",className:S()(Xt.a.move,Object(w.a)({},Xt.a.selected,c===n||null===c&&m===n))},tn(e[0])),e[1]&&r.a.createElement("div",{"data-testid":"move-".concat(a),onClick:p(a),role:"button",className:S()(Xt.a.move,Object(w.a)({},Xt.a.selected,c===a||null===c&&m===a))},tn(e[1])))})),"started"!==t.status&&r.a.createElement($t,{game:t}))}),(function(e,t){return Object(f.isEqualWith)(e,t,(function(e,t,n){if("wtime"===n||"btime"===n)return!0}))})),an=n(110),rn=n.n(an),cn=Object(a.memo)((function(e){var t=e.game,n=e.color,a=void 0===n?"white":n;return t?r.a.createElement("div",{className:S()(rn.a.userNameWrapper,"d-flex","align-items-center","pl-2")},t[a]&&r.a.createElement("span",{"data-testid":"connected-icon",className:"d-flex mr-1"},t[a].isOnline&&r.a.createElement(Nt,{"data-testid":"online-icon",className:rn.a.connectedIcon,title:"online"}),!t[a].isOnline&&r.a.createElement(xt,{"data-testid":"offline-icon",className:rn.a.connectedIcon,title:"offline"})),r.a.createElement("span",{"data-testid":"user-name",className:rn.a.userName},t[a]?t[a].fullName:"AI level ".concat(t.aiLevel))):null}),(function(e,t){return Object(f.isEqualWith)(e,t,(function(e,t,n){if("wtime"===n||"btime"===n)return!0}))})),on=n(33),ln=n(34),sn=n(201),un=n.n(sn),mn=Object(a.memo)((function(e){var t=e.isFirstMove,n=void 0!==t&&t,c=e.isLastMove,o=void 0!==c&&c,i=e.hasPrevMove,l=void 0!==i&&i,s=e.hasNextMove,u=void 0!==s&&s,m=e.onFlipBoard,d=e.onRewindToPrevMove,f=e.onRewindToNextMove,b=e.onRewindToFirstMove,p=e.onRewindToLastMove,v=Object(a.useCallback)((function(){m&&m()}),[m]),g=Object(a.useCallback)((function(){d&&d()}),[d]),E=Object(a.useCallback)((function(){f&&f()}),[f]),O=Object(a.useCallback)((function(){b&&b()}),[b]),h=Object(a.useCallback)((function(){p&&p()}),[p]);return r.a.createElement("div",{className:un.a.buttonsWrapper},r.a.createElement(P.a,{type:"button",variant:"link","data-testid":"flip-board-btn",onClick:v},r.a.createElement(on.a,{icon:ln.i}),r.a.createElement("span",{className:"sr-only"},"Flip board")),r.a.createElement(P.a,{type:"button",variant:"link","data-testid":"rewind-to-first-move-btn",onClick:O,disabled:n},r.a.createElement(on.a,{icon:ln.a}),r.a.createElement("span",{className:"sr-only"},"Rewind to first move")),r.a.createElement(P.a,{type:"button",variant:"link","data-testid":"rewind-to-prev-move-btn",onClick:g,disabled:!l},r.a.createElement(on.a,{icon:ln.c}),r.a.createElement("span",{className:"sr-only"},"Rewind to prev move")),r.a.createElement(P.a,{type:"button",variant:"link","data-testid":"rewind-to-next-move-btn",onClick:E,disabled:!u},r.a.createElement(on.a,{icon:ln.d}),r.a.createElement("span",{className:"sr-only"},"Rewind to next move")),r.a.createElement(P.a,{type:"button",variant:"link","data-testid":"rewind-to-last-move-btn",onClick:h,disabled:o},r.a.createElement(on.a,{icon:ln.b}),r.a.createElement("span",{className:"sr-only"},"Rewind to last move")))})),dn=n(202),fn=n.n(dn),bn=Object(a.memo)((function(e){var t=e.canAbortGame,n=void 0!==t&&t,c=e.canOfferDraw,o=void 0!==c&&c,i=e.canResignGame,l=void 0!==i&&i,s=e.onAbortGame,u=e.onOfferDraw,m=e.onResignGame,d=Object(a.useCallback)((function(){s&&s()}),[s]),f=Object(a.useCallback)((function(){u&&u()}),[u]),b=Object(a.useCallback)((function(){m&&m()}),[m]);return r.a.createElement("div",{className:fn.a.buttonsWrapper},r.a.createElement(P.a,{type:"button",variant:"link","data-testid":"abort-game-btn",onClick:d,disabled:!n},r.a.createElement(on.a,{icon:ln.j}),r.a.createElement("span",{className:"sr-only"},"Abort")),r.a.createElement(P.a,{type:"button",variant:"link","data-testid":"offer-draw-btn",onClick:f,disabled:!o},r.a.createElement(on.a,{icon:ln.g}),r.a.createElement("span",{className:"sr-only"},"Offer a draw")),r.a.createElement(P.a,{type:"button",variant:"link","data-testid":"resign-game-btn",onClick:b,disabled:!l},r.a.createElement(on.a,{icon:ln.f}),r.a.createElement("span",{className:"sr-only"},"Resign")))})),pn=n(111),vn=n.n(pn),gn=function(e){var t=e.onAccept,n=e.onDecline,c=Object(a.useCallback)((function(){t&&t()}),[t]),o=Object(a.useCallback)((function(){n&&n()}),[n]);return r.a.createElement("div",{className:vn.a.dialogWrapper},r.a.createElement(P.a,{type:"button",variant:"link","data-testid":"accept-btn",onClick:c,className:vn.a.acceptBtn},r.a.createElement(on.a,{icon:ln.e}),r.a.createElement("span",{className:"sr-only"},"Accept")),r.a.createElement(P.a,{type:"button",variant:"link","data-testid":"decline-btn",onClick:o,className:vn.a.declineBtn},r.a.createElement(on.a,{icon:ln.j}),r.a.createElement("span",{className:"sr-only"},"Decline")),r.a.createElement("div",{className:vn.a.dialogText},"Your opponent offers a draw"))},En=function(e){var t=e.game,n=e.orientation,a=void 0===n?"white":n,c=e.rewindToMoveIndex,o=void 0===c?null:c,i=e.canAbortGame,l=void 0!==i&&i,s=e.canOfferDraw,u=void 0!==s&&s,m=e.canResignGame,d=void 0!==m&&m,f=e.drawOfferSentByCurrentUser,b=void 0!==f&&f,p=e.drawOfferSentByOpponent,v=void 0!==p&&p,g=e.onAcceptDrawOffer,E=e.onDeclineDrawOffer,O=e.onRewindToMove,h=e.onFlipBoard,w=e.onRewindToPrevMove,j=e.onRewindToNextMove,y=e.onRewindToFirstMove,k=e.onRewindToLastMove,S=e.onAbortGame,C=e.onOfferDraw,_=e.onResignGame;if(!t)return null;var N=Object(en.a)(t),M=0===N||0===o,R=null===o,I=0!==N&&0!==o,L=null!==o;return r.a.createElement("div",{className:Ht.a.controlPanel},r.a.createElement(Kt,{time:"white"===a?t.btime:t.wtime,isRunning:t.turn!==a}),r.a.createElement("div",{className:Ht.a.controlPanelInner},r.a.createElement(cn,{game:t,color:"white"===a?"black":"white"}),r.a.createElement(mn,{isFirstMove:M,isLastMove:R,hasPrevMove:I,hasNextMove:L,onFlipBoard:h,onRewindToPrevMove:w,onRewindToNextMove:j,onRewindToFirstMove:y,onRewindToLastMove:k}),r.a.createElement(nn,{game:t,rewindToMoveIndex:o,onRewindToMove:O}),v&&r.a.createElement(gn,{onAccept:g,onDecline:E}),b&&r.a.createElement("div",{className:"alert alert-warning text-center",role:"alert","data-testid":"draw-offer-sent-message"},"Draw offer sent"),r.a.createElement(bn,{canAbortGame:l,canOfferDraw:u,canResignGame:d,onAbortGame:S,onOfferDraw:C,onResignGame:_}),r.a.createElement(cn,{game:t,color:"white"===a?"white":"black"})),r.a.createElement(Kt,{time:"white"===a?t.wtime:t.btime,isRunning:t.turn===a}))},On=function(e){var t,n,c,o,i,l,s,u,m,d,f,b=e.game,p=e.currentUser,v=e.isFlipped,g=void 0!==v&&v,E=e.rewindToMoveIndex,O=void 0===E?null:E,h=e.onFlipBoard,w=e.onAcceptDrawOffer,j=e.onDeclineDrawOffer,y=e.onAbortGame,k=e.onOfferDraw,S=e.onResignGame,C=e.onRewindToMove,_=b?b.moves:null,N=Object(a.useCallback)((function(e){var t=Object(en.a)({moves:_});C&&C(e===t?null:e)}),[_,C]),M=Object(a.useCallback)((function(){C&&C(0)}),[C]),R=Object(a.useCallback)((function(){C&&C(null)}),[C]),I=Object(a.useCallback)((function(){var e=Object(en.a)({moves:_});C&&C(null===O?e-1:O-1)}),[_,C,O]),L=Object(a.useCallback)((function(){var e=Object(en.a)({moves:_});C&&C(O===e-1?null:O+1)}),[_,C,O]);if(!b)return null;var x=Object(en.a)(b),B="white";p&&p.id===(null===(t=b.black)||void 0===t?void 0:t.id)&&(B="black"),g&&(B="white"===B?"black":"white");var P,G,D=null;p&&(p.id===(null===(P=b.white)||void 0===P?void 0:P.id)?D="white":p.id===(null===(G=b.black)||void 0===G?void 0:G.id)&&(D="black"));var q=!1;!p||p.id!==(null===(n=b.white)||void 0===n?void 0:n.id)&&p.id!==(null===(c=b.black)||void 0===c?void 0:c.id)||"started"!==b.status||b.drawOffer!==D||(q=!0);var U=!1;!p||p.id!==(null===(o=b.white)||void 0===o?void 0:o.id)&&p.id!==(null===(i=b.black)||void 0===i?void 0:i.id)||"started"!==b.status||null===b.drawOffer||b.drawOffer===D||(U=!0);var T=!1;p&&(p.id===(null===(l=b.white)||void 0===l?void 0:l.id)||p.id===(null===(s=b.black)||void 0===s?void 0:s.id))&&"started"===b.status&&x<2&&(T=!0);var A=!1;p&&(p.id===(null===(u=b.white)||void 0===u?void 0:u.id)||p.id===(null===(m=b.black)||void 0===m?void 0:m.id))&&"started"===b.status&&x>1&&(A=!0);var F=!1;return p&&(p.id===(null===(d=b.white)||void 0===d?void 0:d.id)||p.id===(null===(f=b.black)||void 0===f?void 0:f.id))&&null===b.drawOffer&&0===b.aiLevel&&"started"===b.status&&x>1&&(F=!0),r.a.createElement(En,{game:b,orientation:B,rewindToMoveIndex:O,canAbortGame:T,canResignGame:A,canOfferDraw:F,drawOfferSentByCurrentUser:q,drawOfferSentByOpponent:U,onAcceptDrawOffer:w,onDeclineDrawOffer:j,onFlipBoard:h,onAbortGame:y,onOfferDraw:k,onResignGame:S,onRewindToMove:N,onRewindToFirstMove:M,onRewindToLastMove:R,onRewindToPrevMove:I,onRewindToNextMove:L})},hn=n(15),wn=function(e){var t=e.id,n=Object(i.useDispatch)(),c=Object(Ot.useDeepEqualSelector)((function(e){return Object(s.a)(t,x.a,e.entities)})),o=Object(i.useSelector)((function(e){return e.singleGame[t]}))||hn.k,l=Object(Ot.useShallowEqualSelector)((function(e){if(e.currentUser.userId)return Object(s.a)(e.currentUser.userId,Gt.a,e.entities)})),u=Object(a.useCallback)((function(){n(Object(hn.m)(t))}),[n,t]),m=Object(a.useCallback)((function(){n(Object(hn.a)(t))}),[n,t]),d=Object(a.useCallback)((function(){n(Object(hn.d)(t))}),[n,t]),f=Object(a.useCallback)((function(){n(Object(hn.g)(t))}),[n,t]),b=Object(a.useCallback)((function(){n(Object(hn.r)(t))}),[n,t]),p=Object(a.useCallback)((function(){n(Object(hn.o)(t))}),[n,t]),v=Object(a.useCallback)((function(e){n(Object(hn.u)({moveIndex:e,gameId:t}))}),[n,t]);return c?r.a.createElement(On,{game:c,currentUser:l,isFlipped:o.isFlipped,rewindToMoveIndex:o.rewindToMoveIndex,onFlipBoard:u,onAbortGame:m,onAcceptDrawOffer:d,onDeclineDrawOffer:f,onOfferDraw:p,onResignGame:b,onRewindToMove:v}):null},jn=n(210),yn=n(203),kn=n.n(yn),Sn=n(43),Cn=n.n(Sn),_n=function(e){var t,n,a,c,o=e.show,i=void 0!==o&&o,l=e.turnColor,s=void 0===l?"white":l,u=e.onPromotion,m=function(e){return function(){u&&u(e)}};return r.a.createElement(U.a,{show:i,animation:!1,backdrop:"static"},r.a.createElement(U.a.Body,null,r.a.createElement("div",{style:{textAlign:"center",cursor:"pointer"}},r.a.createElement("span",{"data-testid":"promotion-q",role:"presentation",onClick:m("q")},r.a.createElement("div",{className:S()(Cn.a.piece,(t={},Object(w.a)(t,Cn.a.wQ,"white"===s),Object(w.a)(t,Cn.a.bQ,"black"===s),t))})),r.a.createElement("span",{"data-testid":"promotion-r",role:"presentation",onClick:m("r")},r.a.createElement("div",{className:S()(Cn.a.piece,(n={},Object(w.a)(n,Cn.a.wR,"white"===s),Object(w.a)(n,Cn.a.bR,"black"===s),n))})),r.a.createElement("span",{"data-testid":"promotion-b",role:"presentation",onClick:m("b")},r.a.createElement("div",{className:S()(Cn.a.piece,(a={},Object(w.a)(a,Cn.a.wB,"white"===s),Object(w.a)(a,Cn.a.bB,"black"===s),a))})),r.a.createElement("span",{"data-testid":"promotion-n",role:"presentation",onClick:m("n")},r.a.createElement("div",{className:S()(Cn.a.piece,(c={},Object(w.a)(c,Cn.a.wN,"white"===s),Object(w.a)(c,Cn.a.bN,"black"===s),c))})))))},Nn=function(e){var t=e.currentUser,n=e.game,c=e.isFlipped,o=void 0!==c&&c,i=e.onMove,l=e.rewindToMoveIndex,s=void 0===l?null:l,u=e.isLoading,m=void 0!==u&&u,f=e.error,p=void 0===f?null:f,v=Object(a.useRef)(null),g=Object(a.useRef)(null);Object(a.useEffect)((function(){n&&("started"===g.current&&"started"!==n.status&&new Audio("https://lichess1.org/assets/_Iu1lae/sound/standard/GenericNotify.ogg").play(),g.current=n.status)}),[n,g]),Object(a.useEffect)((function(){n&&(!v.current||"started"===n.status&&null===s||v.current[2]())}),[n,s]);var E=Object(a.useRef)(null);Object(a.useEffect)((function(){if(n){var e=Object(en.a)(n);null===E.current&&0===e&&new Audio("https://lichess1.org/assets/_Iu1lae/sound/standard/GenericNotify.ogg").play().catch((function(){}));var t=null===s?e:s;null!==E.current&&t===E.current+1&&new Audio("https://lichess1.org/assets/sound/standard/Move.ogg").play(),E.current=t}}),[n,E,s]);var O=Object(a.useRef)(null);Object(a.useEffect)((function(){if(n){var e=Object(en.a)(n);if(v.current&&null!==O.current&&e===O.current+1&&"started"===n.status&&null===s){var t=Object(b.a)(n);Object(d.isValidMove)(t,v.current[0])?(v.current[1](),v.current=null):v.current[2]()}O.current=e}}),[n,O,s]);var h=Object(a.useCallback)((function(e,t,n){v.current=[e,t,n]}),[v]),w=Object(a.useCallback)((function(){v.current=null}),[v]),j=Object(a.useState)(!1),y=Object(jn.a)(j,2),k=y[0],S=y[1];Object(a.useEffect)((function(){n&&k&&"started"!==n.status&&S(!1)}),[k,n]);var C=Object(a.useRef)(null),_=Object(a.useCallback)((function(e){i&&(Object(en.b)(n,e)?(S(!0),C.current=e):i(e))}),[i,n]),N=Object(a.useCallback)((function(e){S(!1);var t=Object(b.a)(n);if(i&&C.current&&Object(d.isValidMove)(t,C.current)){var a={from:C.current.from,to:C.current.to,promotion:e};i(a)}}),[i,n]),M=null;if(n){var R,L,x,B,P,G,D=Object(b.a)(n),q=null===s?D:Object(b.a)(n,s),U=q.fen(),T=q.in_check(),A=n.turn,F=Object(d.getValidMoves)(q),W=!0;!t||t.id!==(null===(R=n.white)||void 0===R?void 0:R.id)&&t.id!==(null===(L=n.black)||void 0===L?void 0:L.id)||"started"!==n.status||null!==s||(W=!1),t&&t.id===(null===(x=n.white)||void 0===x?void 0:x.id)&&(G="white"),t&&t.id===(null===(B=n.black)||void 0===B?void 0:B.id)&&(G="black");var V="white";t&&t.id===(null===(P=n.black)||void 0===P?void 0:P.id)&&(V="black"),o&&(V="white"===V?"black":"white");var H,z=D.history({verbose:!0});if(null===s){if(z.length){var J=z[z.length-1];H=[J.from,J.to]}}else if(s>0){var K=z[s-1];H=[K.from,K.to]}M=r.a.createElement(r.a.Fragment,null,r.a.createElement(_n,{show:k,turnColor:n.turn,onPromotion:N}),r.a.createElement("div",{className:kn.a.singleGameBoard},r.a.createElement(d.Board,{allowMarkers:!0,check:T,clickable:!0,draggable:!0,lastMoveSquares:H,movableColor:G,onMove:_,onSetPremove:h,onUnsetPremove:w,orientation:V,position:U,premovable:!0,turnColor:A,validMoves:F,viewOnly:W})))}return r.a.createElement("div",null,r.a.createElement(I,{isLoading:m,error:p,isEmpty:!n}),M)},Mn=n(78),Rn=function(e){var t=e.id,n=Object(i.useDispatch)(),c=Object(Ot.useDeepEqualSelector)((function(e){return Object(s.a)(t,x.a,e.entities)}),(function(e,t,n){if("wtime"===n||"btime"===n)return!0})),o=Object(Ot.useShallowEqualSelector)((function(e){if(e.currentUser.userId)return Object(s.a)(e.currentUser.userId,Gt.a,e.entities)})),l=Object(i.useSelector)((function(e){return e.singleGame[t]}))||hn.k,u=Object(a.useCallback)((function(e){n(Object(Mn.a)(t,"".concat(e.from).concat(e.to).concat(e.promotion||"")))}),[n,t]);return r.a.createElement(Nn,{game:c,currentUser:o,isFlipped:l.isFlipped,rewindToMoveIndex:l.rewindToMoveIndex,onMove:u,isLoading:l.isLoading,error:l.error})},In=n(77),Ln=n(31),xn=n(112),Bn=n.n(xn),Pn=function(e){var t=e.message,n=e.currentUserId,a=void 0===n?null:n;return t?r.a.createElement("div",{"data-testid":"message-wrapper",className:S()(Bn.a.messageWrapper,Object(w.a)({},Bn.a.currentUserMessage,t.createdBy.id===a))},r.a.createElement("span",{"data-testid":"user-name",className:Bn.a.userName},t.createdBy.fullName),r.a.createElement("span",{"data-testid":"message-text",className:Bn.a.messageText},t.text)):null},Gn=n(204),Dn=n.n(Gn),qn=function(e){var t=e.currentUserId,n=void 0===t?null:t,c=e.messages,o=void 0===c?[]:c,i=e.isLoading,l=void 0!==i&&i,s=e.error,u=void 0===s?null:s,m=Object(a.useRef)(null),d=Object(a.useRef)(0);return Object(a.useEffect)((function(){d.current!==o.length&&m.current&&(m.current.scrollTop=m.current.scrollHeight),d.current=o.length}),[m,o]),r.a.createElement("div",{className:Dn.a.chatMessages,ref:m},r.a.createElement(I,{isLoading:l,error:u,isEmpty:0===o.length,showEmptyContentMessage:!1}),r.a.createElement("div",null,o.map((function(e){return r.a.createElement(Pn,{currentUserId:n,message:e,key:e.id})}))))},Un=function(e){var t=e.gameId,n=Object(i.useSelector)((function(e){return e.currentUser.userId})),a=Object(Ot.useDeepEqualSelector)((function(e){return e.chat[t]?Object(s.a)(e.chat[t].items,[In.a],e.entities):Ln.e.items})),c=Object(i.useSelector)((function(e){return e.chat[t]?e.chat[t].isLoading:Ln.e.isLoading})),o=Object(i.useSelector)((function(e){return e.chat[t]?e.chat[t].error:Ln.e.error}));return r.a.createElement(qn,{messages:a,isLoading:c,error:o,currentUserId:n})},Tn=n(205),An=n.n(Tn),Fn=function(e){var t=e.onSubmit;return r.a.createElement(T.a,{initialValues:{text:""},onSubmit:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,n){if(t)return t(e,n)}))},(function(e){var t=e.values,n=e.handleChange,a=e.handleBlur,c=e.handleSubmit,o=e.isSubmitting,i=e.setStatus;return r.a.createElement(A.a,{noValidate:!0,onSubmit:function(e){return c(e)},onChange:function(){return i("")}},r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"flex-grow-1 mr-2"},r.a.createElement(A.a.Control,{className:An.a.textInput,name:"text",autoComplete:"off",placeholder:"Please be nice in the chat!",onBlur:a,value:t.text,onChange:n})),r.a.createElement("div",null,r.a.createElement(P.a,{disabled:o||""===t.text,type:"submit"},o&&r.a.createElement(R.a,{animation:"border","data-testid":"submit-btn-spinner",size:"sm",className:"mr-2"},r.a.createElement("span",{className:"sr-only"},"Sending...")),r.a.createElement(on.a,{icon:ln.h}),r.a.createElement("span",{className:"sr-only"},"Offer a draw")))))}))},Wn=function(e){var t=e.gameId,n=Object(i.useDispatch)(),c=Object(a.useCallback)((function(e,a){return a.resetForm(),n(Object(Ln.a)(t,e.text))}),[n,t]);return r.a.createElement(Fn,{onSubmit:c})},Vn=function(e){var t=e.gameId;return r.a.createElement(l.a,null,r.a.createElement(l.a.Header,{className:"p-2"},"Chat room"),r.a.createElement(l.a.Body,{className:"p-2"},r.a.createElement(Un,{gameId:t})),r.a.createElement(l.a.Footer,{className:"p-2"},r.a.createElement(Wn,{gameId:t})))},Hn=function(){var e=Object(i.useDispatch)(),t=Object(o.g)().id,n=Number(t);return Object(a.useEffect)((function(){e(Object(hn.l)(n)),e(Object(Ln.f)(n))}),[e,n]),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-3"},r.a.createElement(Wt,{id:n}),r.a.createElement(Vn,{gameId:n})),r.a.createElement("div",{className:"col-6"},r.a.createElement(Rn,{id:n})),r.a.createElement("div",{className:"col-3"},r.a.createElement(wn,{id:n})))},zn=n(21),Jn=n(18),Kn=n(120),Qn=function(e){var t=e.currentUser,n=void 0===t?null:t,o=e.onLogout,i=e.onShowAuthModal,l=Object(a.useCallback)((function(){o&&o()}),[o]),s=Object(a.useCallback)((function(){i&&i()}),[i]);return r.a.createElement("header",{className:"d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom box-shadow"},r.a.createElement("div",{className:"offset-4 col-4 text-center"},r.a.createElement(c.b,{className:"blog-header-logo text-dark",to:"/"},"Chess PWA")),r.a.createElement("div",{className:"col-4 d-flex justify-content-end align-items-center"},n?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"mr-3"},"Hi, ",n.fullName),r.a.createElement(P.a,{className:"btn btn-sm btn-danger mr-3","data-testid":"logout-btn",onClick:l},"Logout")):r.a.createElement(P.a,{className:"btn btn-sm btn-success mr-3","data-testid":"login-btn",onClick:s},"Login / Register"),r.a.createElement("a",{href:"https://github.com/ildar-icoosoft/chess-pwa",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{src:"".concat("/chess-pwa","/imgs/GitHub-Mark-32px.png"),alt:""}))))},Xn=function(){var e=Object(Ot.useShallowEqualSelector)((function(e){return e.currentUser.userId?Object(s.a)(e.currentUser.userId,Gt.a,e.entities):null})),t=Object(i.useDispatch)(),n=Object(a.useCallback)((function(){t(Object(zn.g)())}),[t]),c=Object(a.useCallback)((function(){t(Object(D.c)({name:"auth",allowClose:!0}))}),[t]);return r.a.createElement(Qn,{currentUser:e,onLogout:n,onShowAuthModal:c})},Yn=n(285),Zn=n(282),$n=n(52),ea=$n.a().shape({email:$n.c().email("Invalid email").required("Required"),password:$n.c().min(6,"Password length must be >= 6").required("Required")}),ta=function(e){var t=e.onSubmit;return r.a.createElement(T.a,{initialValues:{email:"",password:""},validationSchema:ea,onSubmit:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,n){if(t)return t(e,n)}))},(function(e){var t=e.errors,n=e.values,a=e.touched,c=e.handleChange,o=e.handleBlur,i=e.handleSubmit,l=e.isSubmitting,s=e.status,u=e.setStatus;return r.a.createElement(A.a,{noValidate:!0,onSubmit:function(e){return i(e)},onChange:function(){return u("")}},!!s&&r.a.createElement(F.a,{variant:"danger"},s),r.a.createElement(A.a.Group,null,r.a.createElement(A.a.Label,null,"Email address"),r.a.createElement(A.a.Control,{type:"email",name:"email",placeholder:"Enter email",onBlur:o,value:n.email,onChange:c,isValid:a.email&&!t.email,isInvalid:a.email&&!!t.email}),r.a.createElement(A.a.Control.Feedback,{type:"invalid"},t.email)),r.a.createElement(A.a.Group,null,r.a.createElement(A.a.Label,null,"Password"),r.a.createElement(A.a.Control,{type:"password",name:"password",placeholder:"Password",onChange:c,onBlur:o,value:n.password,isValid:a.password&&!t.password,isInvalid:a.password&&!!t.password}),r.a.createElement(A.a.Control.Feedback,{type:"invalid"},t.password)),r.a.createElement(P.a,{variant:"primary",type:"submit",disabled:l},"Login"))}))},na=$n.a().shape({fullName:$n.c().required("Required"),email:$n.c().email("Invalid email").required("Required"),password:$n.c().min(6,"Password length must be >= 6").required("Required"),confirmPassword:$n.c().equals([$n.b("password")],"Please repeat the password").required("Required")}),aa=function(e){var t=e.onSubmit;return r.a.createElement(T.a,{initialValues:{fullName:"",email:"",password:"",confirmPassword:""},validationSchema:na,onSubmit:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,n){if(t)return t(e,n)}))},(function(e){var t=e.errors,n=e.values,a=e.touched,c=e.handleChange,o=e.handleBlur,i=e.handleSubmit,l=e.isSubmitting,s=e.status,u=e.setStatus;return r.a.createElement(A.a,{noValidate:!0,onSubmit:function(e){return i(e)},onChange:function(){return u("")}},!!s&&r.a.createElement(F.a,{variant:"danger"},s),r.a.createElement(A.a.Group,null,r.a.createElement(A.a.Label,null,"Full name"),r.a.createElement(A.a.Control,{type:"text",name:"fullName",placeholder:"Enter full name",onBlur:o,value:n.fullName,onChange:c,isValid:a.fullName&&!t.fullName,isInvalid:a.fullName&&!!t.fullName}),r.a.createElement(A.a.Control.Feedback,{type:"invalid"},t.fullName)),r.a.createElement(A.a.Group,null,r.a.createElement(A.a.Label,null,"Email address"),r.a.createElement(A.a.Control,{type:"email",name:"email",placeholder:"Enter email",onBlur:o,value:n.email,onChange:c,isValid:a.email&&!t.email,isInvalid:a.email&&!!t.email}),r.a.createElement(A.a.Control.Feedback,{type:"invalid"},t.email)),r.a.createElement(A.a.Group,null,r.a.createElement(A.a.Label,null,"Password"),r.a.createElement(A.a.Control,{type:"password",name:"password",placeholder:"Password",onChange:c,onBlur:o,value:n.password,isValid:a.password&&!t.password,isInvalid:a.password&&!!t.password}),r.a.createElement(A.a.Control.Feedback,{type:"invalid"},t.password)),r.a.createElement(A.a.Group,null,r.a.createElement(A.a.Label,null,"Confirm Password"),r.a.createElement(A.a.Control,{type:"password",name:"confirmPassword",placeholder:"Password",onChange:c,onBlur:o,value:n.confirmPassword,isValid:a.confirmPassword&&!t.confirmPassword,isInvalid:a.confirmPassword&&!!t.confirmPassword}),r.a.createElement(A.a.Control.Feedback,{type:"invalid"},t.confirmPassword)),r.a.createElement(P.a,{variant:"primary",type:"submit",disabled:l},"Register"))}))},ra=function(){var e=Object(i.useDispatch)(),t=r.a.useCallback((function(t,n){return e(Object(zn.e)(t)).catch((function(e){n.setStatus(Object(Q.a)(e))}))}),[e]),n=r.a.useCallback((function(t,n){return e(Object(zn.i)({fullName:t.fullName,email:t.email,password:t.password})).catch((function(e){n.setStatus(Object(Q.a)(e))}))}),[e]);return r.a.createElement(Yn.a,{transition:!1},r.a.createElement(Zn.a,{eventKey:"home",title:"Login"},r.a.createElement(ta,{onSubmit:t})),r.a.createElement(Zn.a,{eventKey:"profile",title:"Register"},r.a.createElement(aa,{onSubmit:n})))},ca=function(e){var t=e.show,n=void 0!==t&&t,a=e.onHide;return r.a.createElement("div",null,r.a.createElement(U.a,{show:n,onHide:a,animation:!1},r.a.createElement(U.a.Header,{closeButton:!0},r.a.createElement(U.a.Title,null,"Login")),r.a.createElement(U.a.Body,null,r.a.createElement(ra,null))))},oa=function(){var e=Object(i.useSelector)((function(e){return"auth"===e.modal.showModal})),t=Object(i.useDispatch)(),n=Object(a.useCallback)((function(){t(Object(D.b)())}),[t]);return r.a.createElement(ca,{show:e,onHide:n})},ia=n(86),la=n(87),sa=n(286),ua=n(209),ma=n.n(ua),da=function(e){var t=e.items,n=void 0===t?[]:t,c=e.onHideMessage,o=Object(a.useCallback)((function(e){return function(){c&&c(e)}}),[c]);return r.a.createElement("div",{className:ma.a.messages},n.map((function(e,t){return r.a.createElement(sa.a,{key:t,onClose:o(e.id),show:!0,delay:3e3,autohide:!0,animation:!1},r.a.createElement(sa.a.Body,null,e.body))})))},fa=n(121),ba=function(){var e=Object(i.useDispatch)(),t=Object(i.useSelector)((function(e){return e.messages})),n=Object(a.useCallback)((function(t){e(Object(fa.b)(t))}),[e]);return r.a.createElement(da,{items:t,onHideMessage:n})},pa=n(88);t.default=function(){var e=Object(i.useDispatch)();return Object(a.useEffect)((function(){e(Object(zn.b)());var t=e(Object(Kn.b)());return e(Object(Jn.i)()),e(Object(Jn.j)()),e(Object(Jn.k)()),e(Object(Jn.l)()),e(Object(ia.b)()),e(Object(pa.b)()),e(Object(la.b)()),function(){t()}}),[e]),r.a.createElement("div",{className:"container-fluid"},r.a.createElement(c.a,null,r.a.createElement(Xn,null),r.a.createElement(oa,null),r.a.createElement(ba,null),r.a.createElement(o.c,null,r.a.createElement(o.a,{path:"/game/:id"},r.a.createElement(Hn,null)),r.a.createElement(o.a,{path:"/"},r.a.createElement(qt,null)))))}},275:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(35),o=n.n(c),i=n(8);n(220),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l,s,u=n(12),m=n(39),d=n(31),f=n(86),b=n(87),p=n(88),v=n(21),g=n(4),E=n(15),O=n(22),h=n(120),w=n(18),j=n(78),y=n(32),k=function(e,t){Object.assign(e.users,t.payload.entities.users),Object.assign(e.games,t.payload.entities.games),Object.assign(e.seeks,t.payload.entities.seeks),Object.assign(e.chatMessages,t.payload.entities.chatMessages)},S=Object(u.b)({name:"entities",initialState:{users:{},games:{},seeks:{},chatMessages:{}},reducers:{},extraReducers:(l={},Object(g.a)(l,v.d.type,(function(e,t){t.payload&&k(e,{payload:t.payload})})),Object(g.a)(l,v.f.type,k),Object(g.a)(l,v.j.type,k),Object(g.a)(l,f.c.type,k),Object(g.a)(l,b.c.type,k),Object(g.a)(l,E.n.type,k),Object(g.a)(l,E.c.type,k),Object(g.a)(l,d.c.type,k),Object(g.a)(l,w.a.type,k),Object(g.a)(l,d.g.type,(function(e,t){return k(e,{payload:t.payload.normalizedChatMessages})})),Object(g.a)(l,E.t.type,k),Object(g.a)(l,E.q.type,k),Object(g.a)(l,E.f.type,k),Object(g.a)(l,E.i.type,k),Object(g.a)(l,O.f.type,k),Object(g.a)(l,O.j.type,k),Object(g.a)(l,w.c.type,k),Object(g.a)(l,w.g.type,k),Object(g.a)(l,w.e.type,(function(e,t){delete e.seeks[t.payload]})),Object(g.a)(l,w.f.type,k),Object(g.a)(l,w.b.type,k),Object(g.a)(l,p.c.type,k),Object(g.a)(l,w.d.type,k),Object(g.a)(l,w.h.type,k),Object(g.a)(l,j.c.type,(function(e,t){e.games[t.payload.gameId].turn="white"===e.games[t.payload.gameId].turn?"black":"white",e.games[t.payload.gameId].moves="".concat(e.games[t.payload.gameId].moves," ").concat(t.payload.move).trim()})),Object(g.a)(l,j.d.type,k),Object(g.a)(l,O.d.type,k),Object(g.a)(l,h.a.type,(function(e){Object.keys(e.games).forEach((function(t){var n=e.games[t];if("started"===n.status&&Object(y.a)(n)>1){var a="white"===n.turn?"wtime":"btime";n[a]-=1e3,n[a]<0&&(n[a]=0),0===n[a]&&(n.status="outoftime",n.winner="white"===n.turn?"black":"white")}}))})),l)}).reducer,C=Object(u.b)({name:"acceptSeekRequest",initialState:{inProcess:!1,itemId:null,error:null},reducers:{},extraReducers:(s={},Object(g.a)(s,O.c.type,(function(e,t){e.inProcess=!0,e.itemId=t.payload,e.error=null})),Object(g.a)(s,O.d.type,(function(e,t){e.inProcess=!1,e.itemId=null,e.error=null})),Object(g.a)(s,O.b.type,(function(e,t){e.inProcess=!1,e.itemId=t.payload.itemId,e.error=t.payload.error})),s)}).reducer,_=n(121),N=n(38),M=Object(m.c)({chat:d.d,currentUser:v.a,gamesList:f.a,entities:S,singleGame:E.j,seeksList:b.a,usersList:p.a,acceptSeekRequest:C,messages:_.a,modal:N.a});var R=Object(u.a)({reducer:M});!function(){var e=n(271).default;o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.Provider,{store:R},r.a.createElement(e,null))),document.getElementById("root"))}(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},31:function(e,t,n){"use strict";n.d(t,"e",(function(){return u})),n.d(t,"g",(function(){return b})),n.d(t,"c",(function(){return g})),n.d(t,"b",(function(){return E})),n.d(t,"f",(function(){return O})),n.d(t,"a",(function(){return h}));var a=n(4),r=n(12),c=n(7),o=n(10),i=n(11),l=n(77),s=n(18),u={isLoading:!0,error:null,items:[]},m=Object(r.b)({name:"chat",initialState:{},reducers:{getChatMessagesListRequest:function(e,t){e[t.payload]=Object.assign({},u,e[t.payload],{isLoading:!0,error:null})},getChatMessagesListSuccess:function(e,t){e[t.payload.gameId]={isLoading:!1,error:null,items:t.payload.normalizedChatMessages.result}},getChatMessagesListError:function(e,t){e[t.payload.itemId]={isLoading:!1,error:t.payload.error,items:[]}},createChatMessageRequest:function(e,t){},createChatMessageSuccess:function(e,t){var n=t.payload.result;e[t.payload.entities.chatMessages[n].game].items.push(n)},createChatMessageError:function(e,t){}},extraReducers:Object(a.a)({},s.a.type,(function(e,t){var n=t.payload.result,a=t.payload.entities.chatMessages[n].game;e[a]&&e[a].items.push(n)}))}),d=m.actions,f=d.getChatMessagesListRequest,b=d.getChatMessagesListSuccess,p=d.getChatMessagesListError,v=d.createChatMessageRequest,g=d.createChatMessageSuccess,E=d.createChatMessageError;t.d=m.reducer;var O=function(e){return function(t){return t(f(e)),new Promise((function(n,a){o.a.socket.get("/api/v1/board/game/".concat(e,"/chat"),(function(r,o){if(200===o.statusCode){var s=Object(c.b)(r,[l.a]);t(b({gameId:e,normalizedChatMessages:s})),n(r)}else t(p({itemId:e,error:Object(i.a)(o)})),a(o)}))}))}},h=function(e,t){return function(n){return n(v(e)),new Promise((function(a,r){o.a.socket.post("/api/v1/board/game/".concat(e,"/chat"),{text:t},(function(t,o){if(200===o.statusCode){var s=Object(c.b)(t,l.a);n(g(s)),a(t)}else n(E({itemId:e,error:Object(i.a)(o)})),r(o)}))}))}}},32:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return c}));var a=n(51),r=function(e,t){for(var n=Object(a.a)(e).moves({verbose:!0}),r=0,c=n.length;r<c;r+=1)if(-1!==n[r].flags.indexOf("p")&&n[r].from===t.from)return!0;return!1},c=function(e){return 0===e.moves.length?0:e.moves.split(" ").length}},38:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return m}));var a,r=n(4),c=n(12),o=n(22),i=n(21),l=Object(c.b)({name:"modal",initialState:{allowClose:!0,showModal:null},reducers:{showModal:function(e,t){e.showModal=t.payload.name,e.allowClose=t.payload.allowClose},hideModal:function(e){e.showModal=null,e.allowClose=!0}},extraReducers:(a={},Object(r.a)(a,o.i.type,(function(e){e.allowClose=!1})),Object(r.a)(a,o.j.type,(function(e){e.showModal=null,e.allowClose=!0})),Object(r.a)(a,o.h.type,(function(e){e.allowClose=!0})),Object(r.a)(a,i.f.type,(function(e){e.showModal=null,e.allowClose=!0})),Object(r.a)(a,i.j.type,(function(e){e.showModal=null,e.allowClose=!0})),Object(r.a)(a,o.f.type,(function(e){e.showModal=null,e.allowClose=!0})),a)}),s=l.actions,u=s.showModal,m=s.hideModal;t.a=l.reducer},43:function(e,t,n){e.exports={piece:"PromotionChoiceModal_piece__3X8mT",bB:"PromotionChoiceModal_bB__1a2sj",bK:"PromotionChoiceModal_bK__1-JsQ",bN:"PromotionChoiceModal_bN__1_xeb",bP:"PromotionChoiceModal_bP__1L1RS",bQ:"PromotionChoiceModal_bQ__14de1",bR:"PromotionChoiceModal_bR__Gvlcg",wB:"PromotionChoiceModal_wB__3zy1F",wK:"PromotionChoiceModal_wK__mz-Oc",wN:"PromotionChoiceModal_wN__3SOQS",wP:"PromotionChoiceModal_wP__3qDSP",wQ:"PromotionChoiceModal_wQ__28Iaa",wR:"PromotionChoiceModal_wR__2E7j8"}},51:function(e,t,n){"use strict";var a=n(190),r="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.initialFen;"startpos"===n&&(n=r);var c=new a.Chess(n);return e.moves&&e.moves.split(" ").forEach((function(e,n){if(!(null!==t&&n>=t)&&!c.move(e,{sloppy:!0}))throw Error("incorrect move: ".concat(e))})),c}},53:function(e,t,n){e.exports={colorSubmits:"CreateSeekForm_colorSubmits__1rtRc",colorSubmitsButton:"CreateSeekForm_colorSubmitsButton__2SUlU",whiteButton:"CreateSeekForm_whiteButton__2Jb8D",blackButton:"CreateSeekForm_blackButton__1J0eY",randomButton:"CreateSeekForm_randomButton__34hZ3",spinnerWrapper:"CreateSeekForm_spinnerWrapper__1uHk1",spinnerButton:"CreateSeekForm_spinnerButton__2VfoE"}},59:function(e,t,n){"use strict";var a=n(7),r=n(16),c=n(13),o=new a.c.Entity("seeks",{createdBy:r.a,game:c.a});t.a=o},65:function(e,t,n){e.exports={levelButtonGroup:"ChallengeAiForm_levelButtonGroup__1lnm_",colorSubmits:"ChallengeAiForm_colorSubmits__1pM28",colorSubmitsButton:"ChallengeAiForm_colorSubmitsButton__2P6Lx",whiteButton:"ChallengeAiForm_whiteButton__2nTjs",blackButton:"ChallengeAiForm_blackButton__1LVeL",randomButton:"ChallengeAiForm_randomButton__1S07l"}},77:function(e,t,n){"use strict";var a=n(7),r=n(16),c=new a.c.Entity("chatMessages",{createdBy:r.a});t.a=c},78:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return m})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return f}));var a=n(12),r=n(7),c=n(10),o=n(13),i=n(11),l=Object(a.b)({name:"move",initialState:{},reducers:{makeMoveRequest:function(e,t){},makeMoveSuccess:function(e,t){},makeMoveError:function(e,t){}},extraReducers:{}}),s=l.actions,u=s.makeMoveRequest,m=s.makeMoveSuccess,d=s.makeMoveError,f=(l.reducer,function(e,t){return function(n){return n(u({gameId:e,move:t})),new Promise((function(a,l){c.a.socket.post("/api/v1/board/game/".concat(e,"/move/").concat(t),{},(function(e,t){if(200===t.statusCode){var c=Object(r.b)(e,o.a);n(m(c)),a(e)}else n(d(Object(i.a)(t))),l(t)}))}))}})},84:function(e,t,n){e.exports={movesWrapper:"GameMoves_movesWrapper__2X9ck",moveNumber:"GameMoves_moveNumber__3tyZT",move:"GameMoves_move__21iOk",selected:"GameMoves_selected__2FXRO"}},86:function(e,t,n){"use strict";n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return f}));var a=n(12),r=n(7),c=n(10),o=n(13),i=n(11),l=Object(a.b)({name:"games",initialState:{isLoading:!0,error:null},reducers:{getGamesListRequest:function(e){e.isLoading=!0,e.error=null},getGamesListSuccess:function(e,t){e.isLoading=!1,e.error=null},getGamesListError:function(e,t){e.isLoading=!1,e.error=t.payload}}}),s=l.actions,u=s.getGamesListRequest,m=s.getGamesListSuccess,d=s.getGamesListError;t.a=l.reducer;var f=function(){return function(e){return e(u()),new Promise((function(t,n){c.a.socket.get("/api/v1/game",{limit:300,sort:"createdAt DESC"},(function(a,c){if(200===c.statusCode){var l=Object(r.b)(a,[o.a]);e(m(l)),t(a)}else e(d(Object(i.a)(c))),n(c)}))}))}}},87:function(e,t,n){"use strict";n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return g}));var a,r=n(4),c=n(12),o=n(27),i=n(7),l=n(10),s=n(59),u=n(18),m=n(11),d=Object(c.b)({name:"seeks",initialState:{isLoading:!0,error:null,items:[]},reducers:{getSeeksListRequest:function(e){e.isLoading=!0,e.error=null},getSeeksListSuccess:function(e,t){e.isLoading=!1,e.error=null,e.items=t.payload.result},getSeeksListError:function(e,t){e.isLoading=!1,e.error=t.payload,e.items=[]}},extraReducers:(a={},Object(r.a)(a,u.c.type,(function(e,t){e.items.includes(t.payload.result)||e.items.unshift(t.payload.result)})),Object(r.a)(a,u.g.type,(function(e,t){e.items.includes(t.payload.result)||e.items.unshift(t.payload.result)})),Object(r.a)(a,u.e.type,(function(e,t){Object(o.pull)(e.items,t.payload)})),a)}),f=d.actions,b=f.getSeeksListRequest,p=f.getSeeksListSuccess,v=f.getSeeksListError;t.a=d.reducer;var g=function(){return function(e){return e(b()),new Promise((function(t,n){l.a.socket.get("/api/v1/seek",{sort:"createdAt DESC"},(function(a,r){if(200===r.statusCode){var c=Object(i.b)(a,[s.a]);e(p(c)),t(a)}else e(v(Object(m.a)(r))),n(r)}))}))}}},88:function(e,t,n){"use strict";n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return g}));var a,r=n(4),c=n(12),o=n(7),i=n(18),l=n(21),s=n(10),u=n(11),m=n(16),d=Object(c.b)({name:"users",initialState:{isLoading:!0,error:null,items:[]},reducers:{getUsersListRequest:function(e){e.isLoading=!0,e.error=null},getUsersListSuccess:function(e,t){e.isLoading=!1,e.error=null,e.items=t.payload.result},getUsersListError:function(e,t){e.isLoading=!1,e.error=t.payload,e.items=[]}},extraReducers:(a={},Object(r.a)(a,l.j.type,(function(e,t){e.items.includes(t.payload.result)||e.items.push(t.payload.result)})),Object(r.a)(a,i.d.type,(function(e,t){e.items.includes(t.payload.result)||e.items.push(t.payload.result)})),Object(r.a)(a,i.h.type,(function(e,t){e.items.includes(t.payload.result)||e.items.push(t.payload.result)})),a)}),f=d.actions,b=f.getUsersListRequest,p=f.getUsersListSuccess,v=f.getUsersListError;t.a=d.reducer;var g=function(){return function(e){return e(b()),new Promise((function(t,n){s.a.socket.get("/api/v1/user",(function(a,r){if(200===r.statusCode){var c=Object(o.b)(a,[m.a]);e(p(c)),t(a)}else e(v(Object(u.a)(r))),n(r)}))}))}}}},[[212,1,2]]]);
//# sourceMappingURL=main.fa0dd670.chunk.js.map