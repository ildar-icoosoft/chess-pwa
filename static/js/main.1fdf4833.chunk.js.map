{"version":3,"sources":["services/ioClient.ts","features/games-list/GamePreviewsListItem.module.scss","features/seeks-list/SeeksListItem.module.scss","utils/getErrorMessageFromJWR.ts","features/single-game/GameControlPanelUserName.module.scss","features/single-game/DrawOfferDialog.module.scss","features/chat/ChatMessagesListItem.module.scss","features/game-clock/gameClockSlice.ts","features/messages/messagesSlice.tsx","normalizr/schemas/gameSchema.ts","features/users-list/UsersListItem.module.scss","features/single-game/GameClock.module.scss","features/single-game/GameControlPanelStatus.module.scss","features/single-game/singleGameSlice.ts","features/games-list/GamePreviewClock.module.scss","features/data-subscription/dataSubscriptionSlice.ts","features/single-game/GameMeta.module.scss","features/single-game/GameControlPanel.module.scss","normalizr/schemas/userSchema.ts","features/games-list/GamePreviewsList.module.scss","features/games-list/GamePreviewResult.module.scss","features/single-game/GameControlPanelTopToolbar.module.scss","features/single-game/GameControlPanelBottomToolbar.module.scss","features/single-game/SingleGameBoard.module.scss","features/chat/ChatMessagesList.module.scss","features/chat/PostChatMessageForm.module.scss","features/messages/Messages.module.scss","features/current-user/currentUserSlice.ts","features/challenge/challengeSlice.ts","features/games-list/GamePreviewUserName.tsx","features/games-list/GamePreviewResult.tsx","features/games-list/GamePreviewClock.tsx","features/games-list/GamePreviewsListItem.tsx","components/ContentLoadingStatus.tsx","features/games-list/GamePreviewsList.tsx","features/games-list/OngoingGamesContainer.tsx","features/home-page/ChallengeButtons.tsx","features/home-page/ChallengeButtonsContainer.tsx","features/challenge-ai-modal/ChallengeAiForm.tsx","features/challenge-ai-modal/ChallengeAiFormContainer.tsx","features/challenge-ai-modal/ChallengeAiModal.tsx","features/challenge-ai-modal/ChallengeAiModalContainer.tsx","features/games-list/CompletedGamesContainer.tsx","features/seek-modal/CreateSeekForm.tsx","features/seek-modal/CreateSeekFormContainer.tsx","features/seek-modal/SeekModal.tsx","features/seek-modal/SeekModalContainer.tsx","assets/icons/white.svg","assets/icons/black.svg","assets/icons/random.svg","features/seeks-list/SeeksListItem.tsx","features/seeks-list/SeeksList.tsx","features/seeks-list/SeeksListContainer.tsx","assets/icons/online.svg","assets/icons/offline.svg","features/users-list/UsersListItem.tsx","features/users-list/UsersList.tsx","features/users-list/UsersListContainer.tsx","features/home-page/HomePage.tsx","utils/getGameStatusText.ts","features/single-game/GameMeta.tsx","features/single-game/GameMetaContainer.tsx","features/single-game/GameClock.tsx","features/single-game/GameControlPanelStatus.tsx","features/single-game/GameMoves.tsx","features/single-game/GameControlPanelUserName.tsx","features/single-game/GameControlPanelTopToolbar.tsx","features/single-game/GameControlPanelBottomToolbar.tsx","features/single-game/DrawOfferDialog.tsx","features/single-game/GameControlPanel.tsx","features/single-game/GameControlPanelWrapper.tsx","features/single-game/GameControlPanelContainer.tsx","features/single-game/PromotionChoiceModal.tsx","features/single-game/SingleGameBoard.tsx","utils/sounds.ts","features/single-game/SingleGameBoardContainer.tsx","features/chat/ChatMessagesListItem.tsx","features/chat/ChatMessagesList.tsx","features/chat/ChatMessagesListContainer.tsx","features/chat/PostChatMessageForm.tsx","features/chat/PostChatMessageFormContainer.tsx","features/chat/Chat.tsx","features/single-game/GamePage.tsx","features/header/Header.tsx","features/header/HeaderContainer.tsx","features/auth-modal/LoginForm.tsx","features/auth-modal/RegistrationForm.tsx","features/auth-modal/LoginTabsContainer.tsx","features/auth-modal/AuthModal.tsx","features/auth-modal/AuthModalContainer.tsx","features/messages/Messages.tsx","features/messages/MessagesContainer.tsx","app/App.tsx","serviceWorker.ts","features/entities/entitiesSlice.ts","features/accept-seek-request/acceptSeekRequestSlice.tsx","app/rootReducer.ts","app/store.ts","index.tsx","features/chat/chatSlice.ts","utils/chess.ts","features/modal/modalSlice.ts","features/single-game/PromotionChoiceModal.module.scss","utils/makeChessInstance.ts","features/seek-modal/CreateSeekForm.module.scss","normalizr/schemas/seekSchema.ts","features/challenge-ai-modal/ChallengeAiForm.module.scss","normalizr/schemas/chatMessageSchema.ts","features/move/moveSlice.ts","features/single-game/GameMoves.module.scss","features/games-list/gamesListSlice.ts","features/seeks-list/seeksListSlice.ts","features/users-list/usersListSlice.ts"],"names":["ioClient","sailsIOClient","socketIOClient","sails","url","process","reconnection","module","exports","jwr","defaultErrorMessage","headers","_isString","body","gameClockSlice","createSlice","name","initialState","reducers","oneSecondPassed","extraReducers","actions","startGameClock","dispatch","intervalId","setInterval","clearInterval","messagesSlice","showMessage","state","action","push","payload","hideMessage","_remove","item","id","acceptSeekError","type","error","autoHide","makeMoveError","getCurrentUserError","logoutError","abortGameError","createChatMessageError","resignGameError","offerDrawError","acceptDrawOfferError","declineDrawOfferError","disconnectSocket","reconnectSocket","gameSchema","schema","Entity","white","userSchema","black","defaultSingleGameItemState","isLoading","isFlipped","rewindToMoveIndex","singleGameSlice","getSingleGameRequest","Object","assign","getSingleGameSuccess","result","getSingleGameError","itemId","abortGameRequest","_state","_action","abortGameSuccess","resignGameRequest","resignGameSuccess","offerDrawRequest","offerDrawSuccess","acceptDrawOfferRequest","acceptDrawOfferSuccess","declineDrawOfferRequest","declineDrawOfferSuccess","flipBoard","rewindToMove","gameId","moveIndex","fetchGame","Promise","resolve","reject","socket","get","statusCode","normalizedGame","normalize","getErrorMessageFromJWR","abortGame","post","resignGame","offerDraw","acceptDrawOffer","declineDrawOffer","dataSubscriptionSlice","updateGameBySubscription","createGameBySubscription","updateSeekBySubscription","createSeekBySubscription","removeSeekBySubscription","createUserBySubscription","updateUserBySubscription","createChatMessageBySubscription","watchGames","on","subscriptionData","verb","game","previous","data","watchSeeks","seek","normalizedSeek","seekSchema","watchUsers","watchChatMessages","normalizedChatMessage","chatMessageSchema","watchConnection","setTimeout","document","location","reload","currentUserSlice","userId","getCurrentUserRequest","getCurrentUserSuccess","loginRequest","loginSuccess","loginError","registerRequest","registerSuccess","registerError","logoutRequest","logoutSuccess","fetchCurrentUser","normalizedUser","login","put","emailAddress","email","password","register","fullName","confirmPassword","agreed","logout","challengeSlice","challengeAiRequest","challengeAiSuccess","challengeAiError","createSeekRequest","createSeekSuccess","createSeekError","acceptSeekRequest","_seekId","acceptSeekSuccess","challengeAi","createSeek","acceptSeek","seekId","GamePreviewUserName","memo","color","aiLevel","a","b","_isEqualWith","_value","_other","indexOrKey","GamePreviewResult","winner","className","css","GamePreviewClock","time","isRunning","formattedTime","moment","startOf","milliseconds","format","data-testid","cx","clock","clockRun","GamePreviewsListItem","fen","makeChessInstance","gamePreview","player","status","btime","turn","board","to","position","viewOnly","width","wtime","_isEqual","ContentLoadingStatus","emptyContentMessage","isEmpty","showEmptyContentMessage","role","Spinner","animation","GamePreviewsList","games","length","grid","map","key","OngoingGamesContainer","useSelector","denormalize","keys","entities","filter","sort","createdAt","slice","gamesList","ChallengeButtons","onChallengeAi","onCreateGame","handleChallengeAi","useCallback","handleCreateGame","Button","variant","onClick","ChallengeButtonsContainer","useDispatch","showModal","allowClose","ChallengeAiForm","onSubmit","initialValues","level","clockLimit","clockIncrement","values","formikHelpers","handleChange","handleBlur","handleSubmit","isSubmitting","setStatus","setFieldValue","Form","noValidate","e","onChange","Alert","Group","Label","Control","onBlur","value","min","max","step","Row","ButtonGroup","levelButtonGroup","colorSubmits","disabled","title","colorSubmitsButton","blackButton","randomButton","whiteButton","ChallengeAiFormContainer","history","useHistory","challengeAiAndOpenGamePage","then","catch","err","ChallengeAiModal","show","onHide","Modal","Header","closeButton","Title","Body","ChallengeAiModalContainer","isModalVisible","modal","handleHide","hideModal","CompletedGamesContainer","JSON","stringify","CreateSeekForm","onAbort","handleAbort","spinnerWrapper","spinner","spinnerButton","CreateSeekFormContainer","disconnect","reconnect","SeekModal","backdrop","SeekModalContainer","_extends","target","i","arguments","source","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","d","_ref3","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","_ref","svgRef","props","x","y","viewBox","style","enableBackground","xmlSpace","ref","ForwardRef","forwardRef","SeeksListItem","acceptInProcess","currentUserId","onPlay","handlePlay","gameIsStarted","colorIcon","createdBy","size","SeeksList","seeks","SeeksListContainer","currentUser","seeksList","items","inProcess","cy","r","stroke","strokeWidth","fill","height","UsersListItem","user","isOnline","connectedIcon","UsersList","users","UsersListContainer","useDeepEqualSelector","usersList","HomePage","Card","GameMeta","getGameStatusText","GameMetaContainer","GameClock","clockEmerg","GameControlPanelStatus","container","formatMove","move","from","GameMoves","onRewindToMove","scrollElementRef","useRef","lastMovesQnt","lastGameStatus","useEffect","movesQnt","getMovesQnt","current","scrollTop","scrollHeight","movesHistory","verbose","movesPairs","_chunk","makeRewindToMoveHandler","movesWrapper","pair","index","whiteMoveIndex","blackMoveIndex","Fragment","moveNumber","selected","GameControlPanelUserName","userNameWrapper","userName","GameControlPanelTopToolbar","isFirstMove","isLastMove","hasPrevMove","hasNextMove","onFlipBoard","onRewindToPrevMove","onRewindToNextMove","onRewindToFirstMove","onRewindToLastMove","handleFlipBoard","handleRewindToPrevMove","handleRewindToNextMove","handleRewindToFirstMove","handleRewindToLastMove","buttonsWrapper","icon","faRetweet","faAngleDoubleLeft","faAngleLeft","faAngleRight","faAngleDoubleRight","GameControlPanelBottomToolbar","canAbortGame","canOfferDraw","canResignGame","onAbortGame","onOfferDraw","onResignGame","handleAbortGame","handleOfferDraw","handleResignGame","faTimes","faHandshake","faFlag","DrawOfferDialog","onAccept","onDecline","handleAccept","handleDecline","dialogWrapper","acceptBtn","faCheck","declineBtn","dialogText","GameControlPanel","orientation","drawOfferSentByCurrentUser","drawOfferSentByOpponent","onAcceptDrawOffer","onDeclineDrawOffer","controlPanel","controlPanelInner","GameControlPanelWrapper","gameMoves","moves","handleRewindToMove","playerPiecesColor","drawOffer","GameControlPanelContainer","singleGameItemState","singleGame","useShallowEqualSelector","handleAcceptDrawOffer","handleDeclineDrawOffer","PromotionChoiceModal","turnColor","onPromotion","makePromotionHandler","promotionPiece","textAlign","cursor","classNames","piece","wQ","bQ","wR","bR","wB","bB","wN","bN","SingleGameBoard","onMove","premove","lastStatus","Audio","play","lastSelectedMoveIndex","selectedMoveIndex","chess","isValidMove","handleSetPremove","playPremove","cancelPremove","handleUnsetPremove","useState","showPromotionChoice","setShowPromotionChoice","promotionMove","handleMove","isPromotionMove","handlePromotion","promotion","boardContent","movableColor","chessWithAllMoves","check","in_check","validMoves","getValidMoves","lastMoveSquares","lastMove","singleGameBoard","allowMarkers","clickable","draggable","onSetPremove","onUnsetPremove","premovable","SingleGameBoardContainer","makeMove","ChatMessagesListItem","message","messageWrapper","currentUserMessage","messageText","text","ChatMessagesList","messages","chatMessages","ChatMessagesListContainer","chat","defaultGameChatMessagesState","PostChatMessageForm","textInput","autoComplete","placeholder","faPaperPlane","PostChatMessageFormContainer","resetForm","createChatMessage","Chat","Footer","GamePage","useParams","idAsNumber","Number","fetchChatMessages","onLogout","onShowAuthModal","handleLogout","handleShowAuthModal","href","rel","src","alt","HeaderContainer","loginSchema","Yup","shape","required","LoginForm","validationSchema","errors","touched","isValid","isInvalid","Feedback","registrationSchema","equals","RegistrationForm","LoginTabsContainer","doLogin","React","doSignUp","Tabs","transition","Tab","eventKey","AuthModal","AuthModalContainer","Messages","onHideMessage","makeHideMessageHandler","messageId","Toast","onClose","delay","autohide","undefined","MessagesContainer","handleHideMessage","App","stopGameClock","fetchGames","fetchUsers","fetchSeeks","basename","path","Boolean","window","hostname","match","getNormalizedDataReducer","entitiesSlice","getGamesListSuccess","getSeeksListSuccess","createChatMessageSuccess","getChatMessagesListSuccess","normalizedChatMessages","getUsersListSuccess","makeMoveRequest","trim","makeMoveSuccess","forEach","timePropName","acceptSeekRequestSlice","rootReducer","combineReducers","chatReducer","currentUserReducer","gamesListReducer","entitiesReducer","singleGameReducer","seeksListReducer","usersListReducer","acceptSeekRequestReducer","messagesReducer","modalReducer","store","configureStore","reducer","require","default","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","console","chatSlice","getChatMessagesListRequest","getChatMessagesListError","createChatMessageRequest","chatMessageId","flags","split","modalSlice","startPositionFen","initialFen","Chess","sloppy","Error","moveSlice","gamesListSlice","getGamesListRequest","getGamesListError","limit","normalizedGames","seeksListSlice","getSeeksListRequest","getSeeksListError","includes","unshift","_pull","usersListSlice","getUsersListRequest","getUsersListError","normalizedUsers"],"mappings":"6GAAA,+BAGMA,EAHN,MAGiBC,GAAcC,KAE/BF,EAASG,MAAMC,IAAMC,6BAErBL,EAASG,MAAMG,cAAe,EAEfN,O,oBCRfO,EAAOC,QAAU,CAAC,YAAc,0CAA0C,OAAS,qCAAqC,MAAQ,sC,oBCAhID,EAAOC,QAAU,CAAC,cAAgB,qCAAqC,UAAY,mC,gCCAnF,YAEe,aACbC,GAEY,IADZC,EACW,uDADW,wBAEtB,OAAID,EAAIE,QAAQ,sBACPF,EAAIE,QAAQ,sBAEjBC,mBAAUH,EAAII,MACTJ,EAAII,KAGNH,I,oBCbTH,EAAOC,QAAU,CAAC,gBAAkB,kDAAkD,cAAgB,kD,oBCAtGD,EAAOC,QAAU,CAAC,cAAgB,uCAAuC,UAAY,mCAAmC,WAAa,oCAAoC,WAAa,sC,oBCAtLD,EAAOC,QAAU,CAAC,mBAAqB,iDAAiD,SAAW,uCAAuC,eAAiB,+C,iCCD3J,gFAUMM,EAAiBC,YAAY,CACjCC,KAAM,YACNC,aAJmC,GAKnCC,SAAU,CACRC,gBADQ,cAGVC,cAAe,KAGFD,EAAoBL,EAAeO,QAAnCF,gBAIFG,GAFER,EAAf,QAE8B,kBAA4B,SAACS,GACzD,IAAMC,EAAaC,aAAY,WAC7BF,EAASJ,OACR,KAEH,OAAO,WACLO,cAAcF,Q,gJCFZG,EAAgBZ,YAAY,CAChCC,KAAM,WACNC,aAJ8B,GAK9BC,SAAU,CACRU,YAAa,SAACC,EAAOC,GACnBD,EAAME,KAAKD,EAAOE,UAEpBC,YAAa,SAACJ,EAAOC,GACnBI,iBAAQL,GAAO,SAACM,GAAD,OAAUA,EAAKC,KAAON,EAAOE,aAGhDZ,eAAa,mBACViB,IAAgBC,MAAO,SACtBT,EACAC,GAEAD,EAAME,KAAK,CACTK,GAAI,kBACJvB,KAAMiB,EAAOE,QAAQO,MACrBC,UAAU,OARH,cAWVC,IAAcH,MAAO,SAACT,EAAOC,GAC5BD,EAAME,KAAK,CACTK,GAAI,gBACJvB,KAAMiB,EAAOE,QACbQ,UAAU,OAfH,cAkBVE,IAAoBJ,MAAO,SAACT,EAAOC,GAClCD,EAAME,KAAK,CACTK,GAAI,sBACJvB,KAAMiB,EAAOE,QACbQ,UAAU,OAtBH,cAyBVG,IAAYL,MAAO,SAACT,EAAOC,GAC1BD,EAAME,KAAK,CACTK,GAAI,cACJvB,KAAMiB,EAAOE,QACbQ,UAAU,OA7BH,cAgCVI,IAAeN,MAAO,SAACT,EAAOC,GAC7BD,EAAME,KAAK,CACTK,GAAI,iBACJvB,KAAMiB,EAAOE,QAAQO,MACrBC,UAAU,OApCH,cAuCVK,IAAuBP,MAAO,SAC7BT,EACAC,GAEAD,EAAME,KAAK,CACTK,GAAI,yBACJvB,KAAMiB,EAAOE,QAAQO,MACrBC,UAAU,OA9CH,cAiDVM,IAAgBR,MAAO,SACtBT,EACAC,GAEAD,EAAME,KAAK,CACTK,GAAI,kBACJvB,KAAMiB,EAAOE,QAAQO,MACrBC,UAAU,OAxDH,cA2DVO,IAAeT,MAAO,SAACT,EAAOC,GAC7BD,EAAME,KAAK,CACTK,GAAI,iBACJvB,KAAMiB,EAAOE,QAAQO,MACrBC,UAAU,OA/DH,cAkEVQ,IAAqBV,MAAO,SAC3BT,EACAC,GAEAD,EAAME,KAAK,CACTK,GAAI,uBACJvB,KAAMiB,EAAOE,QAAQO,MACrBC,UAAU,OAzEH,cA4EVS,IAAsBX,MAAO,SAC5BT,EACAC,GAEAD,EAAME,KAAK,CACTK,GAAI,wBACJvB,KAAMiB,EAAOE,QAAQO,MACrBC,UAAU,OAnFH,cAsFVU,IAAiBZ,MAAO,SAACT,GACxBA,EAAME,KAAK,CACTK,GAAI,mBACJvB,KAAM,6CACN2B,UAAU,OA1FH,cA6FVW,IAAgBb,MAAO,SAACT,GACvBA,EAAME,KAAK,CACTK,GAAI,kBACJvB,KAAM,kEACN2B,UAAU,IAGZN,iBAAQL,GAAO,SAACM,GAAD,MAAsB,qBAAZA,EAAKC,SApGrB,K,EAyG6BT,EAAcN,QAA9BY,G,EAAbL,Y,EAAaK,aAEbN,MAAf,S,gCCjJA,mBAGMyB,EAAa,IAAIC,IAAOC,OAAO,QAAS,CAC5CC,MAAOC,IACPC,MAAOD,MAGMJ,O,oBCPf7C,EAAOC,QAAU,CAAC,YAAc,mCAAmC,cAAgB,uC,oBCAnFD,EAAOC,QAAU,CAAC,MAAQ,yBAAyB,SAAW,4BAA4B,WAAa,gC,oBCAvGD,EAAOC,QAAU,CAAC,UAAY,0CAA0C,OAAS,uCAAuC,OAAS,yC,gCCDjI,mtBAgCakD,EAAkD,CAC7DC,WAAW,EACXpB,MAAO,KACPqB,WAAW,EACXC,kBAAmB,MAKfC,EAAkB/C,YAAY,CAClCC,KAAM,aACNC,aAJoC,GAKpCC,SAAU,CACR6C,qBADQ,SACalC,EAAOC,GAC1BD,EAAMC,EAAOE,SAAWgC,OAAOC,OAC7B,GACAP,EACA7B,EAAMC,EAAOE,SACb,CACE2B,WAAW,EACXpB,MAAO,QAIb2B,qBAZQ,SAYarC,EAAOC,GAC1BD,EAAMC,EAAOE,QAAQmC,QAAUH,OAAOC,OACpC,GACAP,EACA7B,EAAMC,EAAOE,QAAQmC,QACrB,CACER,WAAW,EACXpB,MAAO,QAIb6B,mBAvBQ,SAuBWvC,EAAOC,GACxBD,EAAMC,EAAOE,QAAQqC,QAAUL,OAAOC,OACpC,GACAP,EACA7B,EAAMC,EAAOE,QAAQqC,QACrB,CACEV,WAAW,EACXpB,MAAOT,EAAOE,QAAQO,SAI5B+B,iBAlCQ,SAkCSC,EAAQC,KACzBC,iBAnCQ,SAmCSF,EAAQC,KACzB5B,eApCQ,SAoCO2B,EAAQC,KACvBE,kBArCQ,SAqCUH,EAAQC,KAC1BG,kBAtCQ,SAuCNJ,EACAC,KAEF1B,gBA1CQ,SA0CQyB,EAAQC,KAExBI,iBA5CQ,SA4CSL,EAAQC,KACzBK,iBA7CQ,SA6CSN,EAAQC,KACzBzB,eA9CQ,SA8COwB,EAAQC,KAEvBM,uBAhDQ,SAgDeP,EAAQC,KAC/BO,uBAjDQ,SAkDNR,EACAC,KAEFxB,qBArDQ,SAqDauB,EAAQC,KAE7BQ,wBAvDQ,SAuDgBT,EAAQC,KAChCS,wBAxDQ,SAyDNV,EACAC,KAEFvB,sBA5DQ,SA4DcsB,EAAQC,KAE9BU,UA9DQ,SA8DErD,EAAOC,GACfD,EAAMC,EAAOE,SAAS4B,WAAa/B,EAAMC,EAAOE,SAAS4B,WAE3DuB,aAjEQ,SAiEKtD,EAAOC,GAClBD,EAAMC,EAAOE,QAAQoD,QAAQvB,kBAAoB/B,EAAOE,QAAQqD,YAGpEjE,cAAe,K,EAwBb0C,EAAgBzC,QApBlB0C,E,EAAAA,qBACAG,E,EAAAA,qBACAE,E,EAAAA,mBACAc,E,EAAAA,UACAC,E,EAAAA,aACAb,E,EAAAA,iBACAG,E,EAAAA,iBACA7B,E,EAAAA,eACA8B,E,EAAAA,kBACAC,E,EAAAA,kBACA7B,E,EAAAA,gBACA8B,E,EAAAA,iBACAC,E,EAAAA,iBACA9B,E,EAAAA,eACA+B,E,EAAAA,uBACAC,E,EAAAA,uBACA/B,E,EAAAA,qBACAgC,E,EAAAA,wBACAC,E,EAAAA,wBACAhC,E,EAAAA,sBAGaa,MAAf,QAEO,IAAMwB,EAAY,SAAClD,GAAD,OAAyC,SAChEb,GAIA,OAFAA,EAASwC,EAAqB3B,IAEvB,IAAImD,SAAQ,SAACC,EAASC,GAC3BzF,IAAS0F,OAAOC,IAAhB,uBAAoCvD,IAAM,SAACvB,EAAeJ,GACxD,GAAuB,MAAnBA,EAAImF,WAAoB,CAC1B,IAAMC,EAAiBC,YAAUjF,EAAcuC,KAC/C7B,EAAS2C,EAAqB2B,IAC9BL,EAAQ3E,QAERU,EACE6C,EAAmB,CACjBC,OAAQjC,EACRG,MAAOwD,YAAuBtF,MAGlCgF,EAAOhF,WAMFuF,EAAY,SAAC5D,GAAD,OAAyC,SAChEb,GAIA,OAFAA,EAAS+C,EAAiBlC,IAEnB,IAAImD,SAAQ,SAACC,EAASC,GAC3BzF,IAAS0F,OAAOO,KAAhB,6BACwB7D,EADxB,WAEE,SAACvB,EAAeJ,GACd,GAAuB,MAAnBA,EAAImF,WAAoB,CAC1B,IAAMC,EAAiBC,YAAUjF,EAAcuC,KAC/C7B,EAASkD,EAAiBoB,IAC1BL,EAAQ3E,QAERU,EACEqB,EAAe,CACbyB,OAAQjC,EACRG,MAAOwD,YAAuBtF,MAGlCgF,EAAOhF,WAOJyF,EAAa,SAAC9D,GAAD,OAAyC,SACjEb,GAIA,OAFAA,EAASmD,EAAkBtC,IAEpB,IAAImD,SAAQ,SAACC,EAASC,GAC3BzF,IAAS0F,OAAOO,KAAhB,6BACwB7D,EADxB,YAEE,SAACvB,EAAeJ,GACd,GAAuB,MAAnBA,EAAImF,WAAoB,CAC1B,IAAMC,EAAiBC,YAAUjF,EAAcuC,KAC/C7B,EAASoD,EAAkBkB,IAC3BL,EAAQ3E,QAERU,EACEuB,EAAgB,CACduB,OAAQjC,EACRG,MAAOwD,YAAuBtF,MAGlCgF,EAAOhF,WAOJ0F,EAAY,SAAC/D,GAAD,OAAyC,SAChEb,GAIA,OAFAA,EAASqD,EAAiBxC,IAEnB,IAAImD,SAAQ,SAACC,EAASC,GAC3BzF,IAAS0F,OAAOO,KAAhB,6BACwB7D,EADxB,cAEE,SAACvB,EAAeJ,GACd,GAAuB,MAAnBA,EAAImF,WAAoB,CAC1B,IAAMC,EAAiBC,YAAUjF,EAAcuC,KAC/C7B,EAASsD,EAAiBgB,IAC1BL,EAAQ3E,QAERU,EACEwB,EAAe,CACbsB,OAAQjC,EACRG,MAAOwD,YAAuBtF,MAGlCgF,EAAOhF,WAOJ2F,EAAkB,SAAChE,GAAD,OAAyC,SACtEb,GAIA,OAFAA,EAASuD,EAAuB1C,IAEzB,IAAImD,SAAQ,SAACC,EAASC,GAC3BzF,IAAS0F,OAAOO,KAAhB,6BACwB7D,EADxB,cAEE,SAACvB,EAAeJ,GACd,GAAuB,MAAnBA,EAAImF,WAAoB,CAC1B,IAAMC,EAAiBC,YAAUjF,EAAcuC,KAC/C7B,EAASwD,EAAuBc,IAChCL,EAAQ3E,QAERU,EACEyB,EAAqB,CACnBqB,OAAQjC,EACRG,MAAOwD,YAAuBtF,MAGlCgF,EAAOhF,WAMJ4F,EAAmB,SAACjE,GAAD,OAAyC,SACvEb,GAIA,OAFAA,EAASyD,EAAwB5C,IAE1B,IAAImD,SAAQ,SAACC,EAASC,GAC3BzF,IAAS0F,OAAOO,KAAhB,6BACwB7D,EADxB,aAEE,SAACvB,EAAeJ,GACd,GAAuB,MAAnBA,EAAImF,WAAoB,CAC1B,IAAMC,EAAiBC,YAAUjF,EAAcuC,KAC/C7B,EAAS0D,EAAwBY,IACjCL,EAAQ3E,QAERU,EACE0B,EAAsB,CACpBoB,OAAQjC,EACRG,MAAOwD,YAAuBtF,MAGlCgF,EAAOhF,Y,oBCnSjBF,EAAOC,QAAU,CAAC,SAAW,qC,kmBCkBvB8F,EAAwBvF,YAAY,CACxCC,KAAM,mBACNC,aAJ0C,GAK1CC,SAAU,CACRqF,yBADQ,SAENhC,EACAC,KAEFgC,yBALQ,SAMNjC,EACAC,KAEFiC,yBATQ,SAUNlC,EACAC,KAEFkC,yBAbQ,SAcNnC,EACAC,KAEFmC,yBAjBQ,SAiBiBpC,EAAQC,KACjCoC,yBAlBQ,SAmBNrC,EACAC,KAEFqC,yBAtBQ,SAuBNtC,EACAC,KAEFsC,gCA1BQ,SA2BNvC,EACAC,KAEFtB,iBA9BQ,SA8BSqB,KACjBpB,gBA/BQ,SA+BQoB,MAElBnD,cAAe,K,EAcbkF,EAAsBjF,QAVxBkF,E,EAAAA,yBACAC,E,EAAAA,yBACAC,E,EAAAA,yBACAC,E,EAAAA,yBACAC,E,EAAAA,yBACAC,E,EAAAA,yBACAC,E,EAAAA,yBACAC,E,EAAAA,gCACA3D,E,EAAAA,gBACAD,E,EAAAA,iBAKW6D,GAFET,EAAf,QAE0B,kBAAsB,SAAC/E,GAC/CvB,IAAS0F,OAAOsB,GAAG,QAAQ,SAACC,GAC1B,GAA8B,YAA1BA,EAAiBC,KAAoB,CACvC,IAAMC,EAAI,eACLF,EAAiBG,SADZ,GAELH,EAAiBI,MAGhBxB,EAAiBC,YAAUqB,EAAM/D,KAEvC7B,EAASgF,EAAyBV,SAC7B,GAA8B,YAA1BoB,EAAiBC,KAAoB,CAC9C,IAAMrB,EAAiBC,YAAUmB,EAAiBI,KAAMjE,KAExD7B,EAASiF,EAAyBX,WAK3ByB,EAAa,kBAAsB,SAAC/F,GAC/CvB,IAAS0F,OAAOsB,GAAG,QAAQ,SAACC,GAC1B,GAA8B,YAA1BA,EAAiBC,KAAoB,CACvC,IAAMK,EAAI,eACLN,EAAiBG,SADZ,GAELH,EAAiBI,MAGhBG,EAAiB1B,YAAUyB,EAAME,KAEvClG,EAASkF,EAAyBe,SAC7B,GAA8B,YAA1BP,EAAiBC,KAAoB,CAC9C,IAAMM,EAAiB1B,YAAUmB,EAAiBI,KAAMI,KAExDlG,EAASmF,EAAyBc,QACC,cAA1BP,EAAiBC,MAC1B3F,EAASoF,EAAyBM,EAAiB7E,UAK5CsF,EAAa,kBAAsB,SAACnG,GAC/CvB,IAAS0F,OAAOsB,GAAG,QAAQ,SAACC,GAC1B,GAA8B,YAA1BA,EAAiBC,KAAoB,CACvC,IAAMK,EAAI,eACLN,EAAiBG,SADZ,GAELH,EAAiBI,MAGhBG,EAAiB1B,YAAUyB,EAAM/D,KAEvCjC,EAASsF,EAAyBW,SAC7B,GAA8B,YAA1BP,EAAiBC,KAAoB,CAC9C,IAAMM,EAAiB1B,YAAUmB,EAAiBI,KAAM7D,KAExDjC,EAASqF,EAAyBY,UAK3BG,EAAoB,kBAAsB,SAACpG,GACtDvB,IAAS0F,OAAOsB,GAAG,gBAAgB,SAACC,GAClC,GAA8B,YAA1BA,EAAiBC,KAAoB,CACvC,IAAMU,EAAwB9B,YAC5BmB,EAAiBI,KACjBQ,KAGFtG,EAASuF,EAAgCc,UAKlCE,EAAkB,kBAAsB,SAACvG,GACpDvB,IAAS0F,OAAOsB,GAAG,cAAc,WAC/BzF,EAAS2B,QAGXlD,IAAS0F,OAAOsB,GAAG,aAAa,WAC9BzF,EAAS4B,KAET4E,YAAW,WACTC,SAASC,SAASC,WACjB,W,oBC1JP3H,EAAOC,QAAU,CAAC,UAAY,8B,oBCA9BD,EAAOC,QAAU,CAAC,aAAe,uCAAuC,kBAAoB,8C,gCCD5F,IAEMgD,EAAa,IAFnB,KAEuBH,EAAOC,QAAO,SAEtBE,O,oBCHfjD,EAAOC,QAAU,CAAC,KAAO,iC,oBCAzBD,EAAOC,QAAU,CAAC,OAAS,oC,oBCA3BD,EAAOC,QAAU,CAAC,eAAiB,qD,oBCAnCD,EAAOC,QAAU,CAAC,eAAiB,wD,oBCAnCD,EAAOC,QAAU,CAAC,gBAAkB,2C,oBCApCD,EAAOC,QAAU,CAAC,aAAe,yC,oBCAjCD,EAAOC,QAAU,CAAC,UAAY,yC,oBCA9BD,EAAOC,QAAU,CAAC,SAAW,6B,gCCD7B,6VA4BM2H,EAAmBpH,YAAY,CACnCC,KAAM,cACNC,aARqC,CACrCmH,OAAQ,KACRzE,WAAW,EACXpB,MAAO,MAMPrB,SAAU,CACRmH,sBADQ,SACcxG,GACpBA,EAAM8B,WAAY,EAClB9B,EAAMU,MAAQ,MAEhB+F,sBALQ,SAMNzG,EACAC,GAEAD,EAAMuG,OAAStG,EAAOE,QAAUF,EAAOE,QAAQmC,OAAS,KACxDtC,EAAM8B,WAAY,EAClB9B,EAAMU,MAAQ,MAEhBG,oBAbQ,SAaYb,EAAOC,GACzBD,EAAM8B,WAAY,EAClB9B,EAAMU,MAAQT,EAAOE,SAEvBuG,aAjBQ,SAiBKhE,KACbiE,aAlBQ,SAkBK3G,EAAOC,GAClBD,EAAMuG,OAAStG,EAAOE,QAAQmC,QAEhCsE,WArBQ,SAqBGlE,EAAQC,KACnBkE,gBAtBQ,SAsBQnE,KAChBoE,gBAvBQ,SAuBQ9G,EAAOC,GACrBD,EAAMuG,OAAStG,EAAOE,QAAQmC,QAEhCyE,cA1BQ,SA0BMrE,EAAQC,KACtBqE,cA3BQ,SA2BMtE,KACduE,cA5BQ,SA4BMjH,GACZA,EAAMuG,OAAS,MAEjBzF,YA/BQ,SA+BI4B,EAAQC,Q,EAiBpB2D,EAAiB9G,QAZnBgH,E,EAAAA,sBACAC,E,EAAAA,sBACA5F,E,EAAAA,oBACA6F,E,EAAAA,aACAC,E,EAAAA,aACAC,E,EAAAA,WACAC,E,EAAAA,gBACAC,E,EAAAA,gBACAC,E,EAAAA,cACAC,E,EAAAA,cACAC,E,EAAAA,cACAnG,E,EAAAA,YAGawF,MAAf,QAEO,IAAMY,EAAmB,kBAAsC,SACpExH,GAIA,OAFAA,EAAS8G,KAEF,IAAI9C,SAAQ,SAACC,EAASC,GAC3BzF,IAAS0F,OAAOC,IAAI,sBAAsB,SAAC9E,EAAeJ,GACxD,GAAuB,MAAnBA,EAAImF,WAAoB,CAC1B,IAAMoD,EAAiBlD,YAAUjF,EAAc2C,KAE/CjC,EAAS+G,EAAsBU,IAC/BxD,EAAQ3E,QACoB,MAAnBJ,EAAImF,YACbrE,EAAS+G,EAAsB,OAC/B9C,EAAQ,QAERjE,EAASmB,EAAoBqD,YAAuBtF,KACpDgF,EAAOhF,YAMFwI,EAAQ,SAAC5B,GAAD,OAA8C,SACjE9F,GAIA,OAFAA,EAASgH,KAEF,IAAIhD,SAAQ,SAACC,EAASC,GAC3BzF,IAAS0F,OAAOwD,IACd,yBACA,CAEEC,aAAc9B,EAAK+B,MACnBC,SAAUhC,EAAKgC,WAEjB,SAACxI,EAAeJ,GACd,GAAuB,MAAnBA,EAAImF,WAAoB,CAC1B,IAAMoD,EAAiBlD,YAAUjF,EAAc2C,KAE/CjC,EAASiH,EAAaQ,IACtBxD,EAAQ3E,QAERU,EAASkH,EAAW1C,YAAuBtF,KAC3CgF,EAAOhF,WAOJ6I,EAAW,SAACjC,GAAD,OAA+C,SACrE9F,GAIA,OAFAA,EAASmH,KAEF,IAAInD,SAAQ,SAACC,EAASC,GAC3BzF,IAAS0F,OAAOO,KACd,0BACA,CACEsD,SAAUlC,EAAKkC,SACfJ,aAAc9B,EAAK+B,MACnBC,SAAUhC,EAAKgC,SACfG,gBAAiBnC,EAAKgC,SACtBI,QAAQ,IAEV,SAAC5I,EAAeJ,GACd,GAAuB,MAAnBA,EAAImF,WAAoB,CAC1B,IAAMoD,EAAiBlD,YAAUjF,EAAc2C,KAE/CjC,EAASoH,EAAgBK,IACzBxD,EAAQ3E,QAERU,EAASqH,EAAc7C,YAAuBtF,KAC9CgF,EAAOhF,WAOJiJ,EAAS,kBAA+B,SAACnI,GAGpD,OAFAA,EAASsH,KAEF,IAAItD,SAAQ,SAACC,EAASC,GAC3BzF,IAAS0F,OAAOO,KACd,yBACA,IACA,SAACpF,EAAeJ,GACS,MAAnBA,EAAImF,YACNrE,EAASuH,KACTtD,MAEAjE,EAASoB,EAAYoD,YAAuBtF,KAC5CgF,EAAOhF,a,sECjLjB,uYAwBMkJ,EAAiB5I,YAAY,CACjCC,KAAM,YACNC,aAJmC,GAKnCC,SAAU,CACR0I,mBADQ,aAERC,mBAFQ,SAGNtF,EACAC,KAEFsF,iBANQ,SAMSvF,EAAQC,KACzBuF,kBAPQ,aAQRC,kBARQ,SASNzF,EACAC,KAEFyF,gBAZQ,SAYQ1F,EAAQC,KAExB0F,kBAdQ,SAcU3F,EAAQ4F,KAC1BC,kBAfQ,SAgBN7F,EACAC,KAEFnC,gBAnBQ,SAmBQkC,EAAQC,MAE1BpD,cAAe,K,EAabuI,EAAetI,QATjBuI,E,EAAAA,mBACAC,E,EAAAA,mBACAC,E,EAAAA,iBACAC,E,EAAAA,kBACAC,E,EAAAA,kBACAC,E,EAAAA,gBACAC,E,EAAAA,kBACAE,E,EAAAA,kBACA/H,E,EAAAA,gBAKWgI,GAFEV,EAAf,QAE2B,SAACtC,GAAD,OAAoD,SAC7E9F,GAIA,OAFAA,EAASqI,KAEF,IAAIrE,SAAQ,SAACC,EAASC,GAC3BzF,IAAS0F,OAAOO,KAAhB,uBAEEoB,GACA,SAACxG,EAAeJ,GACd,GAAuB,MAAnBA,EAAImF,WAAoB,CAC1B,IAAMC,EAAiBC,YAAUjF,EAAcuC,KAE/C7B,EAASsI,EAAmBhE,IAC5BL,EAAQ3E,QAERU,EAASuI,EAAiB/D,YAAuBtF,KACjDgF,EAAOhF,YAOJ6J,EAAa,SAACjD,GAAD,OAAmD,SAC3E9F,GAIA,OAFAA,EAASwI,KAEF,IAAIxE,SAAQ,SAACC,EAASC,GAC3BzF,IAAS0F,OAAOO,KAAhB,qBAEEoB,GACA,SAACxG,EAAeJ,GACd,GAAuB,MAAnBA,EAAImF,WAAoB,CAC1B,IAAMC,EAAiBC,YAAUjF,EAAcuC,KAE/C7B,EAASyI,EAAkBnE,IAC3BL,EAAQ3E,QAERU,EAAS0I,EAAgBlE,YAAuBtF,KAChDgF,EAAOhF,WAOJ8J,EAAa,SAACC,GAAD,OAA6C,SACrEjJ,GAIA,OAFAA,EAAS2I,EAAkBM,IAEpB,IAAIjF,SAAQ,SAACC,EAASC,GAC3BzF,IAAS0F,OAAOO,KAAhB,6BACwBuE,EADxB,WAEE,IACA,SAAC3J,EAAeJ,GACd,GAAuB,MAAnBA,EAAImF,WAAoB,CAC1B,IAAM4B,EAAiB1B,YAAUjF,EAAc4G,KAE/ClG,EAAS6I,EAAkB5C,IAC3BhC,EAAQ3E,QAERU,EACEc,EAAgB,CACdgC,OAAQmG,EACRjI,MAAOwD,YAAuBtF,MAGlCgF,EAAOhF,Y,+OC3HJgK,EAAoDC,gBAC/D,YAAgC,IAA7BvD,EAA4B,EAA5BA,KAA4B,IAAtBwD,aAAsB,MAAd,QAAc,EAC7B,OAAKxD,EAKH,8BACGA,EAAKwD,GAASxD,EAAKwD,GAAQpB,SAA3B,mBAAkDpC,EAAKyD,UALnD,QASX,SAACC,EAA6BC,GAC5B,OAAOC,sBACLF,EACAC,GACA,SAACE,EAAiBC,EAAiBC,GAEjC,GAAmB,UAAfA,GAAyC,UAAfA,EAC5B,OAAO,Q,kBCnBJC,EAAgD,SAAC,GAGvD,IAFLhE,EAEI,EAFJA,KAEI,IADJwD,aACI,MADI,QACJ,EACJ,IAAKxD,EACH,OAAO,KAGT,IAAIhD,EAAS,OASb,OARIgD,EAAKiE,SAELjH,EADEgD,EAAKiE,SAAWT,EACT,IAEA,KAIN,0BAAMU,UAAWC,IAAInH,QAASA,I,2DCnB1BoH,EAA8C,SAAC,GAGrD,IAAD,IAFJC,YAEI,MAFG,EAEH,MADJC,iBACI,SACEC,EAAgBC,MACnBC,QAAQ,OACRC,aAAaL,GACbM,OAAO,SAEV,OACE,yBACEC,cAAY,OACZV,UAAWW,IAAGV,IAAIW,MAAL,eAAeX,IAAIY,SAAWT,KAE1CC,ICTMS,EAAsDzB,gBACjE,YAAe,IAAZvD,EAAW,EAAXA,KACD,IAAKA,EACH,OAAO,KAGT,IAAMiF,EAAcC,YAAkBlF,GAAMiF,MAE5C,OACE,yBAAKf,UAAWC,IAAIgB,aAClB,yBAAKjB,UAAWC,IAAIiB,QAClB,kBAAC9B,EAAD,CAAqBtD,KAAMA,EAAMwD,MAAM,UACtB,YAAhBxD,EAAKqF,QACJ,kBAAC,EAAD,CACEhB,KAAMrE,EAAKsF,MACXhB,UAAyB,UAAdtE,EAAKuF,OAGH,YAAhBvF,EAAKqF,QAAwC,YAAhBrF,EAAKqF,QACjC,kBAAC,EAAD,CAAmBrF,KAAMA,EAAMwD,MAAM,WAGzC,yBAAKU,UAAWC,IAAIqB,OAClB,kBAAC,IAAD,CAAMC,GAAE,gBAAWzF,EAAK/E,KACtB,kBAAC,QAAD,CAAOyK,SAAUT,EAAKU,UAAU,EAAOC,MAAO,QAGlD,yBAAK1B,UAAWC,IAAIiB,QAClB,kBAAC9B,EAAD,CAAqBtD,KAAMA,EAAMwD,MAAM,UACtB,YAAhBxD,EAAKqF,QACJ,kBAAC,EAAD,CACEhB,KAAMrE,EAAK6F,MACXvB,UAAyB,UAAdtE,EAAKuF,OAGH,YAAhBvF,EAAKqF,QAAwC,YAAhBrF,EAAKqF,QACjC,kBAAC,EAAD,CAAmBrF,KAAMA,EAAMwD,MAAM,eAM/C,SAACE,EAA8BC,GAA/B,OAAgEmC,kBAASpC,EAAGC,M,SC5CjEoC,EAAsDxC,gBACjE,YAMO,IAAD,IALJyC,2BAKI,MAT2B,mBAS3B,MAJJC,eAII,aAHJzJ,iBAGI,aAFJpB,aAEI,MAFI,KAEJ,MADJ8K,wBAEA,OAAID,IAAYzJ,IAAcpB,SAD1B,UAGA,yBACE8I,UAAU,kCACViC,KAAK,QACLvB,cAAY,yBAEXoB,GAKHxJ,GAAayJ,EAEb,yBAAK/B,UAAU,eACb,kBAACkC,EAAA,EAAD,CACEC,UAAU,SACVF,KAAK,SACLvB,cAAY,mBAEZ,0BAAMV,UAAU,WAAhB,gBAMJ9I,EAEA,yBACE8I,UAAU,iCACViC,KAAK,QACLvB,cAAY,iBAEXxJ,GAKA,QC9CEkL,EAA8C,SAAC,GAKrD,IAAD,IAJJC,aAII,MAJI,GAIJ,MAHJ/J,iBAGI,aAFJpB,aAEI,MAFI,KAEJ,EADJ4K,EACI,EADJA,oBAEA,OACE,6BACE,kBAACD,EAAD,CACEvJ,UAAWA,EACXpB,MAAOA,EACP6K,QAA0B,IAAjBM,EAAMC,OACfR,oBAAqBA,IAEvB,yBAAK9B,UAAWC,IAAIsC,MACjBF,EAAMG,KAAI,SAAC1L,GAAD,OACT,kBAACgK,EAAD,CAAsBhF,KAAMhF,EAAM2L,IAAK3L,EAAKC,W,QCIvC2L,EAvB4B,WACzC,IAAML,EAAQM,uBAAY,SAACnM,GAAD,OACxBoM,YAAYjK,OAAOkK,KAAKrM,EAAMsM,SAAST,OAAQ,CAACtK,KAAavB,EAAMsM,UAChEC,QAAO,SAACjH,GAAD,MAAgC,YAAhBA,EAAKqF,UAC5B6B,MAAK,SAACxD,EAASC,GAAV,OAAsBA,EAAEwD,UAAYzD,EAAEyD,aAC3CC,MAAM,EAPC,MAUN5K,EAAYqK,uBAChB,SAACnM,GAAD,OAAsBA,EAAM2M,UAAU7K,aAElCpB,EAAQyL,uBAAY,SAACnM,GAAD,OAAsBA,EAAM2M,UAAUjM,SAEhE,OACE,kBAAC,EAAD,CACEmL,MAAOA,EACP/J,UAAWA,EACXpB,MAAOA,EACP4K,oBAAoB,iC,SCpBbsB,EAA8C,SAAC,GAGrD,IAFLC,EAEI,EAFJA,cACAC,EACI,EADJA,aAEMC,EAAoBC,uBAAY,WAChCH,GACFA,MAED,CAACA,IAEEI,EAAmBD,uBAAY,WAC/BF,GACFA,MAED,CAACA,IAEJ,OACE,yBAAKtD,UAAU,QACb,kBAAC0D,EAAA,EAAD,CACEC,QAAQ,UACRC,QAASH,EACT/C,cAAY,kBACZV,UAAU,QAJZ,iBAQA,kBAAC0D,EAAA,EAAD,CACEC,QAAQ,UACRC,QAASL,EACT7C,cAAY,oBAHd,4B,QCASmD,EA7BgC,WAC7C,IAAM3N,EAAW4N,wBAEXP,EAAoBC,uBAAY,WACpCtN,EACE6N,YAAU,CACRpO,KAAM,cACNqO,YAAY,OAGf,CAAC9N,IAEEuN,EAAmBD,uBAAY,WACnCtN,EACE6N,YAAU,CACRpO,KAAM,OACNqO,YAAY,OAGf,CAAC9N,IAEJ,OACE,kBAAC,EAAD,CACEmN,cAAeE,EACfD,aAAcG,K,sECbPQ,EAA4C,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SAC1D,OACE,kBAAC,IAAD,CACEC,cAAe,CACbC,MAAO,EACP9E,MAAO,GACP+E,WAAY,IACZC,eAAgB,GAElBJ,SAAQ,iHAAE,SAACK,EAAQC,GACjB,GAAIN,EACF,OAAOA,EACLK,EACAC,QAML,gBACCD,EADD,EACCA,OACAE,EAFD,EAECA,aACAC,EAHD,EAGCA,WACAC,EAJD,EAICA,aACAC,EALD,EAKCA,aACAzD,EAND,EAMCA,OACA0D,EAPD,EAOCA,UACAC,EARD,EAQCA,cARD,OAWC,kBAACC,EAAA,EAAD,CACEC,YAAU,EACVd,SAAU,SAACe,GAAD,OAAON,EAAaM,IAC9BC,SAAU,kBAAML,EAAU,QAEvB1D,GAAU,kBAACgE,EAAA,EAAD,CAAOxB,QAAQ,UAAUxC,GACtC,kCACE,kBAAC4D,EAAA,EAAKK,MAAN,KACE,kBAACL,EAAA,EAAKM,MAAN,0BACqBd,EAAOF,WAAa,IAEzC,kBAACU,EAAA,EAAKO,QAAN,CACErO,KAAK,QACLtB,KAAK,aACL4P,OAAQb,EACRc,MAAOjB,EAAOF,WACda,SAAUT,EACVgB,IAAI,KACJC,IAAI,OACJC,KAAK,QAIT,kBAACZ,EAAA,EAAKK,MAAN,KACE,kBAACL,EAAA,EAAKM,MAAN,8BACyBd,EAAOD,gBAEhC,kBAACS,EAAA,EAAKO,QAAN,CACErO,KAAK,QACLtB,KAAK,iBACL4P,OAAQb,EACRc,MAAOjB,EAAOD,eACdY,SAAUT,EACVgB,IAAI,IACJC,IAAI,SAKV,yBAAK1F,UAAU,eAAf,SAEA,kBAAC4F,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAa7F,UAAWW,IAAG,UAAWV,IAAI6F,mBACvC,CAAC,EAAG,EAAG,EAAG,GAAGtD,KAAI,SAAC4B,GAAD,OAChB,kBAACV,EAAA,EAAD,CACEjB,IAAK2B,EACLnN,KAAK,SACL0M,QAASS,IAAUG,EAAOH,MAAQ,OAAS,QAC3CR,QAAS,kBAAMkB,EAAc,QAASV,KAErCA,QAMT,yBAAKpE,UAAU,eAAf,eAA0CuE,EAAOH,OAEjD,yBAAKpE,UAAWC,IAAI8F,cAClB,4BACEC,SAAUpB,EACV3N,KAAK,SACLgP,MAAM,QACNjG,UAAWW,IAAGV,IAAIiG,mBAAoBjG,IAAIkG,aAC1CvC,QAAS,kBAAMkB,EAAc,QAAS,WAEtC,6BAEF,4BACEkB,SAAUpB,EACV3N,KAAK,SACLgP,MAAM,cACNjG,UAAWW,IAAGV,IAAIiG,mBAAoBjG,IAAImG,cAC1CxC,QAAS,kBAAMkB,EAAc,QAAS,YAEtC,6BAEF,4BACEkB,SAAUpB,EACV3N,KAAK,SACLgP,MAAM,QACNjG,UAAWW,IAAGV,IAAIiG,mBAAoBjG,IAAIoG,aAC1CzC,QAAS,kBAAMkB,EAAc,QAAS,WAEtC,mC,gBC/FCwB,EAxB+B,WAC5C,IAAMpQ,EAAW4N,wBAEXyC,EAAUC,cAEVC,EAA6BjD,uBACjC,SACEe,EACAC,GAEA,OAAOtO,EAAS8I,YAAYuF,IACzBmC,MAAK,SAAC5K,GACLyK,EAAQ7P,KAAR,gBAAsBoF,EAAK/E,QAE5B4P,OAAM,SAACC,GACNpC,EAAcK,UAAUnK,YAAuBkM,SAGrD,CAAC1Q,EAAUqQ,IAGb,OAAO,kBAAC,EAAD,CAAiBrC,SAAUuC,KCvBvBI,EAA8C,SAAC,GAGrD,IAAD,IAFJC,YAEI,SADJC,EACI,EADJA,OAEA,OACE,kBAACC,EAAA,EAAD,CAAOF,KAAMA,EAAMC,OAAQA,EAAQ5E,WAAW,GAC5C,kBAAC6E,EAAA,EAAMC,OAAP,CAAcC,aAAW,GACvB,kBAACF,EAAA,EAAMG,MAAP,gCAGF,kBAACH,EAAA,EAAMI,KAAP,KACE,kBAAC,EAAD,SCAOC,EAdgC,WAC7C,IAAMC,EAAiB3E,uBACrB,SAACnM,GAAD,MAAgD,gBAA1BA,EAAM+Q,MAAMxD,aAG9B7N,EAAW4N,wBAEX0D,EAAahE,uBAAY,WAC7BtN,EAASuR,iBACR,CAACvR,IAEJ,OAAO,kBAAC,EAAD,CAAkB4Q,KAAMQ,EAAgBP,OAAQS,KC6B1CE,EApC8B,WAC3C,IAAMrF,EAAQM,uBACZ,SAACnM,GAAD,OACEoM,YACEjK,OAAOkK,KAAKrM,EAAMsM,SAAST,OAC3B,CAACtK,KACDvB,EAAMsM,UAELC,QACC,SAACjH,GAAD,MAAgC,YAAhBA,EAAKqF,QAAwC,YAAhBrF,EAAKqF,UAEnD6B,MAAK,SAACxD,EAASC,GAAV,OAAsBA,EAAEwD,UAAYzD,EAAEyD,aAC3CC,MAAM,EAdD,MAeV,SAAC1D,EAAWC,GACV,OACEkI,KAAKC,UAAUpI,EAAEgD,KAAI,SAAC1L,GAAD,OAAUA,EAAKC,SACpC4Q,KAAKC,UAAUnI,EAAE+C,KAAI,SAAC1L,GAAD,OAAUA,EAAKC,UAKpCuB,EAAYqK,uBAChB,SAACnM,GAAD,OAAsBA,EAAM2M,UAAU7K,aAElCpB,EAAQyL,uBAAY,SAACnM,GAAD,OAAsBA,EAAM2M,UAAUjM,SAEhE,OACE,kBAAC,EAAD,CACEmL,MAAOA,EACP/J,UAAWA,EACXpB,MAAOA,EACP4K,oBAAoB,oC,oBCvBb+F,GAA0C,SAAC,GAGjD,IAFL3D,EAEI,EAFJA,SACA4D,EACI,EADJA,QAEMC,EAAcvE,uBAAY,WAC1BsE,GACFA,MAED,CAACA,IAEJ,OACE,kBAAC,IAAD,CACE3D,cAAe,CACb7E,MAAO,GACP+E,WAAY,IACZC,eAAgB,GAElBJ,SAAQ,iHAAE,SAACK,EAAQC,GACjB,GAAIN,EACF,OAAOA,EACLK,EACAC,QAML,gBACCD,EADD,EACCA,OACAE,EAFD,EAECA,aACAC,EAHD,EAGCA,WACAC,EAJD,EAICA,aACAC,EALD,EAKCA,aACAzD,EAND,EAMCA,OACA0D,EAPD,EAOCA,UACAC,EARD,EAQCA,cARD,OAWC,kBAACC,EAAA,EAAD,CACEC,YAAU,EACVd,SAAU,SAACe,GAAD,OAAON,EAAaM,IAC9BC,SAAU,kBAAML,EAAU,QAEvB1D,GAAU,kBAACgE,EAAA,EAAD,CAAOxB,QAAQ,UAAUxC,GACtC,kCACE,kBAAC4D,EAAA,EAAKK,MAAN,KACE,kBAACL,EAAA,EAAKM,MAAN,0BACqBd,EAAOF,WAAa,IAEzC,kBAACU,EAAA,EAAKO,QAAN,CACEU,SAAUpB,EACV3N,KAAK,QACLtB,KAAK,aACL4P,OAAQb,EACRc,MAAOjB,EAAOF,WACda,SAAUT,EACVgB,IAAI,KACJC,IAAI,OACJC,KAAK,QAIT,kBAACZ,EAAA,EAAKK,MAAN,KACE,kBAACL,EAAA,EAAKM,MAAN,8BACyBd,EAAOD,gBAEhC,kBAACS,EAAA,EAAKO,QAAN,CACEU,SAAUpB,EACV3N,KAAK,QACLtB,KAAK,iBACL4P,OAAQb,EACRc,MAAOjB,EAAOD,eACdY,SAAUT,EACVgB,IAAI,IACJC,IAAI,SAKV,yBAAK1F,UAAWC,KAAI8F,cAClB,4BACEC,SAAUpB,EACV3N,KAAK,SACLgP,MAAM,QACNjG,UAAWW,IAAGV,KAAIiG,mBAAoBjG,KAAIkG,aAC1CvC,QAAS,kBAAMkB,EAAc,QAAS,WAEtC,6BAEF,4BACEkB,SAAUpB,EACV3N,KAAK,SACLgP,MAAM,cACNjG,UAAWW,IAAGV,KAAIiG,mBAAoBjG,KAAImG,cAC1CxC,QAAS,kBAAMkB,EAAc,QAAS,YAEtC,6BAEF,4BACEkB,SAAUpB,EACV3N,KAAK,SACLgP,MAAM,QACNjG,UAAWW,IAAGV,KAAIiG,mBAAoBjG,KAAIoG,aAC1CzC,QAAS,kBAAMkB,EAAc,QAAS,WAEtC,8BAIHF,GACC,yBAAK5E,UAAWC,KAAI+H,gBAClB,kBAAC9F,EAAA,EAAD,CAASC,UAAU,SAASnC,UAAWC,KAAIgI,SACzC,0BAAMjI,UAAU,WAAhB,4BAGF,kBAAC0D,EAAA,EAAD,CACEC,QAAQ,SACR3D,UAAWC,KAAIiI,cACftE,QAASmE,GAHX,e,SCrFCI,GAjC8B,WAC3C,IAAMjS,EAAW4N,wBAEXyC,EAAUC,cAEV7B,EAAenB,uBACnB,SAACe,EAAwBC,GACvB,OAAOtO,EAAS+I,YAAWsF,IACxBmC,MAAK,SAAC5K,GACLyK,EAAQ7P,KAAR,gBAAsBoF,EAAK/E,QAE5B4P,OAAM,SAACC,GACiB,IAAnBA,EAAIrM,YAGNiK,EAAcK,UAAUnK,YAAuBkM,SAIvD,CAAC1Q,EAAUqQ,IAKPwB,EAAcvE,uBAAY,WAE9B7O,KAAS0F,OAAO+N,aAChBzT,KAAS0F,OAAOgO,cACf,IAEH,OAAO,kBAAC,GAAD,CAAgBnE,SAAUS,EAAcmD,QAASC,KCnC7CO,GAAgC,SAAC,GAIvC,IAAD,IAHJtE,kBAGI,aAFJ8C,YAEI,SADJC,EACI,EADJA,OAEA,OACE,kBAACC,EAAA,EAAD,CACEF,KAAMA,EACNC,OAAQA,EACR5E,WAAW,EACXoG,WAAUvE,GAAoB,UAE9B,kBAACgD,EAAA,EAAMC,OAAP,CAAcC,YAAalD,GACzB,kBAACgD,EAAA,EAAMG,MAAP,uBAGF,kBAACH,EAAA,EAAMI,KAAP,KACE,kBAAC,GAAD,SCCOoB,GAtByB,WACtC,IAAMlB,EAAiB3E,uBACrB,SAACnM,GAAD,MAAgD,SAA1BA,EAAM+Q,MAAMxD,aAG9BC,EAAarB,uBAAY,SAACnM,GAAD,OAAsBA,EAAM+Q,MAAMvD,cAE3D9N,EAAW4N,wBAEX0D,EAAahE,uBAAY,WAC7BtN,EAASuR,iBACR,CAACvR,IAEJ,OACE,kBAAC,GAAD,CACE8N,WAAYA,EACZ8C,KAAMQ,EACNP,OAAQS,K,8BCvBd,SAASiB,KAA2Q,OAA9PA,GAAW9P,OAAOC,QAAU,SAAU8P,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUtG,OAAQqG,IAAK,CAAE,IAAIE,EAASD,UAAUD,GAAI,IAAK,IAAIlG,KAAOoG,EAAclQ,OAAOmQ,UAAUC,eAAeC,KAAKH,EAAQpG,KAAQiG,EAAOjG,GAAOoG,EAAOpG,IAAY,OAAOiG,IAA2BO,MAAMC,KAAMN,WAEhT,SAASO,GAAyBN,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAAkEpG,EAAKkG,EAAnED,EAEzF,SAAuCG,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAA2DpG,EAAKkG,EAA5DD,EAAS,GAAQW,EAAa1Q,OAAOkK,KAAKgG,GAAqB,IAAKF,EAAI,EAAGA,EAAIU,EAAW/G,OAAQqG,IAAOlG,EAAM4G,EAAWV,GAAQS,EAASE,QAAQ7G,IAAQ,IAAaiG,EAAOjG,GAAOoG,EAAOpG,IAAQ,OAAOiG,EAFxMa,CAA8BV,EAAQO,GAAuB,GAAIzQ,OAAO6Q,sBAAuB,CAAE,IAAIC,EAAmB9Q,OAAO6Q,sBAAsBX,GAAS,IAAKF,EAAI,EAAGA,EAAIc,EAAiBnH,OAAQqG,IAAOlG,EAAMgH,EAAiBd,GAAQS,EAASE,QAAQ7G,IAAQ,GAAkB9J,OAAOmQ,UAAUY,qBAAqBV,KAAKH,EAAQpG,KAAgBiG,EAAOjG,GAAOoG,EAAOpG,IAAU,OAAOiG,EAMne,IAAI,GAAqB,IAAMiB,cAAc,IAAK,KAAmB,IAAMA,cAAc,IAAK,KAAmB,IAAMA,cAAc,OAAQ,CAC3IC,EAAG,4OAGDC,GAAqB,IAAMF,cAAc,IAAK,MAE9CG,GAAqB,IAAMH,cAAc,IAAK,MAE9CI,GAAqB,IAAMJ,cAAc,IAAK,MAE9CK,GAAqB,IAAML,cAAc,IAAK,MAE9CM,GAAqB,IAAMN,cAAc,IAAK,MAE9CO,GAAqB,IAAMP,cAAc,IAAK,MAE9CQ,GAAqB,IAAMR,cAAc,IAAK,MAE9CS,GAAsB,IAAMT,cAAc,IAAK,MAE/CU,GAAsB,IAAMV,cAAc,IAAK,MAE/CW,GAAsB,IAAMX,cAAc,IAAK,MAE/CY,GAAsB,IAAMZ,cAAc,IAAK,MAE/Ca,GAAsB,IAAMb,cAAc,IAAK,MAE/Cc,GAAsB,IAAMd,cAAc,IAAK,MAE/Ce,GAAsB,IAAMf,cAAc,IAAK,MAE/CgB,GAAsB,IAAMhB,cAAc,IAAK,MAE/C,GAAW,SAAkBiB,GAC/B,IAAIC,EAASD,EAAKC,OACd5E,EAAQ2E,EAAK3E,MACb6E,EAAQ3B,GAAyByB,EAAM,CAAC,SAAU,UAEtD,OAAoB,IAAMjB,cAAc,MAAOlB,GAAS,CACtD1R,GAAI,UACJgU,EAAG,MACHC,EAAG,MACHC,QAAS,cACTC,MAAO,CACLC,iBAAkB,mBAEpBC,SAAU,WACVC,IAAKR,GACJC,GAAQ7E,EAAqB,IAAM0D,cAAc,QAAS,KAAM1D,GAAS,KAAM,GAAO4D,GAAOC,GAAOC,GAAOC,GAAOC,GAAOC,GAAOC,GAAOC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,KAGhMW,GAAa,IAAMC,YAAW,SAAUT,EAAOO,GACjD,OAAoB,IAAM1B,cAAc,GAAUlB,GAAS,CACzDoC,OAAQQ,GACPP,OAEU,ICjEf,SAAS,KAA2Q,OAA9P,GAAWnS,OAAOC,QAAU,SAAU8P,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUtG,OAAQqG,IAAK,CAAE,IAAIE,EAASD,UAAUD,GAAI,IAAK,IAAIlG,KAAOoG,EAAclQ,OAAOmQ,UAAUC,eAAeC,KAAKH,EAAQpG,KAAQiG,EAAOjG,GAAOoG,EAAOpG,IAAY,OAAOiG,IAA2BO,MAAMC,KAAMN,WAEhT,SAAS,GAAyBC,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAAkEpG,EAAKkG,EAAnED,EAEzF,SAAuCG,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAA2DpG,EAAKkG,EAA5DD,EAAS,GAAQW,EAAa1Q,OAAOkK,KAAKgG,GAAqB,IAAKF,EAAI,EAAGA,EAAIU,EAAW/G,OAAQqG,IAAOlG,EAAM4G,EAAWV,GAAQS,EAASE,QAAQ7G,IAAQ,IAAaiG,EAAOjG,GAAOoG,EAAOpG,IAAQ,OAAOiG,EAFxM,CAA8BG,EAAQO,GAAuB,GAAIzQ,OAAO6Q,sBAAuB,CAAE,IAAIC,EAAmB9Q,OAAO6Q,sBAAsBX,GAAS,IAAKF,EAAI,EAAGA,EAAIc,EAAiBnH,OAAQqG,IAAOlG,EAAMgH,EAAiBd,GAAQS,EAASE,QAAQ7G,IAAQ,GAAkB9J,OAAOmQ,UAAUY,qBAAqBV,KAAKH,EAAQpG,KAAgBiG,EAAOjG,GAAOoG,EAAOpG,IAAU,OAAOiG,EAMne,IAAI,GAAqB,IAAMiB,cAAc,IAAK,KAAmB,IAAMA,cAAc,IAAK,KAAmB,IAAMA,cAAc,OAAQ,CAC3IC,EAAG,gGAGD,GAAqB,IAAMD,cAAc,IAAK,MAE9C,GAAqB,IAAMA,cAAc,IAAK,MAE9C,GAAqB,IAAMA,cAAc,IAAK,MAE9C,GAAqB,IAAMA,cAAc,IAAK,MAE9C,GAAqB,IAAMA,cAAc,IAAK,MAE9C,GAAqB,IAAMA,cAAc,IAAK,MAE9C,GAAqB,IAAMA,cAAc,IAAK,MAE9C,GAAsB,IAAMA,cAAc,IAAK,MAE/C,GAAsB,IAAMA,cAAc,IAAK,MAE/C,GAAsB,IAAMA,cAAc,IAAK,MAE/C,GAAsB,IAAMA,cAAc,IAAK,MAE/C,GAAsB,IAAMA,cAAc,IAAK,MAE/C,GAAsB,IAAMA,cAAc,IAAK,MAE/C,GAAsB,IAAMA,cAAc,IAAK,MAE/C,GAAsB,IAAMA,cAAc,IAAK,MAE/C,GAAW,SAAkBiB,GAC/B,IAAIC,EAASD,EAAKC,OACd5E,EAAQ2E,EAAK3E,MACb6E,EAAQ,GAAyBF,EAAM,CAAC,SAAU,UAEtD,OAAoB,IAAMjB,cAAc,MAAO,GAAS,CACtD5S,GAAI,UACJgU,EAAG,MACHC,EAAG,MACHC,QAAS,cACTC,MAAO,CACLC,iBAAkB,mBAEpBC,SAAU,WACVC,IAAKR,GACJC,GAAQ7E,EAAqB,IAAM0D,cAAc,QAAS,KAAM1D,GAAS,KAAM,GAAO,GAAO,GAAO,GAAO,GAAO,GAAO,GAAO,GAAO,GAAQ,GAAQ,GAAQ,GAAQ,GAAQ,GAAQ,GAAQ,KAGhM,GAAa,IAAMsF,YAAW,SAAUT,EAAOO,GACjD,OAAoB,IAAM1B,cAAc,GAAU,GAAS,CACzDkB,OAAQQ,GACPP,OAEU,ICjEf,SAAS,KAA2Q,OAA9P,GAAWnS,OAAOC,QAAU,SAAU8P,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUtG,OAAQqG,IAAK,CAAE,IAAIE,EAASD,UAAUD,GAAI,IAAK,IAAIlG,KAAOoG,EAAclQ,OAAOmQ,UAAUC,eAAeC,KAAKH,EAAQpG,KAAQiG,EAAOjG,GAAOoG,EAAOpG,IAAY,OAAOiG,IAA2BO,MAAMC,KAAMN,WAEhT,SAAS,GAAyBC,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAAkEpG,EAAKkG,EAAnED,EAEzF,SAAuCG,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAA2DpG,EAAKkG,EAA5DD,EAAS,GAAQW,EAAa1Q,OAAOkK,KAAKgG,GAAqB,IAAKF,EAAI,EAAGA,EAAIU,EAAW/G,OAAQqG,IAAOlG,EAAM4G,EAAWV,GAAQS,EAASE,QAAQ7G,IAAQ,IAAaiG,EAAOjG,GAAOoG,EAAOpG,IAAQ,OAAOiG,EAFxM,CAA8BG,EAAQO,GAAuB,GAAIzQ,OAAO6Q,sBAAuB,CAAE,IAAIC,EAAmB9Q,OAAO6Q,sBAAsBX,GAAS,IAAKF,EAAI,EAAGA,EAAIc,EAAiBnH,OAAQqG,IAAOlG,EAAMgH,EAAiBd,GAAQS,EAASE,QAAQ7G,IAAQ,GAAkB9J,OAAOmQ,UAAUY,qBAAqBV,KAAKH,EAAQpG,KAAgBiG,EAAOjG,GAAOoG,EAAOpG,IAAU,OAAOiG,EAMne,IAAI,GAAqB,IAAMiB,cAAc,IAAK,KAAmB,IAAMA,cAAc,IAAK,CAC5F5S,GAAI,kBACU,IAAM4S,cAAc,OAAQ,CAC1CC,EAAG,6bACa,IAAMD,cAAc,IAAK,CACzC5S,GAAI,iBAGF,GAAqB,IAAM4S,cAAc,IAAK,MAE9C,GAAqB,IAAMA,cAAc,IAAK,MAE9C,GAAqB,IAAMA,cAAc,IAAK,MAE9C,GAAqB,IAAMA,cAAc,IAAK,MAE9C,GAAqB,IAAMA,cAAc,IAAK,MAE9C,GAAqB,IAAMA,cAAc,IAAK,MAE9C,GAAqB,IAAMA,cAAc,IAAK,MAE9C,GAAsB,IAAMA,cAAc,IAAK,MAE/C,GAAsB,IAAMA,cAAc,IAAK,MAE/C,GAAsB,IAAMA,cAAc,IAAK,MAE/C,GAAsB,IAAMA,cAAc,IAAK,MAE/C,GAAsB,IAAMA,cAAc,IAAK,MAE/C,GAAsB,IAAMA,cAAc,IAAK,MAE/C,GAAsB,IAAMA,cAAc,IAAK,MAE/C,GAAsB,IAAMA,cAAc,IAAK,MAE/C,GAAY,SAAmBiB,GACjC,IAAIC,EAASD,EAAKC,OACd5E,EAAQ2E,EAAK3E,MACb6E,EAAQ,GAAyBF,EAAM,CAAC,SAAU,UAEtD,OAAoB,IAAMjB,cAAc,MAAO,GAAS,CACtD5S,GAAI,SACJgU,EAAG,MACHC,EAAG,MACHC,QAAS,oBACTC,MAAO,CACLC,iBAAkB,yBAEpBC,SAAU,WACVC,IAAKR,GACJC,GAAQ7E,EAAqB,IAAM0D,cAAc,QAAS,KAAM1D,GAAS,KAAM,GAAO,GAAO,GAAO,GAAO,GAAO,GAAO,GAAO,GAAO,GAAQ,GAAQ,GAAQ,GAAQ,GAAQ,GAAQ,GAAQ,KAGhM,GAAa,IAAMsF,YAAW,SAAUT,EAAOO,GACjD,OAAoB,IAAM1B,cAAc,GAAW,GAAS,CAC1DkB,OAAQQ,GACPP,OCjDQU,IDmDE,ICnDsC,SAAC,GAK/C,IAAD,IAJJC,uBAII,MAJc,KAId,MAHJC,qBAGI,MAHY,KAGZ,EAFJxP,EAEI,EAFJA,KACAyP,EACI,EADJA,OAEMC,EAAapI,uBAAY,WACzBmI,GACFA,EAAOzP,EAAMnF,MAEd,CAAC4U,EAAQzP,IAEZ,OAAKA,EAKH,yBACEwE,cAAY,eACZV,UAAWW,IAAG,SAAU,qBAAsB,gBAAjC,eACVV,KAAI4L,cAAgB3P,EAAKJ,QAG5B,yBAAKkE,UAAU,eACG,UAAf9D,EAAKoD,OACJ,kBAAC,GAAD,CAAWoB,cAAY,aAAaV,UAAWC,KAAI6L,YAErC,UAAf5P,EAAKoD,OACJ,kBAAC,GAAD,CAAWoB,cAAY,aAAaV,UAAWC,KAAI6L,YAErC,WAAf5P,EAAKoD,OACJ,kBAAC,GAAD,CAAYoB,cAAY,cAAcV,UAAWC,KAAI6L,aAGzD,yBAAKpL,cAAY,YAAYV,UAAU,eACpC9D,EAAK6P,UAAU7N,UAElB,yBAAKwC,cAAY,eAAeV,UAAU,OACvC9D,EAAKmI,WAAa,GADrB,MAC4BnI,EAAKoI,gBAEjC,yBAAKtE,UAAU,OACZ0L,IAAkBxP,EAAK6P,UAAUhV,IAChC,kBAAC2M,EAAA,EAAD,CACEhD,cAAY,WACZkD,QAASgI,EACT5F,SAA8B,OAApByF,KAA8BvP,EAAKJ,MAE5C2P,IAAoBvP,EAAKnF,IACxB,kBAACmL,EAAA,EAAD,CACEC,UAAU,SACVzB,cAAY,mBACZsL,KAAK,KACLhM,UAAU,QAEV,0BAAMA,UAAU,WAAhB,eAZN,UA7BC,OCjBEiM,GAAgC,SAAC,GAOvC,IAAD,IANJR,uBAMI,MANc,KAMd,MALJC,qBAKI,MALY,KAKZ,MAJJQ,aAII,MAJI,GAIJ,EAHJP,EAGI,EAHJA,OAGI,IAFJrT,iBAEI,aADJpB,aACI,MADI,KACJ,EACJ,OACE,6BACE,kBAAC2K,EAAD,CACEvJ,UAAWA,EACXpB,MAAOA,EACP6K,QAA0B,IAAjBmK,EAAM5J,OACfR,oBAAoB,mCAEtB,6BACGoK,EAAM1J,KAAI,SAAC1L,GAAD,OACT,kBAAC,GAAD,CACE2U,gBAAiBA,EACjBC,cAAeA,EACfxP,KAAMpF,EACN6U,OAAQA,EACRlJ,IAAK3L,EAAKC,WCwBPoV,GAhDyB,WACtC,IAAMjW,EAAW4N,wBAEXyC,EAAUC,cAEVkF,EAAgB/I,uBACpB,SAACnM,GAAD,OAAsBA,EAAM4V,YAAYrP,UAGpCmP,EAAQvJ,uBAAY,SAACnM,GAAD,OACxBoM,YAAYpM,EAAM6V,UAAUC,MAAO,CAAClQ,MAAa5F,EAAMsM,aAEnDxK,EAAYqK,uBAChB,SAACnM,GAAD,OAAsBA,EAAM6V,UAAU/T,aAElCpB,EAAQyL,uBAAY,SAACnM,GAAD,OAAsBA,EAAM6V,UAAUnV,SAE1D2H,EAAoB8D,uBACxB,SAACnM,GAAD,OAAsBA,EAAMqI,qBAGxB4M,EAAkB5M,EAAkB0N,UACtC1N,EAAkB7F,OAClB,KAEE4S,EAAapI,uBACjB,SAACrE,GACC,OAAOjJ,EAASgJ,YAAWC,IACxBuH,MAAK,SAACxK,GACLqK,EAAQ7P,KAAR,gBAAsBwF,EAAKJ,KAAM/E,QAElC4P,OAAM,iBAEX,CAACzQ,EAAUqQ,IAGb,OACE,kBAAC,GAAD,CACEmF,cAAeA,EACfQ,MAAOA,EACPP,OAAQC,EACRH,gBAAiBA,EACjBnT,UAAWA,EACXpB,MAAOA,K,mDCxDb,SAAS,KAA2Q,OAA9P,GAAWyB,OAAOC,QAAU,SAAU8P,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUtG,OAAQqG,IAAK,CAAE,IAAIE,EAASD,UAAUD,GAAI,IAAK,IAAIlG,KAAOoG,EAAclQ,OAAOmQ,UAAUC,eAAeC,KAAKH,EAAQpG,KAAQiG,EAAOjG,GAAOoG,EAAOpG,IAAY,OAAOiG,IAA2BO,MAAMC,KAAMN,WAEhT,SAAS,GAAyBC,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAAkEpG,EAAKkG,EAAnED,EAEzF,SAAuCG,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAA2DpG,EAAKkG,EAA5DD,EAAS,GAAQW,EAAa1Q,OAAOkK,KAAKgG,GAAqB,IAAKF,EAAI,EAAGA,EAAIU,EAAW/G,OAAQqG,IAAOlG,EAAM4G,EAAWV,GAAQS,EAASE,QAAQ7G,IAAQ,IAAaiG,EAAOjG,GAAOoG,EAAOpG,IAAQ,OAAOiG,EAFxM,CAA8BG,EAAQO,GAAuB,GAAIzQ,OAAO6Q,sBAAuB,CAAE,IAAIC,EAAmB9Q,OAAO6Q,sBAAsBX,GAAS,IAAKF,EAAI,EAAGA,EAAIc,EAAiBnH,OAAQqG,IAAOlG,EAAMgH,EAAiBd,GAAQS,EAASE,QAAQ7G,IAAQ,GAAkB9J,OAAOmQ,UAAUY,qBAAqBV,KAAKH,EAAQpG,KAAgBiG,EAAOjG,GAAOoG,EAAOpG,IAAU,OAAOiG,EAMne,IAAI,GAAqB,IAAMiB,cAAc,SAAU,CACrDhJ,GAAI,EACJ6L,GAAI,EACJC,EAAG,EACHC,OAAQ,UACRC,YAAa,EACbC,KAAM,YAGJ,GAAY,SAAmBhC,GACjC,IAAIC,EAASD,EAAKC,OACd5E,EAAQ2E,EAAK3E,MACb6E,EAAQ,GAAyBF,EAAM,CAAC,SAAU,UAEtD,OAAoB,IAAMjB,cAAc,MAAO,GAAS,CACtDkD,OAAQ,GACRnL,MAAO,GACP2J,IAAKR,GACJC,GAAQ7E,EAAqB,IAAM0D,cAAc,QAAS,KAAM1D,GAAS,KAAM,KAGhF,GAAa,IAAMsF,YAAW,SAAUT,EAAOO,GACjD,OAAoB,IAAM1B,cAAc,GAAW,GAAS,CAC1DkB,OAAQQ,GACPP,OAEU,IClCf,SAAS,KAA2Q,OAA9P,GAAWnS,OAAOC,QAAU,SAAU8P,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUtG,OAAQqG,IAAK,CAAE,IAAIE,EAASD,UAAUD,GAAI,IAAK,IAAIlG,KAAOoG,EAAclQ,OAAOmQ,UAAUC,eAAeC,KAAKH,EAAQpG,KAAQiG,EAAOjG,GAAOoG,EAAOpG,IAAY,OAAOiG,IAA2BO,MAAMC,KAAMN,WAEhT,SAAS,GAAyBC,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAAkEpG,EAAKkG,EAAnED,EAEzF,SAAuCG,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAA2DpG,EAAKkG,EAA5DD,EAAS,GAAQW,EAAa1Q,OAAOkK,KAAKgG,GAAqB,IAAKF,EAAI,EAAGA,EAAIU,EAAW/G,OAAQqG,IAAOlG,EAAM4G,EAAWV,GAAQS,EAASE,QAAQ7G,IAAQ,IAAaiG,EAAOjG,GAAOoG,EAAOpG,IAAQ,OAAOiG,EAFxM,CAA8BG,EAAQO,GAAuB,GAAIzQ,OAAO6Q,sBAAuB,CAAE,IAAIC,EAAmB9Q,OAAO6Q,sBAAsBX,GAAS,IAAKF,EAAI,EAAGA,EAAIc,EAAiBnH,OAAQqG,IAAOlG,EAAMgH,EAAiBd,GAAQS,EAASE,QAAQ7G,IAAQ,GAAkB9J,OAAOmQ,UAAUY,qBAAqBV,KAAKH,EAAQpG,KAAgBiG,EAAOjG,GAAOoG,EAAOpG,IAAU,OAAOiG,EAMne,IAAI,GAAqB,IAAMiB,cAAc,SAAU,CACrDhJ,GAAI,EACJ6L,GAAI,EACJC,EAAG,EACHC,OAAQ,UACRC,YAAa,EACbC,KAAM,SAGJ,GAAa,SAAoBhC,GACnC,IAAIC,EAASD,EAAKC,OACd5E,EAAQ2E,EAAK3E,MACb6E,EAAQ,GAAyBF,EAAM,CAAC,SAAU,UAEtD,OAAoB,IAAMjB,cAAc,MAAO,GAAS,CACtDkD,OAAQ,GACRnL,MAAO,GACP2J,IAAKR,GACJC,GAAQ7E,EAAqB,IAAM0D,cAAc,QAAS,KAAM1D,GAAS,KAAM,KAGhF,GAAa,IAAMsF,YAAW,SAAUT,EAAOO,GACjD,OAAoB,IAAM1B,cAAc,GAAY,GAAS,CAC3DkB,OAAQQ,GACPP,OCnBQgC,IDqBE,ICrBsC,SAAC,GAG/C,IAAD,IAFJpB,qBAEI,MAFY,KAEZ,EADJqB,EACI,EADJA,KAEA,OAAKA,EAKH,yBACErM,cAAY,eACZV,UAAWW,IAAG,SAAU,qBAAsB,gBAAjC,eACVV,KAAImM,YAAcW,EAAKhW,KAAO2U,KAGjC,yBAAK1L,UAAU,eACZ+M,EAAKC,UACJ,kBAAC,GAAD,CACEtM,cAAY,cACZV,UAAWC,KAAIgN,cACfhH,MAAM,YAGR8G,EAAKC,UACL,kBAAC,GAAD,CACEtM,cAAY,eACZV,UAAWC,KAAIgN,cACfhH,MAAM,aAIZ,yBAAKvF,cAAY,YAAYV,UAAU,eACpC+M,EAAK7O,UAER,yBAAKwC,cAAY,oBAAoBuF,MAAM,qBACxC3F,KAAOyM,EAAK9J,WAAWxC,OAAO,SA9B5B,OCNEyM,GAAgC,SAAC,GAKvC,IAAD,IAJJxB,qBAII,MAJY,KAIZ,MAHJyB,aAGI,MAHI,GAGJ,MAFJ7U,iBAEI,aADJpB,aACI,MADI,KACJ,EACJ,OACE,6BACE,kBAAC2K,EAAD,CACEvJ,UAAWA,EACXpB,MAAOA,EACP6K,QAA0B,IAAjBoL,EAAM7K,OACfR,oBAAoB,4BAEtB,6BACGqL,EAAM3K,KAAI,SAAC1L,GAAD,OACT,kBAAC,GAAD,CACE4U,cAAeA,EACfqB,KAAMjW,EACN2L,IAAK3L,EAAKC,W,SCCPqW,GAxByB,WACtC,IAAM1B,EAAgB/I,uBACpB,SAACnM,GAAD,OAAsBA,EAAM4V,YAAYrP,UAGpCoQ,EAAQE,iCAAqB,SAAC7W,GAAD,OACjCoM,YAAYpM,EAAM8W,UAAUhB,MAAO,CAACnU,MAAa3B,EAAMsM,aAGnDxK,EAAYqK,uBAChB,SAACnM,GAAD,OAAsBA,EAAM8W,UAAUhV,aAElCpB,EAAQyL,uBAAY,SAACnM,GAAD,OAAsBA,EAAM8W,UAAUpW,SAEhE,OACE,kBAAC,GAAD,CACEiW,MAAOA,EACP7U,UAAWA,EACXpB,MAAOA,EACPwU,cAAeA,KCuBN6B,GAxCe,WAC5B,OACE,oCACE,kBAAC,EAAD,MACA,kBAAC,GAAD,MACA,yBAAKvN,UAAU,iCACb,kBAAC,EAAD,OAGF,kBAACwN,EAAA,EAAD,CAAMxN,UAAU,QACd,kBAACwN,EAAA,EAAKpG,KAAN,KACE,kBAACoG,EAAA,EAAKrG,MAAN,oBACA,kBAAC,GAAD,QAIJ,kBAACqG,EAAA,EAAD,CAAMxN,UAAU,QACd,kBAACwN,EAAA,EAAKpG,KAAN,KACE,kBAACoG,EAAA,EAAKrG,MAAN,6BACA,kBAAC,GAAD,QAIJ,kBAACqG,EAAA,EAAD,CAAMxN,UAAU,QACd,kBAACwN,EAAA,EAAKpG,KAAN,KACE,kBAACoG,EAAA,EAAKrG,MAAN,0BACA,kBAAC,EAAD,QAIJ,kBAACqG,EAAA,EAAD,KACE,kBAACA,EAAA,EAAKpG,KAAN,KACE,kBAACoG,EAAA,EAAKrG,MAAN,iBACA,kBAAC,EAAD,UCzCK,YAACrL,GACd,GAAoB,cAAhBA,EAAKqF,OAAwB,CAC/B,GAAoB,UAAhBrF,EAAKiE,OACP,MAAO,sCAET,GAAoB,UAAhBjE,EAAKiE,OACP,MAAO,sCAIX,GAAoB,WAAhBjE,EAAKqF,OAAqB,CAC5B,GAAoB,UAAhBrF,EAAKiE,OACP,MAAO,4CAET,GAAoB,UAAhBjE,EAAKiE,OACP,MAAO,4CAIX,GAAoB,YAAhBjE,EAAKqF,OACP,MAAO,eAGT,GAAoB,SAAhBrF,EAAKqF,OAAmB,CAC1B,GAAoB,UAAhBrF,EAAKiE,OACP,MAAO,uCAET,GAAoB,UAAhBjE,EAAKiE,OACP,MAAO,uCAIX,MAAoB,SAAhBjE,EAAKqF,OACA,OAGW,cAAhBrF,EAAKqF,OACA,YAGF,qB,qBC7BIsM,GAA8B,SAAC,GAAc,IAAZ3R,EAAW,EAAXA,KAC5C,OAAKA,EAKH,kBAAC0R,EAAA,EAAD,CAAMxN,UAAU,QACd,kBAACwN,EAAA,EAAKpG,KAAN,CAAWpH,UAAU,OACnB,6CACgB,IACd,0BAAMU,cAAY,gBACf5E,EAAKuI,WAAa,GADrB,MAC4BvI,EAAKwI,iBAGnC,yBACE5D,cAAY,cACZV,UAAWW,IAAG,CACZ,eAAgC,YAAhB7E,EAAKqF,OACrB,cAA+B,YAAhBrF,EAAKqF,UAGrBuM,GAAkB5R,IAErB,yBAAK4E,cAAY,aAAaV,UAAU,6BACtC,kBAAC,GAAD,CAAWA,UAAWW,IAAGV,KAAI6L,UAAW,UACvChQ,EAAK5D,MAAQ4D,EAAK5D,MAAMgG,SAAxB,mBAA+CpC,EAAKyD,UAEvD,yBAAKmB,cAAY,aAAaV,UAAU,6BACtC,kBAAC,GAAD,CAAWA,UAAWW,IAAGV,KAAI6L,UAAW,UACvChQ,EAAK1D,MAAQ0D,EAAK1D,MAAM8F,SAAxB,mBAA+CpC,EAAKyD,YA3BpD,MCJEoO,GAAsD,SAAC,GAAY,IAAV5W,EAAS,EAATA,GAC9D+E,EAAOuR,iCACX,SAAC7W,GAAD,OAAsBoM,YAAY7L,EAAIgB,IAAYvB,EAAMsM,aACxD,SAACnD,EAAiBC,EAAiBC,GAEjC,GAAmB,UAAfA,GAAyC,UAAfA,EAC5B,OAAO,KAMb,OAAK/D,EAIE,kBAAC,GAAD,CAAUA,KAAMA,IAHd,M,0CCdE8R,GAAgC,SAAC,GAGvC,IAAD,MAFJzN,YAEI,MAFG,EAEH,MADJC,iBACI,SACEC,EAAgBC,MACnBC,QAAQ,OACRC,aAAaL,GACbM,OAAO,SAEV,OACE,yBACEC,cAAY,OACZV,UAAWW,IAAGV,KAAIW,OAAL,mBACVX,KAAIY,SAAWT,GADL,cAEVH,KAAI4N,WAAa1N,EAAO,KAFd,KAKZE,I,yCClBMyN,GAA0D,SAAC,GAEjE,IADLhS,EACI,EADJA,KAEA,IAAKA,EACH,OAAO,KAGT,IAAIhD,EAAS,YASb,OARIgD,EAAKiE,SAELjH,EADkB,UAAhBgD,EAAKiE,OACE,MAEA,OAKX,yBAAKC,UAAWC,KAAI8N,WAClB,yBAAK/N,UAAWC,KAAInH,OAAQ4H,cAAY,eACrC5H,GAEH,yBAAKkH,UAAWC,KAAIkB,OAAQT,cAAY,eACrCgN,GAAkB5R,M,SCVrBkS,GAAa,SAACC,GAClB,MAAM,GAAN,OAAUA,EAAKC,MAAf,OAAsBD,EAAK1M,KAGhB4M,GAAgC9O,gBAC3C,YAAyD,IAAtDvD,EAAqD,EAArDA,KAAqD,IAA/CtD,yBAA+C,MAA3B,KAA2B,EAArB4V,EAAqB,EAArBA,eAC3BC,EAAmBC,iBAAuB,MAC1CC,EAAeD,kBAAgB,GAC/BE,EAAiBF,mBA8BvB,GA3BAG,qBAAU,WACR,GAAK3S,EAAL,CAIA,IAAM4S,EAAWC,aAAY7S,GAG1ByS,EAAaK,UAAYF,GACxBF,EAAeI,UAAY9S,EAAKqF,QACZ,OAAtB3I,GAEI6V,EAAiBO,UACnBP,EAAiBO,QAAQC,UACvBR,EAAiBO,QAAQE,cAG/BP,EAAaK,QAAUF,EACvBF,EAAeI,QAAU9S,EAAKqF,UAC7B,CACDrF,EACAyS,EACAC,EACAhW,EACA6V,KAGGvS,EACH,OAAO,KAGT,IAEMiT,EAFQ/N,YAAkBlF,GAELyK,QAAQ,CAAEyI,SAAS,IAExCN,EAAWK,EAAazM,OAExB2M,EAAaC,gBAAOH,EAAc,GAElCI,EAA0B,SAACnV,GAC/B,OAAO,WACDoU,GACFA,EAAepU,KAKrB,OACE,yBAAKgG,UAAWC,KAAImP,aAAc/D,IAAKgD,GACpCY,EAAWzM,KAAI,SAAC6M,EAAMC,GACrB,IAAMC,EAAyB,EAARD,EAAY,EAC7BE,EAAyB,EAARF,EAAY,EAEnC,OACE,kBAAC,IAAMG,SAAP,CAAgBhN,IAAG,eAAU6M,IAC3B,yBAAKtP,UAAWC,KAAIyP,YAAaJ,EAAQ,GACzC,yBACE5O,cAAA,eAAqB6O,GACrB3L,QAASuL,EAAwBI,GACjCtN,KAAK,SACLjC,UAAWW,IAAGV,KAAIgO,KAAL,eACVhO,KAAI0P,SACHnX,IAAsB+W,GACC,OAAtB/W,GAA8BkW,IAAaa,KAG/CvB,GAAWqB,EAAK,KAElBA,EAAK,IACJ,yBACE3O,cAAA,eAAqB8O,GACrB5L,QAASuL,EAAwBK,GACjCvN,KAAK,SACLjC,UAAWW,IAAGV,KAAIgO,KAAL,eACVhO,KAAI0P,SACHnX,IAAsBgX,GACC,OAAtBhX,GACCkW,IAAac,KAGlBxB,GAAWqB,EAAK,SAOV,YAAhBvT,EAAKqF,QAAwB,kBAAC,GAAD,CAAwBrF,KAAMA,QAIlE,SAAC0D,EAAmBC,GAClB,OAAOC,sBACLF,EACAC,GACA,SAACE,EAAiBC,EAAiBC,GAEjC,GAAmB,UAAfA,GAAyC,UAAfA,EAC5B,OAAO,Q,qBClHJ+P,GAA8DvQ,gBACzE,YAAgC,IAA7BvD,EAA4B,EAA5BA,KAA4B,IAAtBwD,aAAsB,MAAd,QAAc,EAC7B,OAAKxD,EAKH,yBACEkE,UAAWW,IACTV,KAAI4P,gBACJ,SACA,qBACA,SAGD/T,EAAKwD,IACJ,0BAAMoB,cAAY,iBAAiBV,UAAU,eAC1ClE,EAAKwD,GAAQ0N,UACZ,kBAAC,GAAD,CACEtM,cAAY,cACZV,UAAWC,KAAIgN,cACfhH,MAAM,YAGRnK,EAAKwD,GAAQ0N,UACb,kBAAC,GAAD,CACEtM,cAAY,eACZV,UAAWC,KAAIgN,cACfhH,MAAM,aAKd,0BAAMvF,cAAY,YAAYV,UAAWC,KAAI6P,UAC1ChU,EAAKwD,GAASxD,EAAKwD,GAAQpB,SAA3B,mBAAkDpC,EAAKyD,WA/BrD,QAoCX,SAACC,EAAkCC,GACjC,OAAOC,sBACLF,EACAC,GACA,SAACE,EAAiBC,EAAiBC,GAEjC,GAAmB,UAAfA,GAAyC,UAAfA,EAC5B,OAAO,Q,uCCtCJkQ,GAAkE1Q,gBAC7E,YAUO,IAAD,IATJ2Q,mBASI,aARJC,kBAQI,aAPJC,mBAOI,aANJC,mBAMI,SALJC,EAKI,EALJA,YACAC,EAII,EAJJA,mBACAC,EAGI,EAHJA,mBACAC,EAEI,EAFJA,oBACAC,EACI,EADJA,mBAEMC,EAAkBjN,uBAAY,WAC9B4M,GACFA,MAED,CAACA,IACEM,EAAyBlN,uBAAY,WACrC6M,GACFA,MAED,CAACA,IACEM,EAAyBnN,uBAAY,WACrC8M,GACFA,MAED,CAACA,IACEM,EAA0BpN,uBAAY,WACtC+M,GACFA,MAED,CAACA,IACEM,EAAyBrN,uBAAY,WACrCgN,GACFA,MAED,CAACA,IAEJ,OACE,yBAAKxQ,UAAWC,KAAI6Q,gBAClB,kBAACpN,EAAA,EAAD,CACEzM,KAAK,SACL0M,QAAQ,OACRjD,cAAY,iBACZkD,QAAS6M,GAET,kBAAC,KAAD,CAAiBM,KAAMC,OACvB,0BAAMhR,UAAU,WAAhB,eAGF,kBAAC0D,EAAA,EAAD,CACEzM,KAAK,SACL0M,QAAQ,OACRjD,cAAY,2BACZkD,QAASgN,EACT5K,SAAUgK,GAEV,kBAAC,KAAD,CAAiBe,KAAME,OACvB,0BAAMjR,UAAU,WAAhB,yBAGF,kBAAC0D,EAAA,EAAD,CACEzM,KAAK,SACL0M,QAAQ,OACRjD,cAAY,0BACZkD,QAAS8M,EACT1K,UAAWkK,GAEX,kBAAC,KAAD,CAAiBa,KAAMG,OACvB,0BAAMlR,UAAU,WAAhB,wBAGF,kBAAC0D,EAAA,EAAD,CACEzM,KAAK,SACL0M,QAAQ,OACRjD,cAAY,0BACZkD,QAAS+M,EACT3K,UAAWmK,GAEX,kBAAC,KAAD,CAAiBY,KAAMI,OACvB,0BAAMnR,UAAU,WAAhB,wBAGF,kBAAC0D,EAAA,EAAD,CACEzM,KAAK,SACL0M,QAAQ,OACRjD,cAAY,0BACZkD,QAASiN,EACT7K,SAAUiK,GAEV,kBAAC,KAAD,CAAiBc,KAAMK,OACvB,0BAAMpR,UAAU,WAAhB,4B,qBChGGqR,GAAwEhS,gBACnF,YAOO,IAAD,IANJiS,oBAMI,aALJC,oBAKI,aAJJC,qBAII,SAHJC,EAGI,EAHJA,YACAC,EAEI,EAFJA,YACAC,EACI,EADJA,aAEMC,EAAkBpO,uBAAY,WAC9BiO,GACFA,MAED,CAACA,IACEI,EAAkBrO,uBAAY,WAC9BkO,GACFA,MAED,CAACA,IACEI,EAAmBtO,uBAAY,WAC/BmO,GACFA,MAED,CAACA,IAEJ,OACE,yBAAK3R,UAAWC,KAAI6Q,gBAClB,kBAACpN,EAAA,EAAD,CACEzM,KAAK,SACL0M,QAAQ,OACRjD,cAAY,iBACZkD,QAASgO,EACT5L,UAAWsL,GAEX,kBAAC,KAAD,CAAiBP,KAAMgB,OACvB,0BAAM/R,UAAU,WAAhB,UAEF,kBAAC0D,EAAA,EAAD,CACEzM,KAAK,SACL0M,QAAQ,OACRjD,cAAY,iBACZkD,QAASiO,EACT7L,UAAWuL,GAEX,kBAAC,KAAD,CAAiBR,KAAMiB,OACvB,0BAAMhS,UAAU,WAAhB,iBAEF,kBAAC0D,EAAA,EAAD,CACEzM,KAAK,SACL0M,QAAQ,OACRjD,cAAY,kBACZkD,QAASkO,EACT9L,UAAWwL,GAEX,kBAAC,KAAD,CAAiBT,KAAMkB,OACvB,0BAAMjS,UAAU,WAAhB,e,qBC/DGkS,GAA4C,SAAC,GAGnD,IAFLC,EAEI,EAFJA,SACAC,EACI,EADJA,UAEMC,EAAe7O,uBAAY,WAC3B2O,GACFA,MAED,CAACA,IAEEG,EAAgB9O,uBAAY,WAC5B4O,GACFA,MAED,CAACA,IAEJ,OACE,yBAAKpS,UAAWC,KAAIsS,eAClB,kBAAC7O,EAAA,EAAD,CACEzM,KAAK,SACL0M,QAAQ,OACRjD,cAAY,aACZkD,QAASyO,EACTrS,UAAWC,KAAIuS,WAEf,kBAAC,KAAD,CAAiBzB,KAAM0B,OACvB,0BAAMzS,UAAU,WAAhB,WAGF,kBAAC0D,EAAA,EAAD,CACEzM,KAAK,SACL0M,QAAQ,OACRjD,cAAY,cACZkD,QAAS0O,EACTtS,UAAWC,KAAIyS,YAEf,kBAAC,KAAD,CAAiB3B,KAAMgB,OACvB,0BAAM/R,UAAU,WAAhB,YAEF,yBAAKA,UAAWC,KAAI0S,YAApB,iCCfOC,GAA8C,SAAC,GAoBrD,IAnBL9W,EAmBI,EAnBJA,KAmBI,IAlBJ+W,mBAkBI,MAlBU,QAkBV,MAjBJra,yBAiBI,MAjBgB,KAiBhB,MAhBJ8Y,oBAgBI,aAfJC,oBAeI,aAdJC,qBAcI,aAbJsB,kCAaI,aAZJC,+BAYI,SAXJC,EAWI,EAXJA,kBACAC,EAUI,EAVJA,mBACA7E,EASI,EATJA,eACAgC,EAQI,EARJA,YACAC,EAOI,EAPJA,mBACAC,EAMI,EANJA,mBACAC,EAKI,EALJA,oBACAC,EAII,EAJJA,mBACAiB,EAGI,EAHJA,YACAC,EAEI,EAFJA,YACAC,EACI,EADJA,aAEA,IAAK7V,EACH,OAAO,KAGT,IAAM4S,EAAWC,aAAY7S,GAEvBkU,EAA2B,IAAbtB,GAAwC,IAAtBlW,EAEhCyX,EAAmC,OAAtBzX,EAEb0X,EAA2B,IAAbxB,GAAwC,IAAtBlW,EAEhC2X,EAAoC,OAAtB3X,EAEpB,OACE,yBAAKwH,UAAWC,KAAIiT,cAClB,kBAAC,GAAD,CACE/S,KAAsB,UAAhB0S,EAA0B/W,EAAKsF,MAAQtF,EAAK6F,MAClDvB,UAAWtE,EAAKuF,OAASwR,IAE3B,yBAAK7S,UAAWC,KAAIkT,mBAClB,kBAACvD,GAAD,CACE9T,KAAMA,EACNwD,MAAuB,UAAhBuT,EAA0B,QAAU,UAE7C,kBAAC9C,GAAD,CACEC,YAAaA,EACbC,WAAYA,EACZC,YAAaA,EACbC,YAAaA,EACbC,YAAaA,EACbC,mBAAoBA,EACpBC,mBAAoBA,EACpBC,oBAAqBA,EACrBC,mBAAoBA,IAEtB,kBAACrC,GAAD,CACErS,KAAMA,EACNtD,kBAAmBA,EACnB4V,eAAgBA,IAEjB2E,GACC,kBAAC,GAAD,CACEZ,SAAUa,EACVZ,UAAWa,IAGdH,GACC,yBACE9S,UAAU,kCACViC,KAAK,QACLvB,cAAY,2BAHd,mBAQF,kBAAC2Q,GAAD,CACEC,aAAcA,EACdC,aAAcA,EACdC,cAAeA,EACfC,YAAaA,EACbC,YAAaA,EACbC,aAAcA,IAEhB,kBAAC/B,GAAD,CACE9T,KAAMA,EACNwD,MAAuB,UAAhBuT,EAA0B,QAAU,WAG/C,kBAAC,GAAD,CACE1S,KAAsB,UAAhB0S,EAA0B/W,EAAK6F,MAAQ7F,EAAKsF,MAClDhB,UAAWtE,EAAKuF,OAASwR,MCxGpBO,GAAkE,SAAC,GAYzE,IAAD,sBAXJtX,EAWI,EAXJA,KACAsQ,EAUI,EAVJA,YAUI,IATJ7T,iBASI,aARJC,yBAQI,MARgB,KAQhB,EAPJ4X,EAOI,EAPJA,YACA4C,EAMI,EANJA,kBACAC,EAKI,EALJA,mBACAxB,EAII,EAJJA,YACAC,EAGI,EAHJA,YACAC,EAEI,EAFJA,aACAvD,EACI,EADJA,eAEMiF,EAA2BvX,EAAOA,EAAKwX,MAAQ,KAE/CC,EAAqB/P,uBACzB,SAACxJ,GACC,IAAM0U,EAAWC,aAAY,CAC3B2E,MAAOD,IAGLjF,GAEAA,EADEpU,IAAc0U,EACD,KAEA1U,KAIrB,CAACqZ,EAAWjF,IAGRwC,EAA0BpN,uBAAY,WACtC4K,GACFA,EAAe,KAEhB,CAACA,IAEEyC,EAAyBrN,uBAAY,WACrC4K,GACFA,EAAe,QAEhB,CAACA,IAEEsC,EAAyBlN,uBAAY,WACzC,IAAMkL,EAAWC,aAAY,CAC3B2E,MAAOD,IAGLjF,GAEAA,EADwB,OAAtB5V,EACakW,EAAW,EAEXlW,EAAoB,KAGtC,CAAC6a,EAAWjF,EAAgB5V,IAEzBmY,EAAyBnN,uBAAY,WACzC,IAAMkL,EAAWC,aAAY,CAC3B2E,MAAOD,IAGLjF,GAEAA,EADE5V,IAAsBkW,EAAW,EACpB,KAEClW,EAA+B,KAGlD,CAAC6a,EAAWjF,EAAgB5V,IAE/B,IAAKsD,EACH,OAAO,KAGT,IAAM4S,EAAWC,aAAY7S,GAEzB+W,EAA0B,QAC1BzG,GAAeA,EAAYrV,MAAZ,UAAmB+E,EAAK1D,aAAxB,aAAmB,EAAYrB,MAChD8b,EAAc,SAEZta,IACFsa,EAA8B,UAAhBA,EAA0B,QAAU,SAGpD,IACiB,IADbW,EAAuC,KACvCpH,IACEA,EAAYrV,MAAZ,UAAmB+E,EAAK5D,aAAxB,aAAmB,EAAYnB,IACjCyc,EAAoB,QACXpH,EAAYrV,MAAZ,UAAmB+E,EAAK1D,aAAxB,aAAmB,EAAYrB,MACxCyc,EAAoB,UAIxB,IAAIV,GAA6B,GAE/B1G,GACCA,EAAYrV,MAAZ,UAAmB+E,EAAK5D,aAAxB,aAAmB,EAAYnB,KAAMqV,EAAYrV,MAAZ,UAAmB+E,EAAK1D,aAAxB,aAAmB,EAAYrB,KACrD,YAAhB+E,EAAKqF,QACLrF,EAAK2X,YAAcD,IAEnBV,GAA6B,GAG/B,IAAIC,GAA0B,GAE5B3G,GACCA,EAAYrV,MAAZ,UAAmB+E,EAAK5D,aAAxB,aAAmB,EAAYnB,KAAMqV,EAAYrV,MAAZ,UAAmB+E,EAAK1D,aAAxB,aAAmB,EAAYrB,KACrD,YAAhB+E,EAAKqF,QACc,OAAnBrF,EAAK2X,WACL3X,EAAK2X,YAAcD,IAEnBT,GAA0B,GAG5B,IAAIzB,GAAe,EAEjBlF,IACCA,EAAYrV,MAAZ,UAAmB+E,EAAK5D,aAAxB,aAAmB,EAAYnB,KAAMqV,EAAYrV,MAAZ,UAAmB+E,EAAK1D,aAAxB,aAAmB,EAAYrB,MACrD,YAAhB+E,EAAKqF,QACLuN,EAAW,IAEX4C,GAAe,GAGjB,IAAIE,GAAgB,EAElBpF,IACCA,EAAYrV,MAAZ,UAAmB+E,EAAK5D,aAAxB,aAAmB,EAAYnB,KAAMqV,EAAYrV,MAAZ,UAAmB+E,EAAK1D,aAAxB,aAAmB,EAAYrB,MACrD,YAAhB+E,EAAKqF,QACLuN,EAAW,IAEX8C,GAAgB,GAGlB,IAAID,GAAe,EAYnB,OAVEnF,IACCA,EAAYrV,MAAZ,UAAmB+E,EAAK5D,aAAxB,aAAmB,EAAYnB,KAAMqV,EAAYrV,MAAZ,UAAmB+E,EAAK1D,aAAxB,aAAmB,EAAYrB,MAClD,OAAnB+E,EAAK2X,WACY,IAAjB3X,EAAKyD,SACW,YAAhBzD,EAAKqF,QACLuN,EAAW,IAEX6C,GAAe,GAIf,kBAAC,GAAD,CACEzV,KAAMA,EACN+W,YAAaA,EACbra,kBAAmBA,EACnB8Y,aAAcA,EACdE,cAAeA,EACfD,aAAcA,EACduB,2BAA4BA,EAC5BC,wBAAyBA,EACzBC,kBAAmBA,EACnBC,mBAAoBA,EACpB7C,YAAaA,EACbqB,YAAaA,EACbC,YAAaA,EACbC,aAAcA,EACdvD,eAAgBmF,EAChBhD,oBAAqBK,EACrBJ,mBAAoBK,EACpBR,mBAAoBK,EACpBJ,mBAAoBK,K,SCnKb+C,GAAsE,SAAC,GAE7E,IADL3c,EACI,EADJA,GAEMb,EAAW4N,wBAEXhI,EAAOuR,iCAAqB,SAAC7W,GAAD,OAChCoM,YAAY7L,EAAIgB,IAAYvB,EAAMsM,aAG9B6Q,EACJhR,uBAAY,SAACnM,GAAD,OAAsBA,EAAMod,WAAW7c,OACnDsB,KAEI+T,EAAgCyH,oCACpC,SAACrd,GACC,GAAIA,EAAM4V,YAAYrP,OACpB,OAAO6F,YACLpM,EAAM4V,YAAYrP,OAClB5E,KACA3B,EAAMsM,aAOR2N,EAAkBjN,uBAAY,WAClCtN,EAAS2D,aAAU9C,MAClB,CAACb,EAAUa,IAER6a,EAAkBpO,uBAAY,WAClCtN,EAASyE,aAAU5D,MAClB,CAACb,EAAUa,IAER+c,EAAwBtQ,uBAAY,WACxCtN,EAAS6E,aAAgBhE,MACxB,CAACb,EAAUa,IAERgd,EAAyBvQ,uBAAY,WACzCtN,EAAS8E,aAAiBjE,MACzB,CAACb,EAAUa,IAER+a,EAAmBtO,uBAAY,WACnCtN,EAAS2E,aAAW9D,MACnB,CAACb,EAAUa,IAER8a,EAAkBrO,uBAAY,WAClCtN,EAAS4E,aAAU/D,MAClB,CAACb,EAAUa,IAERwc,EAAqB/P,uBACzB,SAACxJ,GACC9D,EACE4D,aAAa,CACXE,YACAD,OAAQhD,OAId,CAACb,EAAUa,IAGb,OAAI+E,EAEA,kBAAC,GAAD,CACEA,KAAMA,EACNsQ,YAAaA,EACb7T,UAAWob,EAAoBpb,UAC/BC,kBAAmBmb,EAAoBnb,kBACvC4X,YAAaK,EACbgB,YAAaG,EACboB,kBAAmBc,EACnBb,mBAAoBc,EACpBrC,YAAaG,EACbF,aAAcG,EACd1D,eAAgBmF,IAIf,M,mDC9FIS,GAAsD,SAAC,GAI7D,IAAD,YAHJlN,YAGI,aAFJmN,iBAEI,MAFQ,QAER,EADJC,EACI,EADJA,YAEMC,EAAuB,SAACC,GAC5B,OAAO,WACDF,GACFA,EAAYE,KAKlB,OACE,kBAACpN,EAAA,EAAD,CAAOF,KAAMA,EAAM3E,WAAW,EAAOoG,SAAS,UAC5C,kBAACvB,EAAA,EAAMI,KAAP,KACE,yBAAK8D,MAAO,CAAEmJ,UAAW,SAAUC,OAAQ,YACzC,0BACE5T,cAAY,cACZuB,KAAK,eACL2B,QAASuQ,EAAqB,MAE9B,yBACEnU,UAAWuU,IAAWtU,KAAIuU,OAAL,mBAClBvU,KAAIwU,GAAmB,UAAdR,GADS,cAElBhU,KAAIyU,GAAmB,UAAdT,GAFS,OAMzB,0BACEvT,cAAY,cACZuB,KAAK,eACL2B,QAASuQ,EAAqB,MAE9B,yBACEnU,UAAWuU,IAAWtU,KAAIuU,OAAL,mBAClBvU,KAAI0U,GAAmB,UAAdV,GADS,cAElBhU,KAAI2U,GAAmB,UAAdX,GAFS,OAMzB,0BACEvT,cAAY,cACZuB,KAAK,eACL2B,QAASuQ,EAAqB,MAE9B,yBACEnU,UAAWuU,IAAWtU,KAAIuU,OAAL,mBAClBvU,KAAI4U,GAAmB,UAAdZ,GADS,cAElBhU,KAAI6U,GAAmB,UAAdb,GAFS,OAMzB,0BACEvT,cAAY,cACZuB,KAAK,eACL2B,QAASuQ,EAAqB,MAE9B,yBACEnU,UAAWuU,IAAWtU,KAAIuU,OAAL,mBAClBvU,KAAI8U,GAAmB,UAAdd,GADS,cAElBhU,KAAI+U,GAAmB,UAAdf,GAFS,WCpCtBgB,GAA4C,SAAC,GAQnD,IAPL7I,EAOI,EAPJA,YACAtQ,EAMI,EANJA,KAMI,IALJvD,iBAKI,SAJJ2c,EAII,EAJJA,OAII,IAHJ1c,yBAGI,MAHgB,KAGhB,MAFJF,iBAEI,aADJpB,aACI,MADI,KACJ,EACEie,EAAU7G,iBAA8C,MAGxD8G,EAAa9G,iBAA0B,MAC7CG,qBAAU,WACH3S,IAIsB,YAAvBsZ,EAAWxG,SAAyC,YAAhB9S,EAAKqF,QC1CjC,IAAIkU,MAChB,wEAEIC,OD0CJF,EAAWxG,QAAU9S,EAAKqF,UACzB,CAACrF,EAAMsZ,IAIV3G,qBAAU,WACH3S,KAKHqZ,EAAQvG,SACS,YAAhB9S,EAAKqF,QAA8C,OAAtB3I,GAE9B2c,EAAQvG,QAAQ,QAEjB,CAAC9S,EAAMtD,IAGV,IAAM+c,EAAwBjH,iBAAsB,MACpDG,qBAAU,WACR,GAAK3S,EAAL,CAIA,IAAM4S,EAAWC,aAAY7S,GAES,OAAlCyZ,EAAsB3G,SAAiC,IAAbF,GCnFlC,IAAI2G,MAChB,wEAMIC,OAAO3O,OAAM,eDgFjB,IAAM6O,EACkB,OAAtBhd,EAA6BkW,EAAWlW,EAGN,OAAlC+c,EAAsB3G,SACtB4G,IAAsBD,EAAsB3G,QAAU,GC1E5C,IAAIyG,MAChB,uDAEIC,OD4EJC,EAAsB3G,QAAU4G,KAC/B,CAAC1Z,EAAMyZ,EAAuB/c,IAIjC,IAAM+V,EAAeD,iBAAsB,MAC3CG,qBAAU,WACR,GAAK3S,EAAL,CAIA,IAAM4S,EAAWC,aAAY7S,GAE7B,GACEqZ,EAAQvG,SACiB,OAAzBL,EAAaK,SACbF,IAAaH,EAAaK,QAAU,GACpB,YAAhB9S,EAAKqF,QACiB,OAAtB3I,EACA,CACA,IAAMid,EAAuBzU,YAAkBlF,GAE3C4Z,sBAAYD,EAAON,EAAQvG,QAAQ,KACrCuG,EAAQvG,QAAQ,KAChBuG,EAAQvG,QAAU,MAElBuG,EAAQvG,QAAQ,KAIpBL,EAAaK,QAAUF,KACtB,CAAC5S,EAAMyS,EAAc/V,IAExB,IAAMmd,EAAmBnS,uBACvB,SAACyK,EAAY2H,EAAyBC,GACpCV,EAAQvG,QAAU,CAACX,EAAM2H,EAAaC,KAExC,CAACV,IAGGW,EAAqBtS,uBAAY,WACrC2R,EAAQvG,QAAU,OACjB,CAACuG,IAhGA,EAkGkDY,oBACpD,GAnGE,oBAkGGC,EAlGH,KAkGwBC,EAlGxB,KAuGJxH,qBAAU,WACH3S,GAIDka,GAAuC,YAAhBla,EAAKqF,QAC9B8U,GAAuB,KAExB,CAACD,EAAqBla,IAEzB,IAAMoa,EAAgB5H,iBAAoB,MAEpC6H,EAAa3S,uBACjB,SAACyK,GACMiH,IAIDkB,aAAgBta,EAAOmS,IACzBgI,GAAuB,GACvBC,EAActH,QAAUX,GAExBiH,EAAOjH,MAGX,CAACiH,EAAQpZ,IAGLua,EAAkB7S,uBACtB,SAAC4Q,GACC6B,GAAuB,GAEvB,IAAMR,EAAuBzU,YAAkBlF,GAE/C,GACEoZ,GACAgB,EAActH,SACd8G,sBAAYD,EAAOS,EAActH,SACjC,CACA,IAAMX,EAAkB,CACtBC,KAAMgI,EAActH,QAAQV,KAC5B3M,GAAI2U,EAActH,QAAQrN,GAC1B+U,UAAWlC,GAEbc,EAAOjH,MAGX,CAACiH,EAAQpZ,IAGPya,EAAe,KAEnB,GAAIza,EAAM,CAAC,IAAD,UA2BJ0a,EA1BEC,EAAmCzV,YAAkBlF,GAErD2Z,EACkB,OAAtBjd,EACIie,EACAzV,YAAkBlF,EAAMtD,GAExBuI,EAAc0U,EAAM1U,MAEpB2V,EAAiBjB,EAAMkB,WAEvB1C,EAAwBnY,EAAKuF,KAE7BuV,EAAyBC,wBAAcpB,GAEzChU,GAAW,GAEb2K,GACCA,EAAYrV,MAAZ,UAAmB+E,EAAK5D,aAAxB,aAAmB,EAAYnB,KAC9BqV,EAAYrV,MAAZ,UAAmB+E,EAAK1D,aAAxB,aAAmB,EAAYrB,KACjB,YAAhB+E,EAAKqF,QACiB,OAAtB3I,IAEAiJ,GAAW,GAIT2K,GAAeA,EAAYrV,MAAZ,UAAmB+E,EAAK5D,aAAxB,aAAmB,EAAYnB,MAChDyf,EAAe,SAEbpK,GAAeA,EAAYrV,MAAZ,UAAmB+E,EAAK1D,aAAxB,aAAmB,EAAYrB,MAChDyf,EAAe,SAGjB,IAAI3D,EAA0B,QAC1BzG,GAAeA,EAAYrV,MAAZ,UAAmB+E,EAAK1D,aAAxB,aAAmB,EAAYrB,MAChD8b,EAAc,SAEZta,IACFsa,EAA8B,UAAhBA,EAA0B,QAAU,SAGpD,IAEIiE,EAFE/H,EAAe0H,EAAkBlQ,QAAQ,CAAEyI,SAAS,IAG1D,GAA0B,OAAtBxW,GACF,GAAIuW,EAAazM,OAAQ,CACvB,IAAMyU,EAAWhI,EAAaA,EAAazM,OAAS,GACpDwU,EAAkB,CAACC,EAAS7I,KAAM6I,EAASxV,UAExC,GAAI/I,EAAoB,EAAG,CAChC,IAAMue,EAAWhI,EAAavW,EAAoB,GAClDse,EAAkB,CAACC,EAAS7I,KAAM6I,EAASxV,IAG7CgV,EACE,oCACE,kBAAC,GAAD,CACEzP,KAAMkP,EACN/B,UAAWnY,EAAKuF,KAChB6S,YAAamC,IAEf,yBAAKrW,UAAWC,KAAI+W,iBAClB,kBAAC,QAAD,CACEC,cAAY,EACZP,MAAOA,EACPQ,WAAS,EACTC,WAAS,EACTL,gBAAiBA,EACjBN,aAAcA,EACdtB,OAAQiB,EACRiB,aAAczB,EACd0B,eAAgBvB,EAChBjD,YAAaA,EACbrR,SAAUT,EACVuW,YAAU,EACVrD,UAAWA,EACX2C,WAAYA,EACZnV,SAAUA,MAOpB,OACE,6BACE,kBAACI,EAAD,CACEvJ,UAAWA,EACXpB,MAAOA,EACP6K,SAAUjG,IAEXya,I,SE/QMgB,GAAqD,SAAC,GAAY,IAAVxgB,EAAS,EAATA,GAC7Db,EAAW4N,wBAEXhI,EAAOuR,iCACX,SAAC7W,GAAD,OAAsBoM,YAAY7L,EAAIgB,IAAYvB,EAAMsM,aACxD,SAACnD,EAAiBC,EAAiBC,GAEjC,GAAmB,UAAfA,GAAyC,UAAfA,EAC5B,OAAO,KAMPuM,EAAgCyH,oCACpC,SAACrd,GACC,GAAIA,EAAM4V,YAAYrP,OACpB,OAAO6F,YACLpM,EAAM4V,YAAYrP,OAClB5E,KACA3B,EAAMsM,aAOR6Q,EACJhR,uBAAY,SAACnM,GAAD,OAAsBA,EAAMod,WAAW7c,OACnDsB,KAEI8d,EAAa3S,uBACjB,SAACyK,GACC/X,EAASshB,aAASzgB,EAAD,UAAQkX,EAAKC,MAAb,OAAoBD,EAAK1M,IAAzB,OAA8B0M,EAAKqI,WAAa,QAEnE,CAACpgB,EAAUa,IAGb,OACE,kBAAC,GAAD,CACE+E,KAAMA,EACNsQ,YAAaA,EACb7T,UAAWob,EAAoBpb,UAC/BC,kBAAmBmb,EAAoBnb,kBACvC0c,OAAQiB,EACR7d,UAAWqb,EAAoBrb,UAC/BpB,MAAOyc,EAAoBzc,S,uCCzDpBugB,GAAsD,SAAC,GAG7D,IAFLC,EAEI,EAFJA,QAEI,IADJhM,qBACI,MADY,KACZ,EACJ,OAAKgM,EAKH,yBACEhX,cAAY,kBACZV,UAAWW,IAAGV,KAAI0X,eAAL,eACV1X,KAAI2X,mBAAqBF,EAAQ3L,UAAUhV,KAAO2U,KAGrD,0BAAMhL,cAAY,YAAYV,UAAWC,KAAI6P,UAC1C4H,EAAQ3L,UAAU7N,UAErB,0BAAMwC,cAAY,eAAeV,UAAWC,KAAI4X,aAC7CH,EAAQI,OAdN,M,qBCFEC,GAA8C,SAAC,GAKrD,IAAD,IAJJrM,qBAII,MAJY,KAIZ,MAHJsM,gBAGI,MAHO,GAGP,MAFJ1f,iBAEI,aADJpB,aACI,MADI,KACJ,EACEmX,EAAmBC,iBAAuB,MAC1CC,EAAeD,iBAAe,GAapC,OAVAG,qBAAU,WACJF,EAAaK,UAAYoJ,EAAS1V,QAChC+L,EAAiBO,UACnBP,EAAiBO,QAAQC,UACvBR,EAAiBO,QAAQE,cAG/BP,EAAaK,QAAUoJ,EAAS1V,SAC/B,CAAC+L,EAAkB2J,IAGpB,yBAAKhY,UAAWC,KAAIgY,aAAc5M,IAAKgD,GACrC,kBAACxM,EAAD,CACEvJ,UAAWA,EACXpB,MAAOA,EACP6K,QAA6B,IAApBiW,EAAS1V,OAClBN,yBAAyB,IAE3B,6BACGgW,EAASxV,KAAI,SAAC1L,GAAD,OACZ,kBAAC,GAAD,CACE4U,cAAeA,EACfgM,QAAS5gB,EACT2L,IAAK3L,EAAKC,WCjCTmhB,GAAgE,SAAC,GAEvE,IADLne,EACI,EADJA,OAEM2R,EAAgB/I,uBACpB,SAACnM,GAAD,OAAsBA,EAAM4V,YAAYrP,UAGpCib,EAAW3K,iCAAqB,SAAC7W,GAAD,OACpCA,EAAM2hB,KAAKpe,GACP6I,YACEpM,EAAM2hB,KAAKpe,GAAQuS,MACnB,CAAC9P,MACDhG,EAAMsM,UAERsV,KAA6B9L,SAE7BhU,EAAYqK,uBAAY,SAACnM,GAAD,OAC5BA,EAAM2hB,KAAKpe,GACPvD,EAAM2hB,KAAKpe,GAAQzB,UACnB8f,KAA6B9f,aAE7BpB,EAAQyL,uBAAY,SAACnM,GAAD,OACxBA,EAAM2hB,KAAKpe,GACPvD,EAAM2hB,KAAKpe,GAAQ7C,MACnBkhB,KAA6BlhB,SAGnC,OACE,kBAAC,GAAD,CACE8gB,SAAUA,EACV1f,UAAWA,EACXpB,MAAOA,EACPwU,cAAeA,K,qBCzBR2M,GAAoD,SAAC,GAE3D,IADLnU,EACI,EADJA,SAEA,OACE,kBAAC,IAAD,CACEC,cAAe,CACb2T,KAAM,IAER5T,SAAQ,iHAAE,SAACK,EAAQC,GACjB,GAAIN,EACF,OAAOA,EACLK,EACAC,QAML,gBACCD,EADD,EACCA,OACAE,EAFD,EAECA,aACAC,EAHD,EAGCA,WACAC,EAJD,EAICA,aACAC,EALD,EAKCA,aACAC,EAND,EAMCA,UAND,OAQC,kBAACE,EAAA,EAAD,CACEC,YAAU,EACVd,SAAU,SAACe,GAAD,OAAON,EAAaM,IAC9BC,SAAU,kBAAML,EAAU,MAE1B,yBAAK7E,UAAU,UACb,yBAAKA,UAAU,oBACb,kBAAC+E,EAAA,EAAKO,QAAN,CACEtF,UAAWC,KAAIqY,UACf3iB,KAAK,OACL4iB,aAAa,MACbC,YAAY,8BACZjT,OAAQb,EACRc,MAAOjB,EAAOuT,KACd5S,SAAUT,KAGd,6BACE,kBAACf,EAAA,EAAD,CACEsC,SAAUpB,GAAgC,KAAhBL,EAAOuT,KACjC7gB,KAAK,UAEJ2N,GACC,kBAAC1C,EAAA,EAAD,CACEC,UAAU,SACVzB,cAAY,qBACZsL,KAAK,KACLhM,UAAU,QAEV,0BAAMA,UAAU,WAAhB,eAGJ,kBAAC,KAAD,CAAiB+Q,KAAM0H,OACvB,0BAAMzY,UAAU,WAAhB,wBCjEH0Y,GAAsE,SAAC,GAE7E,IADL3e,EACI,EADJA,OAEM7D,EAAW4N,wBAEXa,EAAenB,uBACnB,SACEe,EACAC,GAIA,OAFAA,EAAcmU,YAEPziB,EAAS0iB,aAAkB7e,EAAQwK,EAAOuT,SAEnD,CAAC5hB,EAAU6D,IAGb,OAAO,kBAAC,GAAD,CAAqBmK,SAAUS,KCtB3BkU,GAAsB,SAAC,GAAgB,IAAd9e,EAAa,EAAbA,OACpC,OACE,kBAACyT,EAAA,EAAD,KACE,kBAACA,EAAA,EAAKvG,OAAN,CAAajH,UAAU,OAAvB,aACA,kBAACwN,EAAA,EAAKpG,KAAN,CAAWpH,UAAU,OACnB,kBAAC,GAAD,CAA2BjG,OAAQA,KAErC,kBAACyT,EAAA,EAAKsL,OAAN,CAAa9Y,UAAU,OACrB,kBAAC,GAAD,CAA8BjG,OAAQA,OC2B/Bgf,GA7Be,WAC5B,IAAM7iB,EAAW4N,wBAET/M,EAAOiiB,cAAPjiB,GAEFkiB,EAAaC,OAAOniB,GAO1B,OALA0X,qBAAU,WACRvY,EAAS+D,aAAUgf,IACnB/iB,EAASijB,aAAkBF,MAC1B,CAAC/iB,EAAU+iB,IAGZ,yBAAKjZ,UAAU,OACb,yBAAKA,UAAU,SACb,kBAAC,GAAD,CAAmBjJ,GAAIkiB,IAEvB,kBAAC,GAAD,CAAMlf,OAAQkf,KAEhB,yBAAKjZ,UAAU,SACb,kBAAC,GAAD,CAA0BjJ,GAAIkiB,KAEhC,yBAAKjZ,UAAU,SACb,kBAAC,GAAD,CAA2BjJ,GAAIkiB,O,4BC3B1BhS,GAA0B,SAAC,GAIjC,IAAD,IAHJmF,mBAGI,MAHU,KAGV,EAFJgN,EAEI,EAFJA,SACAC,EACI,EADJA,gBAEMC,EAAe9V,uBAAY,WAC3B4V,GACFA,MAED,CAACA,IAEEG,EAAsB/V,uBAAY,WAClC6V,GACFA,MAED,CAACA,IAEJ,OACE,4BAAQrZ,UAAU,wGAChB,yBAAKA,UAAU,8BACb,kBAAC,IAAD,CAAMA,UAAU,6BAA6BuB,GAAG,KAAhD,cAIF,yBAAKvB,UAAU,uDACZoM,EACC,oCACE,yBAAKpM,UAAU,QAAf,OAA2BoM,EAAYlO,UACvC,kBAACwF,EAAA,EAAD,CACE1D,UAAU,6BACVU,cAAY,aACZkD,QAAS0V,GAHX,WASF,kBAAC5V,EAAA,EAAD,CACE1D,UAAU,8BACVU,cAAY,YACZkD,QAAS2V,GAHX,oBASF,uBACEC,KAAK,8CACL9Q,OAAO,SACP+Q,IAAI,uBAEJ,yBACEC,IAAG,UAAK1kB,aAAL,8BACH2kB,IAAI,SCfDC,GAtCsB,WACnC,IAAMxN,EAA2ByH,oCAC/B,SAACrd,GACC,OAAIA,EAAM4V,YAAYrP,OACb6F,YACLpM,EAAM4V,YAAYrP,OAClB5E,KACA3B,EAAMsM,UAGH,QAIL5M,EAAW4N,wBAEXwV,EAAe9V,uBAAY,WAC/BtN,EAASmI,kBACR,CAACnI,IAEEqjB,EAAsB/V,uBAAY,WACtCtN,EACE6N,YAAU,CACRpO,KAAM,OACNqO,YAAY,OAGf,CAAC9N,IAEJ,OACE,kBAAC,GAAD,CACEkW,YAAaA,EACbgN,SAAUE,EACVD,gBAAiBE,K,6BCpCjBM,GAAcC,OAAaC,MAAM,CACrChc,MAAO+b,OAAa/b,MAAM,iBAAiBic,SAAS,YACpDhc,SAAU8b,OACPrU,IAAI,EAAG,gCACPuU,SAAS,cAUDC,GAAgC,SAAC,GAAkB,IAAhB/V,EAAe,EAAfA,SAC9C,OACE,kBAAC,IAAD,CACEC,cAAe,CAAEpG,MAAO,GAAIC,SAAU,IACtCkc,iBAAkBL,GAClB3V,SAAQ,iHAAE,SAACK,EAAQC,GACjB,GAAIN,EACF,OAAOA,EAASK,EAAqBC,QAKxC,gBACC2V,EADD,EACCA,OACA5V,EAFD,EAECA,OACA6V,EAHD,EAGCA,QACA3V,EAJD,EAICA,aACAC,EALD,EAKCA,WACAC,EAND,EAMCA,aACAC,EAPD,EAOCA,aACAzD,EARD,EAQCA,OACA0D,EATD,EASCA,UATD,OAYC,kBAACE,EAAA,EAAD,CACEC,YAAU,EACVd,SAAU,SAACe,GAAD,OAAON,EAAaM,IAC9BC,SAAU,kBAAML,EAAU,QAEvB1D,GAAU,kBAACgE,EAAA,EAAD,CAAOxB,QAAQ,UAAUxC,GACtC,kBAAC4D,EAAA,EAAKK,MAAN,KACE,kBAACL,EAAA,EAAKM,MAAN,sBACA,kBAACN,EAAA,EAAKO,QAAN,CACErO,KAAK,QACLtB,KAAK,QACL6iB,YAAY,cACZjT,OAAQb,EACRc,MAAOjB,EAAOxG,MACdmH,SAAUT,EACV4V,QAASD,EAAQrc,QAAUoc,EAAOpc,MAClCuc,UAAWF,EAAQrc,SAAWoc,EAAOpc,QAEvC,kBAACgH,EAAA,EAAKO,QAAQiV,SAAd,CAAuBtjB,KAAK,WACzBkjB,EAAOpc,QAIZ,kBAACgH,EAAA,EAAKK,MAAN,KACE,kBAACL,EAAA,EAAKM,MAAN,iBACA,kBAACN,EAAA,EAAKO,QAAN,CACErO,KAAK,WACLtB,KAAK,WACL6iB,YAAY,WACZtT,SAAUT,EACVc,OAAQb,EACRc,MAAOjB,EAAOvG,SACdqc,QAASD,EAAQpc,WAAamc,EAAOnc,SACrCsc,UAAWF,EAAQpc,YAAcmc,EAAOnc,WAE1C,kBAAC+G,EAAA,EAAKO,QAAQiV,SAAd,CAAuBtjB,KAAK,WACzBkjB,EAAOnc,WAGZ,kBAAC0F,EAAA,EAAD,CAAQC,QAAQ,UAAU1M,KAAK,SAAS+O,SAAUpB,GAAlD,cC7EJ4V,GAAqBV,OAAaC,MAAM,CAC5C7b,SAAU4b,OAAaE,SAAS,YAChCjc,MAAO+b,OAAa/b,MAAM,iBAAiBic,SAAS,YACpDhc,SAAU8b,OACPrU,IAAI,EAAG,gCACPuU,SAAS,YACZ7b,gBAAiB2b,OACdW,OAAO,CAACX,KAAQ,aAAc,8BAC9BE,SAAS,cAiBDU,GAA8C,SAAC,GAAkB,IAAhBxW,EAAe,EAAfA,SAC5D,OACE,kBAAC,IAAD,CACEC,cAAe,CACbjG,SAAU,GACVH,MAAO,GACPC,SAAU,GACVG,gBAAiB,IAEnB+b,iBAAkBM,GAClBtW,SAAQ,iHAAE,SAACK,EAAQC,GACjB,GAAIN,EACF,OAAOA,EAASK,EAAgCC,QAKnD,gBACC2V,EADD,EACCA,OACA5V,EAFD,EAECA,OACA6V,EAHD,EAGCA,QACA3V,EAJD,EAICA,aACAC,EALD,EAKCA,WACAC,EAND,EAMCA,aACAC,EAPD,EAOCA,aACAzD,EARD,EAQCA,OACA0D,EATD,EASCA,UATD,OAYC,kBAACE,EAAA,EAAD,CACEC,YAAU,EACVd,SAAU,SAACe,GAAD,OAAON,EAAaM,IAC9BC,SAAU,kBAAML,EAAU,QAEvB1D,GAAU,kBAACgE,EAAA,EAAD,CAAOxB,QAAQ,UAAUxC,GAEtC,kBAAC4D,EAAA,EAAKK,MAAN,KACE,kBAACL,EAAA,EAAKM,MAAN,kBACA,kBAACN,EAAA,EAAKO,QAAN,CACErO,KAAK,OACLtB,KAAK,WACL6iB,YAAY,kBACZjT,OAAQb,EACRc,MAAOjB,EAAOrG,SACdgH,SAAUT,EACV4V,QAASD,EAAQlc,WAAaic,EAAOjc,SACrCoc,UAAWF,EAAQlc,YAAcic,EAAOjc,WAE1C,kBAAC6G,EAAA,EAAKO,QAAQiV,SAAd,CAAuBtjB,KAAK,WACzBkjB,EAAOjc,WAIZ,kBAAC6G,EAAA,EAAKK,MAAN,KACE,kBAACL,EAAA,EAAKM,MAAN,sBACA,kBAACN,EAAA,EAAKO,QAAN,CACErO,KAAK,QACLtB,KAAK,QACL6iB,YAAY,cACZjT,OAAQb,EACRc,MAAOjB,EAAOxG,MACdmH,SAAUT,EACV4V,QAASD,EAAQrc,QAAUoc,EAAOpc,MAClCuc,UAAWF,EAAQrc,SAAWoc,EAAOpc,QAEvC,kBAACgH,EAAA,EAAKO,QAAQiV,SAAd,CAAuBtjB,KAAK,WACzBkjB,EAAOpc,QAIZ,kBAACgH,EAAA,EAAKK,MAAN,KACE,kBAACL,EAAA,EAAKM,MAAN,iBACA,kBAACN,EAAA,EAAKO,QAAN,CACErO,KAAK,WACLtB,KAAK,WACL6iB,YAAY,WACZtT,SAAUT,EACVc,OAAQb,EACRc,MAAOjB,EAAOvG,SACdqc,QAASD,EAAQpc,WAAamc,EAAOnc,SACrCsc,UAAWF,EAAQpc,YAAcmc,EAAOnc,WAE1C,kBAAC+G,EAAA,EAAKO,QAAQiV,SAAd,CAAuBtjB,KAAK,WACzBkjB,EAAOnc,WAIZ,kBAAC+G,EAAA,EAAKK,MAAN,KACE,kBAACL,EAAA,EAAKM,MAAN,yBACA,kBAACN,EAAA,EAAKO,QAAN,CACErO,KAAK,WACLtB,KAAK,kBACL6iB,YAAY,WACZtT,SAAUT,EACVc,OAAQb,EACRc,MAAOjB,EAAOpG,gBACdkc,QAASD,EAAQjc,kBAAoBgc,EAAOhc,gBAC5Cmc,UAAWF,EAAQjc,mBAAqBgc,EAAOhc,kBAEjD,kBAAC4G,EAAA,EAAKO,QAAQiV,SAAd,CAAuBtjB,KAAK,WACzBkjB,EAAOhc,kBAIZ,kBAACuF,EAAA,EAAD,CAAQC,QAAQ,UAAU1M,KAAK,SAAS+O,SAAUpB,GAAlD,iBCpFK+V,GA1CyB,WACtC,IAAMzkB,EAAW4N,wBAEX8W,EAAUC,IAAMrX,aACpB,SAACe,EAAmBC,GAClB,OAAOtO,EAAS0H,aAAM2G,IAASoC,OAAM,SAACC,GACpCpC,EAAcK,UAAUnK,YAAuBkM,SAGnD,CAAC1Q,IAGG4kB,EAAWD,IAAMrX,aACrB,SACEe,EACAC,GAEA,OAAOtO,EACL+H,aAAS,CACPC,SAAUqG,EAAOrG,SACjBH,MAAOwG,EAAOxG,MACdC,SAAUuG,EAAOvG,YAEnB2I,OAAM,SAACC,GACPpC,EAAcK,UAAUnK,YAAuBkM,SAGnD,CAAC1Q,IAGH,OACE,kBAAC6kB,GAAA,EAAD,CAAMC,YAAY,GAChB,kBAACC,GAAA,EAAD,CAAKC,SAAS,OAAOjV,MAAM,SACzB,kBAAC,GAAD,CAAW/B,SAAU0W,KAEvB,kBAACK,GAAA,EAAD,CAAKC,SAAS,UAAUjV,MAAM,YAC5B,kBAAC,GAAD,CAAkB/B,SAAU4W,OCtCvBK,GAAgC,SAAC,GAA8B,IAAD,IAA3BrU,YAA2B,SAAbC,EAAa,EAAbA,OAC5D,OACE,6BACE,kBAACC,EAAA,EAAD,CAAOF,KAAMA,EAAMC,OAAQA,EAAQ5E,WAAW,GAC5C,kBAAC6E,EAAA,EAAMC,OAAP,CAAcC,aAAW,GACvB,kBAACF,EAAA,EAAMG,MAAP,eAGF,kBAACH,EAAA,EAAMI,KAAP,KACE,kBAAC,GAAD,UCEKgU,GAdyB,WACtC,IAAM9T,EAAiB3E,uBACrB,SAACnM,GAAD,MAAgD,SAA1BA,EAAM+Q,MAAMxD,aAG9B7N,EAAW4N,wBAEX0D,EAAahE,uBAAY,WAC7BtN,EAASuR,iBACR,CAACvR,IAEJ,OAAO,kBAAC,GAAD,CAAW4Q,KAAMQ,EAAgBP,OAAQS,K,iDCLrC6T,GAA8B,SAAC,GAAmC,IAAD,IAAhC/O,aAAgC,MAAxB,GAAwB,EAApBgP,EAAoB,EAApBA,cAClDC,EAAyB/X,uBAC7B,SAACgY,GAAD,OAAuB,WACjBF,GACFA,EAAcE,MAGlB,CAACF,IAGH,OACE,yBAAKtb,UAAWC,KAAI+X,UACjB1L,EAAM9J,KAAI,SAAC1L,EAAMwY,GAAP,OACT,kBAACmM,GAAA,EAAD,CACEhZ,IAAK6M,EACLoM,QAASH,EAAuBzkB,EAAKC,IACrC+P,MAAI,EACJ6U,MAAO,IACPC,cAA4BC,IAAlB/kB,EAAKK,UAAgCL,EAAKK,SACpDgL,WAAW,GAEX,kBAACsZ,GAAA,EAAMrU,KAAP,KAAatQ,EAAKtB,Y,UCZbsmB,GAfwB,WACrC,IAAM5lB,EAAW4N,wBAEXkU,EAAWrV,uBAAY,SAACnM,GAAD,OAAsBA,EAAMwhB,YAEnD+D,EAAoBvY,uBACxB,SAACgY,GACCtlB,EAASU,aAAY4kB,MAEvB,CAACtlB,IAGH,OAAO,kBAAC,GAAD,CAAUoW,MAAO0L,EAAUsD,cAAeS,K,SC8CpCC,UAxCC,WACd,IAAM9lB,EAAW4N,wBAmBjB,OAjBA2K,qBAAU,WACRvY,EAASwH,gBACT,IAAMue,EAAgB/lB,EAASD,gBAU/B,OATAC,EAASoG,gBACTpG,EAASwF,gBACTxF,EAAS+F,gBACT/F,EAASmG,gBACTnG,EAASgmB,gBACThmB,EAASimB,gBACTjmB,EAASkmB,gBACTlmB,EAASuG,gBAEF,WACLwf,OAED,CAAC/lB,IAGF,yBAAK8J,UAAU,mBACb,kBAAC,IAAD,CAAYqc,SAAS,KACnB,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,MAEA,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOC,KAAK,aACV,kBAAC,GAAD,OAEF,kBAAC,IAAD,CAAOA,KAAK,KACV,kBAAC,GAAD,Y,2FC5CQC,QACW,cAA7BC,OAAO5f,SAAS6f,UAEe,UAA7BD,OAAO5f,SAAS6f,UAEhBD,OAAO5f,SAAS6f,SAASC,MACvB,2D,wHCiDAC,EAA2B,SAC/BnmB,EACAC,GAOAkC,OAAOC,OAAOpC,EAAM2W,MAAO1W,EAAOE,QAAQmM,SAASqK,OACnDxU,OAAOC,OAAOpC,EAAM6L,MAAO5L,EAAOE,QAAQmM,SAAST,OACnD1J,OAAOC,OAAOpC,EAAM0V,MAAOzV,EAAOE,QAAQmM,SAASoJ,OACnDvT,OAAOC,OAAOpC,EAAMyhB,aAAcxhB,EAAOE,QAAQmM,SAASmV,eA4F7C2E,EAzFOlnB,YAAY,CAChCC,KAAM,WACNC,aAxBkC,CAClCuX,MAAO,GACP9K,MAAO,GACP6J,MAAO,GACP+L,aAAc,IAqBdpiB,SAAU,GACVE,eAAa,mBACVkH,IAAsBhG,MAAO,SAC5BT,EACAC,GAIIA,EAAOE,SACTgmB,EAAyBnmB,EAAO,CAC9BG,QAASF,EAAOE,aATX,cAaVwG,IAAalG,KAAO0lB,GAbV,cAcVrf,IAAgBrG,KAAO0lB,GAdb,cAeVE,IAAoB5lB,KAAO0lB,GAfjB,cAgBVG,IAAoB7lB,KAAO0lB,GAhBjB,cAiBV9jB,IAAqB5B,KAAO0lB,GAjBlB,cAkBVvjB,IAAiBnC,KAAO0lB,GAlBd,cAmBVI,IAAyB9lB,KAAO0lB,GAnBtB,cAoBVlhB,IAAgCxE,KAAO0lB,GApB7B,cAqBVK,IAA2B/lB,MAAO,SACjCT,EACAC,GAFiC,OAIjCkmB,EAAyBnmB,EAAO,CAC9BG,QAASF,EAAOE,QAAQsmB,4BA1BjB,cA4BV3jB,IAAkBrC,KAAO0lB,GA5Bf,cA6BVnjB,IAAiBvC,KAAO0lB,GA7Bd,cA8BVjjB,IAAuBzC,KAAO0lB,GA9BpB,cA+BV/iB,IAAwB3C,KAAO0lB,GA/BrB,cAgCVne,IAAmBvH,KAAO0lB,GAhChB,cAiCVhe,IAAkB1H,KAAO0lB,GAjCf,cAkCVthB,IAAyBpE,KAAO0lB,GAlCtB,cAmCVvhB,IAAyBnE,KAAO0lB,GAnCtB,cAoCVrhB,IAAyBrE,MAAO,SAC/BT,EACAC,UAEOD,EAAM0V,MAAMzV,EAAOE,YAxCjB,cA0CVuE,IAAyBjE,KAAO0lB,GA1CtB,cA2CVxhB,IAAyBlE,KAAO0lB,GA3CtB,cA4CVO,IAAoBjmB,KAAO0lB,GA5CjB,cA6CVphB,IAAyBtE,KAAO0lB,GA7CtB,cA8CVnhB,IAAyBvE,KAAO0lB,GA9CtB,cA+CVQ,IAAgBlmB,MAAO,SACtBT,EACAC,GAEAD,EAAM6L,MAAM5L,EAAOE,QAAQoD,QAAQsH,KACW,UAA5C7K,EAAM6L,MAAM5L,EAAOE,QAAQoD,QAAQsH,KAAmB,QAAU,QAClE7K,EAAM6L,MAAM5L,EAAOE,QAAQoD,QAAQuZ,MAAQ,UACzC9c,EAAM6L,MAAM5L,EAAOE,QAAQoD,QAAQuZ,MADM,YAEvC7c,EAAOE,QAAQsX,MAAOmP,UAvDjB,cAyDVC,IAAgBpmB,KAAO0lB,GAzDb,cA0DV5d,IAAkB9H,KAAO0lB,GA1Df,cA2DV7mB,IAAgBmB,MAAO,SAACT,GACPmC,OAAOkK,KAAKrM,EAAM6L,OAE1Bib,SAAQ,SAACvjB,GACf,IAAM+B,EAAOtF,EAAM6L,MAAMtI,GAEzB,GAAoB,YAAhB+B,EAAKqF,QACHwN,YAAY7S,GAAQ,EAAG,CACzB,IAAMyhB,EAA6B,UAAdzhB,EAAKuF,KAAmB,QAAU,QAEvDvF,EAAKyhB,IAAiB,IAClBzhB,EAAKyhB,GAAgB,IACvBzhB,EAAKyhB,GAAgB,GAGI,IAAvBzhB,EAAKyhB,KACPzhB,EAAKqF,OAAS,YACdrF,EAAKiE,OAAuB,UAAdjE,EAAKuF,KAAmB,QAAU,gBA5E/C,KAqFf,QCrHemc,EA7BgB9nB,YAAY,CACzCC,KAAM,oBACNC,aAR2C,CAC3C2W,WAAW,EACXvT,OAAQ,KACR9B,MAAO,MAMPrB,SAAU,GACVE,eAAa,mBACV8I,IAAkB5H,MAAO,SAACT,EAAOC,GAChCD,EAAM+V,WAAY,EAClB/V,EAAMwC,OAASvC,EAAOE,QACtBH,EAAMU,MAAQ,QAJL,cAMV6H,IAAkB9H,MAAO,SACxBT,EACA2C,GAEA3C,EAAM+V,WAAY,EAClB/V,EAAMwC,OAAS,KACfxC,EAAMU,MAAQ,QAZL,cAcVF,IAAgBC,MAAO,SACtBT,EACAC,GAEAD,EAAM+V,WAAY,EAClB/V,EAAMwC,OAASvC,EAAOE,QAAQqC,OAC9BxC,EAAMU,MAAQT,EAAOE,QAAQO,SApBpB,KAyBf,Q,iBCvBeumB,EAjBKC,YAAgB,CAElCvF,KAAMwF,IACNvR,YAAawR,IACbza,UAAW0a,IACX/a,SAAUgb,EAEVlK,WAAYmK,IACZ1R,UAAW2R,IACX1Q,UAAW2Q,IACXpf,kBAAmBqf,EACnBlG,SAAUmG,IACV5W,MAAO6W,MCHMC,MAfDC,YAAe,CAC3BC,QAASd,KCCI,WACb,IAAMzB,EAAMwC,EAAQ,KAAaC,QAEjCC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,WAAD,CAAUP,MAAOA,GACf,kBAACrC,EAAD,QAGJrf,SAASkiB,eAAe,SAI5BF,GLiHM,kBAAmBG,WACrBA,UAAUC,cAAcC,MACrBtY,MAAK,SAACuY,GACLA,EAAaC,gBAEdvY,OAAM,SAACzP,GACNioB,QAAQjoB,MAAMA,EAAMwgB,a,sSM7GfU,EAAsD,CACjE9f,WAAW,EACXpB,MAAO,KACPoV,MAAO,IAKH8S,EAAY1pB,YAAY,CAC5BC,KAAM,OACNC,aAJsC,GAKtCC,SAAU,CACRwpB,2BADQ,SACmB7oB,EAAOC,GAChCD,EAAMC,EAAOE,SAAWgC,OAAOC,OAC7B,GACAwf,EACA5hB,EAAMC,EAAOE,SACb,CACE2B,WAAW,EACXpB,MAAO,QAIb8lB,2BAZQ,SAaNxmB,EACAC,GAIAD,EAFmBC,EAAOE,QAAlBoD,QAEQ,CACdzB,WAAW,EACXpB,MAAO,KACPoV,MAAO7V,EAAOE,QAAQsmB,uBAAuBnkB,SAGjDwmB,yBAxBQ,SAwBiB9oB,EAAOC,GAG9BD,EAFeC,EAAOE,QAAQqC,QAEd,CACdV,WAAW,EACXpB,MAAOT,EAAOE,QAAQO,MACtBoV,MAAO,KAGXiT,yBAjCQ,SAiCiBrmB,EAAQC,KACjC4jB,yBAlCQ,SAmCNvmB,EACAC,GAEA,IAAM+oB,EAAgB/oB,EAAOE,QAAQmC,OAGrCtC,EAFeC,EAAOE,QAAQmM,SAASmV,aAAcuH,GAAe1jB,MAEtDwQ,MAAM5V,KAAK8oB,IAE3BhoB,uBA3CQ,SA2Ce0B,EAAQC,MAEjCpD,cAAc,eACX0F,IAAgCxE,MAAO,SACtCT,EACAC,GAEA,IAAM+oB,EAAgB/oB,EAAOE,QAAQmC,OAC/BiB,EAAStD,EAAOE,QAAQmM,SAASmV,aAAcuH,GAAe1jB,KAGhEtF,EAAMuD,IACRvD,EAAMuD,GAAQuS,MAAM5V,KAAK8oB,Q,EAa7BJ,EAAUppB,QANZqpB,E,EAAAA,2BACArC,E,EAAAA,2BACAsC,E,EAAAA,yBACAC,E,EAAAA,yBACAxC,E,EAAAA,yBACAvlB,E,EAAAA,uBAGa4nB,MAAf,QAEO,IAAMjG,EAAoB,SAC/Bpf,GAD+B,OAEM,SAAC7D,GAGtC,OAFAA,EAASmpB,EAA2BtlB,IAE7B,IAAIG,SAAQ,SAACC,EAASC,GAC3BzF,IAAS0F,OAAOC,IAAhB,6BACwBP,EADxB,UAEE,SAACvE,EAAeJ,GACd,GAAuB,MAAnBA,EAAImF,WAAoB,CAC1B,IAAM0iB,EAAyBxiB,YAAUjF,EAAuB,CAC9DgH,MAEFtG,EACE8mB,EAA2B,CACzBjjB,SACAkjB,4BAIJ9iB,EAAQ3E,QAERU,EACEopB,EAAyB,CACvBtmB,OAAQe,EACR7C,MAAOwD,YAAuBtF,MAGlCgF,EAAOhF,WAOJwjB,EAAoB,SAC/B7e,EACA+d,GAF+B,OAGI,SAAC5hB,GAGpC,OAFAA,EAASqpB,EAAyBxlB,IAE3B,IAAIG,SAAQ,SAACC,EAASC,GAC3BzF,IAAS0F,OAAOO,KAAhB,6BACwBb,EADxB,SAEE,CACE+d,SAEF,SAACtiB,EAAeJ,GACd,GAAuB,MAAnBA,EAAImF,WAAoB,CAC1B,IAAMgC,EAAwB9B,YAC5BjF,EACAgH,KAEFtG,EAAS6mB,EAAyBxgB,IAElCpC,EAAQ3E,QAERU,EACEsB,EAAuB,CACrBwB,OAAQe,EACR7C,MAAOwD,YAAuBtF,MAGlCgF,EAAOhF,Y,gCCnLjB,gFAOaghB,EAAkB,SAACta,EAAYmS,GAI1C,IAHA,IACMqF,EADuBtS,YAAkBlF,GAC3BwX,MAAM,CAAEtE,SAAS,IAE5BrG,EAAI,EAAG+F,EAAW4E,EAAMhR,OAAQqG,EAAI+F,EAAU/F,GAAK,EAC1D,IAAqC,IAAjC2K,EAAM3K,GAAG8W,MAAMnW,QAAQ,MAAegK,EAAM3K,GAAGuF,OAASD,EAAKC,KAC/D,OAAO,EAGX,OAAO,GAGIS,EAAc,SAAC7S,GAC1B,OAA0B,IAAtBA,EAAKwX,MAAMhR,OACN,EAGFxG,EAAKwX,MAAMoM,MAAM,KAAKpd,S,yICQzBqd,EAAajqB,YAAY,CAC7BC,KAAM,QACNC,aAP+B,CAC/BoO,YAAY,EACZD,UAAW,MAMXlO,SAAU,CACRkO,UADQ,SACEvN,EAAOC,GACfD,EAAMuN,UAAYtN,EAAOE,QAAQhB,KACjCa,EAAMwN,WAAavN,EAAOE,QAAQqN,YAEpCyD,UALQ,SAKEjR,GACRA,EAAMuN,UAAY,KAClBvN,EAAMwN,YAAa,IAGvBjO,eAAa,mBACV2I,IAAkBzH,MAAO,SAACT,GACzBA,EAAMwN,YAAa,KAFV,cAIVrF,IAAkB1H,MAAO,SAACT,GACzBA,EAAMuN,UAAY,KAClBvN,EAAMwN,YAAa,KANV,cAQVpF,IAAgB3H,MAAO,SAACT,GACvBA,EAAMwN,YAAa,KATV,cAWV7G,IAAalG,MAAO,SAACT,GACpBA,EAAMuN,UAAY,KAClBvN,EAAMwN,YAAa,KAbV,cAeV1G,IAAgBrG,MAAO,SAACT,GACvBA,EAAMuN,UAAY,KAClBvN,EAAMwN,YAAa,KAjBV,cAmBVxF,IAAmBvH,MAAO,SAACT,GAC1BA,EAAMuN,UAAY,KAClBvN,EAAMwN,YAAa,KArBV,K,EA0ByB2b,EAAW3pB,QAApC+N,E,EAAAA,UAAW0D,E,EAAAA,UAEXkY,MAAf,S,mBCxEAzqB,EAAOC,QAAU,CAAC,MAAQ,oCAAoC,GAAK,iCAAiC,GAAK,iCAAiC,GAAK,iCAAiC,GAAK,iCAAiC,GAAK,iCAAiC,GAAK,iCAAiC,GAAK,iCAAiC,GAAK,iCAAiC,GAAK,iCAAiC,GAAK,iCAAiC,GAAK,iCAAiC,GAAK,mC,gCCDre,aAGMyqB,EACJ,2DAEa,aACb9jB,GAEmB,IADnBtD,EACkB,uDADiB,KAE7BqnB,EAAe/jB,EAAf+jB,WACa,aAAfA,IACFA,EAAaD,GAGf,IAAMnK,EAAQ,IAAIqK,QAAMD,GAkBxB,OAhBI/jB,EAAKwX,OACPxX,EAAKwX,MAAMoM,MAAM,KAAKpC,SAAQ,SAACrP,EAAMqB,GACnC,KAA0B,OAAtB9W,GAA8B8W,GAAS9W,KAI5Bid,EAAMxH,KAAKA,EAAM,CAC9B8R,QAAQ,IAIR,MAAMC,MAAM,mBAAD,OAAoB/R,OAK9BwH,I,mBChCTvgB,EAAOC,QAAU,CAAC,aAAe,qCAAqC,mBAAqB,2CAA2C,YAAc,oCAAoC,YAAc,oCAAoC,aAAe,qCAAqC,eAAiB,uCAAuC,cAAgB,wC,gCCDtW,2BAIMiH,EAAa,IAAIpE,IAAOC,OAAO,QAAS,CAC5C8T,UAAW5T,IACX2D,KAAM/D,MAGOqE,O,mBCRflH,EAAOC,QAAU,CAAC,iBAAmB,0CAA0C,aAAe,sCAAsC,mBAAqB,4CAA4C,YAAc,qCAAqC,YAAc,qCAAqC,aAAe,wC,gCCD1T,mBAGMqH,EAAoB,IAAIxE,IAAOC,OAAO,eAAgB,CAC1D8T,UAAW5T,MAGEqE,O,gCCPf,mLAkBMyjB,EAAYvqB,YAAY,CAC5BC,KAAM,OACNC,aAJ8B,GAK9BC,SAAU,CACRsnB,gBADQ,SACQjkB,EAAQC,KACxBkkB,gBAFQ,SAEQnkB,EAAQC,KACxB/B,cAHQ,SAGM8B,EAAQC,MAExBpD,cAAe,K,EAObkqB,EAAUjqB,QAHZmnB,E,EAAAA,gBACAE,E,EAAAA,gBACAjmB,E,EAAAA,cAUWogB,GAPEyI,EAAf,QAOwB,SACtBlmB,EACAkU,GAFsB,OAGM,SAAC/X,GAQ7B,OAPAA,EACEinB,EAAgB,CACdpjB,SACAkU,UAIG,IAAI/T,SAAQ,SAACC,EAASC,GAC3BzF,IAAS0F,OAAOO,KAAhB,6BACwBb,EADxB,iBACuCkU,GACrC,IACA,SAACzY,EAAeJ,GACd,GAAuB,MAAnBA,EAAImF,WAAoB,CAC1B,IAAMC,EAAiBC,YAAUjF,EAAcuC,KAE/C7B,EAASmnB,EAAgB7iB,IACzBL,EAAQ3E,QAERU,EAASkB,EAAcsD,YAAuBtF,KAC9CgF,EAAOhF,a,mBChEjBF,EAAOC,QAAU,CAAC,aAAe,gCAAgC,WAAa,8BAA8B,KAAO,wBAAwB,SAAW,8B,gCCDtJ,+GAwBM+qB,EAAiBxqB,YAAY,CACjCC,KAAM,QACNC,aAPmC,CACnC0C,WAAW,EACXpB,MAAO,MAMPrB,SAAU,CACRsqB,oBADQ,SACY3pB,GAClBA,EAAM8B,WAAY,EAClB9B,EAAMU,MAAQ,MAEhB2lB,oBALQ,SAMNrmB,EACA2C,GAEA3C,EAAM8B,WAAY,EAClB9B,EAAMU,MAAQ,MAEhBkpB,kBAZQ,SAYU5pB,EAAOC,GACvBD,EAAM8B,WAAY,EAClB9B,EAAMU,MAAQT,EAAOE,Y,EASvBupB,EAAelqB,QAHjBmqB,E,EAAAA,oBACAtD,E,EAAAA,oBACAuD,E,EAAAA,kBAGaF,MAAf,QAEO,IAAMhE,EAAa,kBAAiC,SAAChmB,GAG1D,OAFAA,EAASiqB,KAEF,IAAIjmB,SAAQ,SAACC,EAASC,GAC3BzF,IAAS0F,OAAOC,IACd,eACA,CAAE+lB,MAAO,IAAKrd,KAAM,mBACpB,SAACxN,EAAeJ,GACd,GAAuB,MAAnBA,EAAImF,WAAoB,CAC1B,IAAM+lB,EAAkB7lB,YAAUjF,EAAgB,CAACuC,MACnD7B,EAAS2mB,EAAoByD,IAE7BnmB,EAAQ3E,QAERU,EAASkqB,EAAkB1lB,YAAuBtF,KAClDgF,EAAOhF,Y,wKCtCXmrB,EAAiB7qB,YAAY,CACjCC,KAAM,QACNC,aARmC,CACnC0C,WAAW,EACXpB,MAAO,KACPoV,MAAO,IAMPzW,SAAU,CACR2qB,oBADQ,SACYhqB,GAClBA,EAAM8B,WAAY,EAClB9B,EAAMU,MAAQ,MAEhB4lB,oBALQ,SAMNtmB,EACAC,GAEAD,EAAM8B,WAAY,EAClB9B,EAAMU,MAAQ,KACdV,EAAM8V,MAAQ7V,EAAOE,QAAQmC,QAE/B2nB,kBAbQ,SAaUjqB,EAAOC,GACvBD,EAAM8B,WAAY,EAClB9B,EAAMU,MAAQT,EAAOE,QACrBH,EAAM8V,MAAQ,KAGlBvW,eAAa,mBACVsF,IAAyBpE,MAAO,SAC/BT,EACAC,GAEKD,EAAM8V,MAAMoU,SAASjqB,EAAOE,QAAQmC,SACvCtC,EAAM8V,MAAMqU,QAAQlqB,EAAOE,QAAQmC,WAN5B,cASVsC,IAAyBnE,MAAO,SAC/BT,EACAC,GAEKD,EAAM8V,MAAMoU,SAASjqB,EAAOE,QAAQmC,SACvCtC,EAAM8V,MAAMqU,QAAQlqB,EAAOE,QAAQmC,WAd5B,cAiBVwC,IAAyBrE,MAAO,SAC/BT,EACAC,GAEAmqB,eAAMpqB,EAAM8V,MAAO7V,EAAOE,YArBjB,K,EA8BX4pB,EAAevqB,QAHjBwqB,E,EAAAA,oBACA1D,E,EAAAA,oBACA2D,E,EAAAA,kBAGaF,MAAf,QAEO,IAAMnE,EAAa,kBAAiC,SAAClmB,GAG1D,OAFAA,EAASsqB,KAEF,IAAItmB,SAAQ,SAACC,EAASC,GAC3BzF,IAAS0F,OAAOC,IACd,eACA,CACE0I,KAAM,mBAER,SAACxN,EAAeJ,GACd,GAAuB,MAAnBA,EAAImF,WAAoB,CAC1B,IAAM+lB,EAAkB7lB,YAAUjF,EAAgB,CAAC4G,MACnDlG,EAAS4mB,EAAoBwD,IAE7BnmB,EAAQ3E,QAERU,EAASuqB,EAAkB/lB,YAAuBtF,KAClDgF,EAAOhF,Y,wKC1EXyrB,EAAiBnrB,YAAY,CACjCC,KAAM,QACNC,aARmC,CACnC0C,WAAW,EACXpB,MAAO,KACPoV,MAAO,IAMPzW,SAAU,CACRirB,oBADQ,SACYtqB,GAClBA,EAAM8B,WAAY,EAClB9B,EAAMU,MAAQ,MAEhBgmB,oBALQ,SAMN1mB,EACAC,GAEAD,EAAM8B,WAAY,EAClB9B,EAAMU,MAAQ,KACdV,EAAM8V,MAAQ7V,EAAOE,QAAQmC,QAE/BioB,kBAbQ,SAaUvqB,EAAOC,GACvBD,EAAM8B,WAAY,EAClB9B,EAAMU,MAAQT,EAAOE,QACrBH,EAAM8V,MAAQ,KAGlBvW,eAAa,mBACVuH,IAAgBrG,MAAO,SACtBT,EACAC,GAEKD,EAAM8V,MAAMoU,SAASjqB,EAAOE,QAAQmC,SACvCtC,EAAM8V,MAAM5V,KAAKD,EAAOE,QAAQmC,WANzB,cASVyC,IAAyBtE,MAAO,SAC/BT,EACAC,GAEKD,EAAM8V,MAAMoU,SAASjqB,EAAOE,QAAQmC,SACvCtC,EAAM8V,MAAM5V,KAAKD,EAAOE,QAAQmC,WAdzB,cAiBV0C,IAAyBvE,MAAO,SAC/BT,EACAC,GAEKD,EAAM8V,MAAMoU,SAASjqB,EAAOE,QAAQmC,SACvCtC,EAAM8V,MAAM5V,KAAKD,EAAOE,QAAQmC,WAtBzB,K,EAgCX+nB,EAAe7qB,QAHjB8qB,E,EAAAA,oBACA5D,E,EAAAA,oBACA6D,E,EAAAA,kBAGaF,MAAf,QAEO,IAAM1E,EAAa,kBAAiC,SAACjmB,GAG1D,OAFAA,EAAS4qB,KAEF,IAAI5mB,SAAQ,SAACC,EAASC,GAC3BzF,IAAS0F,OAAOC,IAAI,gBAAgB,SAAC9E,EAAeJ,GAClD,GAAuB,MAAnBA,EAAImF,WAAoB,CAC1B,IAAMymB,EAAkBvmB,YAAUjF,EAAgB,CAAC2C,MACnDjC,EAASgnB,EAAoB8D,IAE7B7mB,EAAQ3E,QAERU,EAAS6qB,EAAkBrmB,YAAuBtF,KAClDgF,EAAOhF,a","file":"static/js/main.1fdf4833.chunk.js","sourcesContent":["import socketIOClient from \"socket.io-client\";\nimport sailsIOClient from \"sails.io.js\";\n\nconst ioClient = sailsIOClient(socketIOClient);\n\nioClient.sails.url = process.env.REACT_APP_BACKEND_HOST;\n\nioClient.sails.reconnection = true;\n\nexport default ioClient;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gamePreview\":\"GamePreviewsListItem_gamePreview__wYvMw\",\"player\":\"GamePreviewsListItem_player__1GbNi\",\"board\":\"GamePreviewsListItem_board__2y4Yc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gameIsStarted\":\"SeeksListItem_gameIsStarted__3-Jpp\",\"colorIcon\":\"SeeksListItem_colorIcon__12bXP\"};","import { JWR } from \"sails.io.js\";\nimport { isString as _isString } from \"lodash\";\n\nexport default (\n  jwr: Pick<JWR, \"body\" | \"headers\">,\n  defaultErrorMessage = \"Internal server error\"\n): string => {\n  if (jwr.headers[\"X-Exit-Description\"]) {\n    return jwr.headers[\"X-Exit-Description\"];\n  }\n  if (_isString(jwr.body)) {\n    return jwr.body;\n  }\n\n  return defaultErrorMessage;\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userNameWrapper\":\"GameControlPanelUserName_userNameWrapper__3TpIe\",\"connectedIcon\":\"GameControlPanelUserName_connectedIcon__1Wqhf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogWrapper\":\"DrawOfferDialog_dialogWrapper__38JK5\",\"acceptBtn\":\"DrawOfferDialog_acceptBtn__1kykG\",\"declineBtn\":\"DrawOfferDialog_declineBtn__3Umym\",\"dialogText\":\"DrawOfferDialog_dialogText__1yBxj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"currentUserMessage\":\"ChatMessagesListItem_currentUserMessage__1a4Jr\",\"userName\":\"ChatMessagesListItem_userName__21pOB\",\"messageWrapper\":\"ChatMessagesListItem_messageWrapper__1Yveh\"};","/* eslint-disable import/no-cycle */\n/* eslint-disable @typescript-eslint/no-empty-interface */\n\nimport { createSlice } from \"@reduxjs/toolkit\";\nimport { AppThunk } from \"../../app/store\";\n\ninterface GameClockState {}\n\nconst initialState: GameClockState = {};\n\nconst gameClockSlice = createSlice({\n  name: \"gameClock\",\n  initialState,\n  reducers: {\n    oneSecondPassed() {},\n  },\n  extraReducers: {},\n});\n\nexport const { oneSecondPassed } = gameClockSlice.actions;\n\nexport default gameClockSlice.reducer;\n\nexport const startGameClock = (): AppThunk<() => void> => (dispatch) => {\n  const intervalId = setInterval(() => {\n    dispatch(oneSecondPassed());\n  }, 1000);\n\n  return () => {\n    clearInterval(intervalId);\n  };\n};\n","/* eslint-disable import/no-cycle */\n\nimport { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { remove as _remove } from \"lodash\";\nimport { acceptSeekError } from \"../challenge/challengeSlice\";\nimport ItemErrorPayload from \"../../interfaces/ItemErrorPayload\";\nimport { Message } from \"../../interfaces/Message\";\nimport { makeMoveError } from \"../move/moveSlice\";\nimport {\n  getCurrentUserError,\n  logoutError,\n} from \"../current-user/currentUserSlice\";\nimport {\n  abortGameError,\n  acceptDrawOfferError,\n  declineDrawOfferError,\n  offerDrawError,\n  resignGameError,\n} from \"../single-game/singleGameSlice\";\nimport { createChatMessageError } from \"../chat/chatSlice\";\nimport {\n  disconnectSocket,\n  reconnectSocket,\n} from \"../data-subscription/dataSubscriptionSlice\";\n\nconst initialState: Message[] = [];\n\nconst messagesSlice = createSlice({\n  name: \"messages\",\n  initialState,\n  reducers: {\n    showMessage: (state, action: PayloadAction<Message>) => {\n      state.push(action.payload);\n    },\n    hideMessage: (state, action: PayloadAction<string>) => {\n      _remove(state, (item) => item.id === action.payload);\n    },\n  },\n  extraReducers: {\n    [acceptSeekError.type]: (\n      state,\n      action: PayloadAction<ItemErrorPayload>\n    ) => {\n      state.push({\n        id: \"acceptSeekError\",\n        body: action.payload.error,\n        autoHide: true,\n      });\n    },\n    [makeMoveError.type]: (state, action: PayloadAction<string>) => {\n      state.push({\n        id: \"makeMoveError\",\n        body: action.payload,\n        autoHide: true,\n      });\n    },\n    [getCurrentUserError.type]: (state, action: PayloadAction<string>) => {\n      state.push({\n        id: \"getCurrentUserError\",\n        body: action.payload,\n        autoHide: true,\n      });\n    },\n    [logoutError.type]: (state, action: PayloadAction<string>) => {\n      state.push({\n        id: \"logoutError\",\n        body: action.payload,\n        autoHide: true,\n      });\n    },\n    [abortGameError.type]: (state, action: PayloadAction<ItemErrorPayload>) => {\n      state.push({\n        id: \"abortGameError\",\n        body: action.payload.error,\n        autoHide: true,\n      });\n    },\n    [createChatMessageError.type]: (\n      state,\n      action: PayloadAction<ItemErrorPayload>\n    ) => {\n      state.push({\n        id: \"createChatMessageError\",\n        body: action.payload.error,\n        autoHide: true,\n      });\n    },\n    [resignGameError.type]: (\n      state,\n      action: PayloadAction<ItemErrorPayload>\n    ) => {\n      state.push({\n        id: \"resignGameError\",\n        body: action.payload.error,\n        autoHide: true,\n      });\n    },\n    [offerDrawError.type]: (state, action: PayloadAction<ItemErrorPayload>) => {\n      state.push({\n        id: \"offerDrawError\",\n        body: action.payload.error,\n        autoHide: true,\n      });\n    },\n    [acceptDrawOfferError.type]: (\n      state,\n      action: PayloadAction<ItemErrorPayload>\n    ) => {\n      state.push({\n        id: \"acceptDrawOfferError\",\n        body: action.payload.error,\n        autoHide: true,\n      });\n    },\n    [declineDrawOfferError.type]: (\n      state,\n      action: PayloadAction<ItemErrorPayload>\n    ) => {\n      state.push({\n        id: \"declineDrawOfferError\",\n        body: action.payload.error,\n        autoHide: true,\n      });\n    },\n    [disconnectSocket.type]: (state) => {\n      state.push({\n        id: \"disconnectSocket\",\n        body: \"The Connection to the Server has been Lost\",\n        autoHide: false,\n      });\n    },\n    [reconnectSocket.type]: (state) => {\n      state.push({\n        id: \"reconnectSocket\",\n        body: \"The connection was restored. Page will be reloaded in 3 seconds\",\n        autoHide: true,\n      });\n\n      _remove(state, (item) => item.id === \"disconnectSocket\");\n    },\n  },\n});\n\nexport const { showMessage, hideMessage } = messagesSlice.actions;\n\nexport default messagesSlice.reducer;\n","import { schema } from \"normalizr\";\nimport userSchema from \"./userSchema\";\n\nconst gameSchema = new schema.Entity(\"games\", {\n  white: userSchema,\n  black: userSchema,\n});\n\nexport default gameSchema;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"currentUser\":\"UsersListItem_currentUser__3Oixp\",\"connectedIcon\":\"UsersListItem_connectedIcon__2GK65\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"clock\":\"GameClock_clock__1XkXv\",\"clockRun\":\"GameClock_clockRun__2zomt\",\"clockEmerg\":\"GameClock_clockEmerg__1sFO2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"GameControlPanelStatus_container__119WU\",\"status\":\"GameControlPanelStatus_status__1IARo\",\"result\":\"GameControlPanelStatus_result__3Qu_O\"};","/* eslint-disable no-param-reassign */\n/* eslint-disable import/no-cycle */\n/* eslint-disable prefer-object-spread */\n/* eslint-disable @typescript-eslint/no-unused-vars */\n\nimport { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { JWR } from \"sails.io.js\";\nimport { normalize } from \"normalizr\";\nimport { AppThunk } from \"../../app/store\";\nimport Game from \"../../interfaces/Game\";\nimport ioClient from \"../../services/ioClient\";\nimport gameSchema from \"../../normalizr/schemas/gameSchema\";\nimport ItemErrorPayload from \"../../interfaces/ItemErrorPayload\";\nimport NormalizedData from \"../../normalizr/interfaces/NormalizedData\";\nimport getErrorMessageFromJWR from \"../../utils/getErrorMessageFromJWR\";\n\nexport interface RewindToMovePayload {\n  gameId: number;\n  moveIndex: number | null;\n}\n\ninterface SingleGameItemState {\n  isLoading: boolean;\n  error: string | null;\n  isFlipped: boolean;\n  rewindToMoveIndex: number | null;\n}\n\ninterface SingleGameState {\n  [gameId: string]: SingleGameItemState;\n}\n\nexport const defaultSingleGameItemState: SingleGameItemState = {\n  isLoading: true,\n  error: null,\n  isFlipped: false,\n  rewindToMoveIndex: null,\n};\n\nconst initialState: SingleGameState = {};\n\nconst singleGameSlice = createSlice({\n  name: \"singleGame\",\n  initialState,\n  reducers: {\n    getSingleGameRequest(state, action: PayloadAction<number>) {\n      state[action.payload] = Object.assign(\n        {},\n        defaultSingleGameItemState,\n        state[action.payload],\n        {\n          isLoading: true,\n          error: null,\n        }\n      );\n    },\n    getSingleGameSuccess(state, action: PayloadAction<NormalizedData<number>>) {\n      state[action.payload.result] = Object.assign(\n        {},\n        defaultSingleGameItemState,\n        state[action.payload.result],\n        {\n          isLoading: false,\n          error: null,\n        }\n      );\n    },\n    getSingleGameError(state, action: PayloadAction<ItemErrorPayload>) {\n      state[action.payload.itemId] = Object.assign(\n        {},\n        defaultSingleGameItemState,\n        state[action.payload.itemId],\n        {\n          isLoading: false,\n          error: action.payload.error,\n        }\n      );\n    },\n    abortGameRequest(_state, _action: PayloadAction<number>) {},\n    abortGameSuccess(_state, _action: PayloadAction<NormalizedData<number>>) {},\n    abortGameError(_state, _action: PayloadAction<ItemErrorPayload>) {},\n    resignGameRequest(_state, _action: PayloadAction<number>) {},\n    resignGameSuccess(\n      _state,\n      _action: PayloadAction<NormalizedData<number>>\n    ) {},\n    resignGameError(_state, _action: PayloadAction<ItemErrorPayload>) {},\n\n    offerDrawRequest(_state, _action: PayloadAction<number>) {},\n    offerDrawSuccess(_state, _action: PayloadAction<NormalizedData<number>>) {},\n    offerDrawError(_state, _action: PayloadAction<ItemErrorPayload>) {},\n\n    acceptDrawOfferRequest(_state, _action: PayloadAction<number>) {},\n    acceptDrawOfferSuccess(\n      _state,\n      _action: PayloadAction<NormalizedData<number>>\n    ) {},\n    acceptDrawOfferError(_state, _action: PayloadAction<ItemErrorPayload>) {},\n\n    declineDrawOfferRequest(_state, _action: PayloadAction<number>) {},\n    declineDrawOfferSuccess(\n      _state,\n      _action: PayloadAction<NormalizedData<number>>\n    ) {},\n    declineDrawOfferError(_state, _action: PayloadAction<ItemErrorPayload>) {},\n\n    flipBoard(state, action: PayloadAction<number>) {\n      state[action.payload].isFlipped = !state[action.payload].isFlipped;\n    },\n    rewindToMove(state, action: PayloadAction<RewindToMovePayload>) {\n      state[action.payload.gameId].rewindToMoveIndex = action.payload.moveIndex;\n    },\n  },\n  extraReducers: {},\n});\n\nexport const {\n  getSingleGameRequest,\n  getSingleGameSuccess,\n  getSingleGameError,\n  flipBoard,\n  rewindToMove,\n  abortGameRequest,\n  abortGameSuccess,\n  abortGameError,\n  resignGameRequest,\n  resignGameSuccess,\n  resignGameError,\n  offerDrawRequest,\n  offerDrawSuccess,\n  offerDrawError,\n  acceptDrawOfferRequest,\n  acceptDrawOfferSuccess,\n  acceptDrawOfferError,\n  declineDrawOfferRequest,\n  declineDrawOfferSuccess,\n  declineDrawOfferError,\n} = singleGameSlice.actions;\n\nexport default singleGameSlice.reducer;\n\nexport const fetchGame = (id: number): AppThunk<Promise<Game>> => (\n  dispatch\n) => {\n  dispatch(getSingleGameRequest(id));\n\n  return new Promise((resolve, reject) => {\n    ioClient.socket.get(`/api/v1/game/${id}`, (body: unknown, jwr: JWR) => {\n      if (jwr.statusCode === 200) {\n        const normalizedGame = normalize(body as Game, gameSchema);\n        dispatch(getSingleGameSuccess(normalizedGame));\n        resolve(body as Game);\n      } else {\n        dispatch(\n          getSingleGameError({\n            itemId: id,\n            error: getErrorMessageFromJWR(jwr),\n          })\n        );\n        reject(jwr);\n      }\n    });\n  });\n};\n\nexport const abortGame = (id: number): AppThunk<Promise<Game>> => (\n  dispatch\n) => {\n  dispatch(abortGameRequest(id));\n\n  return new Promise((resolve, reject) => {\n    ioClient.socket.post(\n      `/api/v1/board/game/${id}/abort`,\n      (body: unknown, jwr: JWR) => {\n        if (jwr.statusCode === 200) {\n          const normalizedGame = normalize(body as Game, gameSchema);\n          dispatch(abortGameSuccess(normalizedGame));\n          resolve(body as Game);\n        } else {\n          dispatch(\n            abortGameError({\n              itemId: id,\n              error: getErrorMessageFromJWR(jwr),\n            })\n          );\n          reject(jwr);\n        }\n      }\n    );\n  });\n};\n\nexport const resignGame = (id: number): AppThunk<Promise<Game>> => (\n  dispatch\n) => {\n  dispatch(resignGameRequest(id));\n\n  return new Promise((resolve, reject) => {\n    ioClient.socket.post(\n      `/api/v1/board/game/${id}/resign`,\n      (body: unknown, jwr: JWR) => {\n        if (jwr.statusCode === 200) {\n          const normalizedGame = normalize(body as Game, gameSchema);\n          dispatch(resignGameSuccess(normalizedGame));\n          resolve(body as Game);\n        } else {\n          dispatch(\n            resignGameError({\n              itemId: id,\n              error: getErrorMessageFromJWR(jwr),\n            })\n          );\n          reject(jwr);\n        }\n      }\n    );\n  });\n};\n\nexport const offerDraw = (id: number): AppThunk<Promise<Game>> => (\n  dispatch\n) => {\n  dispatch(offerDrawRequest(id));\n\n  return new Promise((resolve, reject) => {\n    ioClient.socket.post(\n      `/api/v1/board/game/${id}/draw/yes`,\n      (body: unknown, jwr: JWR) => {\n        if (jwr.statusCode === 200) {\n          const normalizedGame = normalize(body as Game, gameSchema);\n          dispatch(offerDrawSuccess(normalizedGame));\n          resolve(body as Game);\n        } else {\n          dispatch(\n            offerDrawError({\n              itemId: id,\n              error: getErrorMessageFromJWR(jwr),\n            })\n          );\n          reject(jwr);\n        }\n      }\n    );\n  });\n};\n\nexport const acceptDrawOffer = (id: number): AppThunk<Promise<Game>> => (\n  dispatch\n) => {\n  dispatch(acceptDrawOfferRequest(id));\n\n  return new Promise((resolve, reject) => {\n    ioClient.socket.post(\n      `/api/v1/board/game/${id}/draw/yes`,\n      (body: unknown, jwr: JWR) => {\n        if (jwr.statusCode === 200) {\n          const normalizedGame = normalize(body as Game, gameSchema);\n          dispatch(acceptDrawOfferSuccess(normalizedGame));\n          resolve(body as Game);\n        } else {\n          dispatch(\n            acceptDrawOfferError({\n              itemId: id,\n              error: getErrorMessageFromJWR(jwr),\n            })\n          );\n          reject(jwr);\n        }\n      }\n    );\n  });\n};\nexport const declineDrawOffer = (id: number): AppThunk<Promise<Game>> => (\n  dispatch\n) => {\n  dispatch(declineDrawOfferRequest(id));\n\n  return new Promise((resolve, reject) => {\n    ioClient.socket.post(\n      `/api/v1/board/game/${id}/draw/no`,\n      (body: unknown, jwr: JWR) => {\n        if (jwr.statusCode === 200) {\n          const normalizedGame = normalize(body as Game, gameSchema);\n          dispatch(declineDrawOfferSuccess(normalizedGame));\n          resolve(body as Game);\n        } else {\n          dispatch(\n            declineDrawOfferError({\n              itemId: id,\n              error: getErrorMessageFromJWR(jwr),\n            })\n          );\n          reject(jwr);\n        }\n      }\n    );\n  });\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"clockRun\":\"GamePreviewClock_clockRun__2fzqU\"};","/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable @typescript-eslint/no-empty-interface */\n/* eslint-disable import/no-cycle */\n\nimport { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { normalize } from \"normalizr\";\nimport NormalizedData from \"../../normalizr/interfaces/NormalizedData\";\nimport { AppThunk } from \"../../app/store\";\nimport ioClient from \"../../services/ioClient\";\nimport { SubscriptionData } from \"../../interfaces/SubscriptionData\";\nimport gameSchema from \"../../normalizr/schemas/gameSchema\";\nimport seekSchema from \"../../normalizr/schemas/seekSchema\";\nimport userSchema from \"../../normalizr/schemas/userSchema\";\nimport chatMessageSchema from \"../../normalizr/schemas/chatMessageSchema\";\n\ninterface DataSubscriptionState {}\n\nconst initialState: DataSubscriptionState = {};\n\nconst dataSubscriptionSlice = createSlice({\n  name: \"dataSubscription\",\n  initialState,\n  reducers: {\n    updateGameBySubscription(\n      _state,\n      _action: PayloadAction<NormalizedData<number>>\n    ) {},\n    createGameBySubscription(\n      _state,\n      _action: PayloadAction<NormalizedData<number>>\n    ) {},\n    updateSeekBySubscription(\n      _state,\n      _action: PayloadAction<NormalizedData<number>>\n    ) {},\n    createSeekBySubscription(\n      _state,\n      _action: PayloadAction<NormalizedData<number>>\n    ) {},\n    removeSeekBySubscription(_state, _action: PayloadAction<number>) {},\n    createUserBySubscription(\n      _state,\n      _action: PayloadAction<NormalizedData<number>>\n    ) {},\n    updateUserBySubscription(\n      _state,\n      _action: PayloadAction<NormalizedData<number>>\n    ) {},\n    createChatMessageBySubscription(\n      _state,\n      _action: PayloadAction<NormalizedData<number>>\n    ) {},\n    disconnectSocket(_state) {},\n    reconnectSocket(_state) {},\n  },\n  extraReducers: {},\n});\n\nexport const {\n  updateGameBySubscription,\n  createGameBySubscription,\n  updateSeekBySubscription,\n  createSeekBySubscription,\n  removeSeekBySubscription,\n  createUserBySubscription,\n  updateUserBySubscription,\n  createChatMessageBySubscription,\n  reconnectSocket,\n  disconnectSocket,\n} = dataSubscriptionSlice.actions;\n\nexport default dataSubscriptionSlice.reducer;\n\nexport const watchGames = (): AppThunk<void> => (dispatch) => {\n  ioClient.socket.on(\"game\", (subscriptionData: SubscriptionData) => {\n    if (subscriptionData.verb === \"updated\") {\n      const game = {\n        ...subscriptionData.previous,\n        ...subscriptionData.data,\n      };\n\n      const normalizedGame = normalize(game, gameSchema);\n\n      dispatch(updateGameBySubscription(normalizedGame));\n    } else if (subscriptionData.verb === \"created\") {\n      const normalizedGame = normalize(subscriptionData.data, gameSchema);\n\n      dispatch(createGameBySubscription(normalizedGame));\n    }\n  });\n};\n\nexport const watchSeeks = (): AppThunk<void> => (dispatch) => {\n  ioClient.socket.on(\"seek\", (subscriptionData: SubscriptionData) => {\n    if (subscriptionData.verb === \"updated\") {\n      const seek = {\n        ...subscriptionData.previous,\n        ...subscriptionData.data,\n      };\n\n      const normalizedSeek = normalize(seek, seekSchema);\n\n      dispatch(updateSeekBySubscription(normalizedSeek));\n    } else if (subscriptionData.verb === \"created\") {\n      const normalizedSeek = normalize(subscriptionData.data, seekSchema);\n\n      dispatch(createSeekBySubscription(normalizedSeek));\n    } else if (subscriptionData.verb === \"destroyed\") {\n      dispatch(removeSeekBySubscription(subscriptionData.id));\n    }\n  });\n};\n\nexport const watchUsers = (): AppThunk<void> => (dispatch) => {\n  ioClient.socket.on(\"user\", (subscriptionData: SubscriptionData) => {\n    if (subscriptionData.verb === \"updated\") {\n      const seek = {\n        ...subscriptionData.previous,\n        ...subscriptionData.data,\n      };\n\n      const normalizedSeek = normalize(seek, userSchema);\n\n      dispatch(updateUserBySubscription(normalizedSeek));\n    } else if (subscriptionData.verb === \"created\") {\n      const normalizedSeek = normalize(subscriptionData.data, userSchema);\n\n      dispatch(createUserBySubscription(normalizedSeek));\n    }\n  });\n};\n\nexport const watchChatMessages = (): AppThunk<void> => (dispatch) => {\n  ioClient.socket.on(\"chat-message\", (subscriptionData: SubscriptionData) => {\n    if (subscriptionData.verb === \"created\") {\n      const normalizedChatMessage = normalize(\n        subscriptionData.data,\n        chatMessageSchema\n      );\n\n      dispatch(createChatMessageBySubscription(normalizedChatMessage));\n    }\n  });\n};\n\nexport const watchConnection = (): AppThunk<void> => (dispatch) => {\n  ioClient.socket.on(\"disconnect\", () => {\n    dispatch(disconnectSocket());\n  });\n\n  ioClient.socket.on(\"reconnect\", () => {\n    dispatch(reconnectSocket());\n\n    setTimeout(() => {\n      document.location.reload();\n    }, 3000);\n  });\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"colorIcon\":\"GameMeta_colorIcon__2-cJ5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"controlPanel\":\"GameControlPanel_controlPanel__31q_E\",\"controlPanelInner\":\"GameControlPanel_controlPanelInner__mVrde\"};","import { schema } from \"normalizr\";\n\nconst userSchema = new schema.Entity(\"users\");\n\nexport default userSchema;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"grid\":\"GamePreviewsList_grid__2iggX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"result\":\"GamePreviewResult_result__2DwMU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttonsWrapper\":\"GameControlPanelTopToolbar_buttonsWrapper__TJIBo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttonsWrapper\":\"GameControlPanelBottomToolbar_buttonsWrapper__21ame\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"singleGameBoard\":\"SingleGameBoard_singleGameBoard__2rYay\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chatMessages\":\"ChatMessagesList_chatMessages__4clbd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"textInput\":\"PostChatMessageForm_textInput__1LkoS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"messages\":\"Messages_messages__ESZ_K\"};","/* eslint-disable no-param-reassign */\n/* eslint-disable import/no-cycle */\n/* eslint-disable @typescript-eslint/no-unused-vars */\n\nimport { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { normalize } from \"normalizr\";\nimport { JWR } from \"sails.io.js\";\nimport { AppThunk } from \"../../app/store\";\nimport ioClient from \"../../services/ioClient\";\nimport User from \"../../interfaces/User\";\nimport LoginData from \"../../interfaces/LoginData\";\nimport SignUpData from \"../../interfaces/SignUpData\";\nimport userSchema from \"../../normalizr/schemas/userSchema\";\nimport NormalizedData from \"../../normalizr/interfaces/NormalizedData\";\nimport getErrorMessageFromJWR from \"../../utils/getErrorMessageFromJWR\";\n\ninterface CurrentUserState {\n  userId: number | null;\n  isLoading: boolean;\n  error: string | null;\n}\n\nconst initialState: CurrentUserState = {\n  userId: null,\n  isLoading: true,\n  error: null,\n};\n\nconst currentUserSlice = createSlice({\n  name: \"currentUser\",\n  initialState,\n  reducers: {\n    getCurrentUserRequest(state) {\n      state.isLoading = true;\n      state.error = null;\n    },\n    getCurrentUserSuccess(\n      state,\n      action: PayloadAction<NormalizedData<number> | null>\n    ) {\n      state.userId = action.payload ? action.payload.result : null;\n      state.isLoading = false;\n      state.error = null;\n    },\n    getCurrentUserError(state, action: PayloadAction<string>) {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n    loginRequest(_state) {},\n    loginSuccess(state, action: PayloadAction<NormalizedData<number>>) {\n      state.userId = action.payload.result;\n    },\n    loginError(_state, _action: PayloadAction<string>) {},\n    registerRequest(_state) {},\n    registerSuccess(state, action: PayloadAction<NormalizedData<number>>) {\n      state.userId = action.payload.result;\n    },\n    registerError(_state, _action: PayloadAction<string>) {},\n    logoutRequest(_state) {},\n    logoutSuccess(state) {\n      state.userId = null;\n    },\n    logoutError(_state, _action: PayloadAction<string>) {},\n  },\n});\n\nexport const {\n  getCurrentUserRequest,\n  getCurrentUserSuccess,\n  getCurrentUserError,\n  loginRequest,\n  loginSuccess,\n  loginError,\n  registerRequest,\n  registerSuccess,\n  registerError,\n  logoutRequest,\n  logoutSuccess,\n  logoutError,\n} = currentUserSlice.actions;\n\nexport default currentUserSlice.reducer;\n\nexport const fetchCurrentUser = (): AppThunk<Promise<User | null>> => (\n  dispatch\n) => {\n  dispatch(getCurrentUserRequest());\n\n  return new Promise((resolve, reject) => {\n    ioClient.socket.get(\"/api/v1/account/me\", (body: unknown, jwr: JWR) => {\n      if (jwr.statusCode === 200) {\n        const normalizedUser = normalize(body as User, userSchema);\n\n        dispatch(getCurrentUserSuccess(normalizedUser));\n        resolve(body as User);\n      } else if (jwr.statusCode === 401) {\n        dispatch(getCurrentUserSuccess(null));\n        resolve(null);\n      } else {\n        dispatch(getCurrentUserError(getErrorMessageFromJWR(jwr)));\n        reject(jwr);\n      }\n    });\n  });\n};\n\nexport const login = (data: LoginData): AppThunk<Promise<User>> => (\n  dispatch\n) => {\n  dispatch(loginRequest());\n\n  return new Promise((resolve, reject) => {\n    ioClient.socket.put(\n      \"/api/v1/entrance/login\",\n      {\n        // rememberMe: true, // because of warning in backend @see https://tracker.yandex.ru/CHESSPWA-47\n        emailAddress: data.email,\n        password: data.password,\n      },\n      (body: unknown, jwr: JWR) => {\n        if (jwr.statusCode === 200) {\n          const normalizedUser = normalize(body as User, userSchema);\n\n          dispatch(loginSuccess(normalizedUser));\n          resolve(body as User);\n        } else {\n          dispatch(loginError(getErrorMessageFromJWR(jwr)));\n          reject(jwr);\n        }\n      }\n    );\n  });\n};\n\nexport const register = (data: SignUpData): AppThunk<Promise<User>> => (\n  dispatch\n) => {\n  dispatch(registerRequest());\n\n  return new Promise((resolve, reject) => {\n    ioClient.socket.post(\n      \"/api/v1/entrance/signup\",\n      {\n        fullName: data.fullName,\n        emailAddress: data.email,\n        password: data.password,\n        confirmPassword: data.password,\n        agreed: true,\n      },\n      (body: unknown, jwr: JWR) => {\n        if (jwr.statusCode === 200) {\n          const normalizedUser = normalize(body as User, userSchema);\n\n          dispatch(registerSuccess(normalizedUser));\n          resolve(body as User);\n        } else {\n          dispatch(registerError(getErrorMessageFromJWR(jwr)));\n          reject(jwr);\n        }\n      }\n    );\n  });\n};\n\nexport const logout = (): AppThunk<Promise<void>> => (dispatch) => {\n  dispatch(logoutRequest());\n\n  return new Promise((resolve, reject) => {\n    ioClient.socket.post(\n      \"/api/v1/account/logout\",\n      {},\n      (body: unknown, jwr: JWR) => {\n        if (jwr.statusCode === 200) {\n          dispatch(logoutSuccess());\n          resolve();\n        } else {\n          dispatch(logoutError(getErrorMessageFromJWR(jwr)));\n          reject(jwr);\n        }\n      }\n    );\n  });\n};\n","/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable @typescript-eslint/no-empty-interface */\n/* eslint-disable import/no-cycle */\n\nimport { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { JWR } from \"sails.io.js\";\nimport { normalize } from \"normalizr\";\nimport { isString as _isString } from \"lodash\";\nimport NormalizedData from \"../../normalizr/interfaces/NormalizedData\";\nimport { ChallengeAiData } from \"../../interfaces/ChallengeAiData\";\nimport { AppThunk } from \"../../app/store\";\nimport Game from \"../../interfaces/Game\";\nimport ioClient from \"../../services/ioClient\";\nimport gameSchema from \"../../normalizr/schemas/gameSchema\";\nimport { CreateSeekData } from \"../../interfaces/CreateSeekData\";\nimport ItemErrorPayload from \"../../interfaces/ItemErrorPayload\";\nimport { Seek } from \"../../interfaces/Seek\";\nimport seekSchema from \"../../normalizr/schemas/seekSchema\";\nimport getErrorMessageFromJWR from \"../../utils/getErrorMessageFromJWR\";\n\ninterface ChallengeState {}\n\nconst initialState: ChallengeState = {};\n\nconst challengeSlice = createSlice({\n  name: \"challenge\",\n  initialState,\n  reducers: {\n    challengeAiRequest() {},\n    challengeAiSuccess(\n      _state,\n      _action: PayloadAction<NormalizedData<number>>\n    ) {},\n    challengeAiError(_state, _action: PayloadAction<string>) {},\n    createSeekRequest() {},\n    createSeekSuccess(\n      _state,\n      _action: PayloadAction<NormalizedData<number>>\n    ) {},\n    createSeekError(_state, _action: PayloadAction<string>) {},\n\n    acceptSeekRequest(_state, _seekId: PayloadAction<number>) {},\n    acceptSeekSuccess(\n      _state,\n      _action: PayloadAction<NormalizedData<number>>\n    ) {},\n    acceptSeekError(_state, _action: PayloadAction<ItemErrorPayload>) {},\n  },\n  extraReducers: {},\n});\n\nexport const {\n  challengeAiRequest,\n  challengeAiSuccess,\n  challengeAiError,\n  createSeekRequest,\n  createSeekSuccess,\n  createSeekError,\n  acceptSeekRequest,\n  acceptSeekSuccess,\n  acceptSeekError,\n} = challengeSlice.actions;\n\nexport default challengeSlice.reducer;\n\nexport const challengeAi = (data: ChallengeAiData): AppThunk<Promise<Game>> => (\n  dispatch\n) => {\n  dispatch(challengeAiRequest());\n\n  return new Promise((resolve, reject) => {\n    ioClient.socket.post(\n      `/api/v1/challenge/ai`,\n      data,\n      (body: unknown, jwr: JWR) => {\n        if (jwr.statusCode === 200) {\n          const normalizedGame = normalize(body as Game, gameSchema);\n\n          dispatch(challengeAiSuccess(normalizedGame));\n          resolve(body as Game);\n        } else {\n          dispatch(challengeAiError(getErrorMessageFromJWR(jwr)));\n          reject(jwr);\n        }\n      }\n    );\n  });\n};\n\nexport const createSeek = (data: CreateSeekData): AppThunk<Promise<Game>> => (\n  dispatch\n) => {\n  dispatch(createSeekRequest());\n\n  return new Promise((resolve, reject) => {\n    ioClient.socket.post(\n      `/api/v1/board/seek`,\n      data,\n      (body: unknown, jwr: JWR) => {\n        if (jwr.statusCode === 200) {\n          const normalizedGame = normalize(body as Game, gameSchema);\n\n          dispatch(createSeekSuccess(normalizedGame));\n          resolve(body as Game);\n        } else {\n          dispatch(createSeekError(getErrorMessageFromJWR(jwr)));\n          reject(jwr);\n        }\n      }\n    );\n  });\n};\n\nexport const acceptSeek = (seekId: number): AppThunk<Promise<Seek>> => (\n  dispatch\n) => {\n  dispatch(acceptSeekRequest(seekId));\n\n  return new Promise((resolve, reject) => {\n    ioClient.socket.post(\n      `/api/v1/board/seek/${seekId}/accept`,\n      {},\n      (body: unknown, jwr: JWR) => {\n        if (jwr.statusCode === 200) {\n          const normalizedSeek = normalize(body as Seek, seekSchema);\n\n          dispatch(acceptSeekSuccess(normalizedSeek));\n          resolve(body as Seek);\n        } else {\n          dispatch(\n            acceptSeekError({\n              itemId: seekId,\n              error: getErrorMessageFromJWR(jwr),\n            })\n          );\n          reject(jwr);\n        }\n      }\n    );\n  });\n};\n","/* eslint-disable @typescript-eslint/no-non-null-assertion */\n\nimport React, { FC, memo } from \"react\";\nimport { isEqualWith as _isEqualWith } from \"lodash\";\nimport Game from \"../../interfaces/Game\";\nimport { PieceColor } from \"../../types/PieceColor\";\n\nexport interface GamePreviewUserNameProps {\n  game?: Game;\n  color?: PieceColor;\n}\n\nexport const GamePreviewUserName: FC<GamePreviewUserNameProps> = memo(\n  ({ game, color = \"white\" }) => {\n    if (!game) {\n      return null;\n    }\n\n    return (\n      <span>\n        {game[color] ? game[color]!.fullName : `AI level ${game.aiLevel}`}\n      </span>\n    );\n  },\n  (a: GamePreviewUserNameProps, b: GamePreviewUserNameProps) => {\n    return _isEqualWith(\n      a,\n      b,\n      (_value: unknown, _other: unknown, indexOrKey: unknown) => {\n        // ignore time to improve performance\n        if (indexOrKey === \"wtime\" || indexOrKey === \"btime\") {\n          return true;\n        }\n        return undefined;\n      }\n    );\n  }\n);\n","/* eslint-disable @typescript-eslint/no-non-null-assertion */\n\nimport React, { FC } from \"react\";\nimport Game from \"../../interfaces/Game\";\nimport { PieceColor } from \"../../types/PieceColor\";\nimport css from \"./GamePreviewResult.module.scss\";\n\nexport interface GamePreviewResultProps {\n  game?: Game;\n  color?: PieceColor;\n}\n\nexport const GamePreviewResult: FC<GamePreviewResultProps> = ({\n  game,\n  color = \"white\",\n}) => {\n  if (!game) {\n    return null;\n  }\n\n  let result = \"½\";\n  if (game.winner) {\n    if (game.winner === color) {\n      result = \"1\";\n    } else {\n      result = \"0\";\n    }\n  }\n\n  return <span className={css.result}>{result}</span>;\n};\n","import React, { FC } from \"react\";\nimport moment from \"moment\";\nimport cx from \"classnames\";\nimport css from \"./GamePreviewClock.module.scss\";\n\nexport interface GamePreviewClockProps {\n  time?: number; // in msec\n  isRunning?: boolean;\n}\n\nexport const GamePreviewClock: FC<GamePreviewClockProps> = ({\n  time = 0,\n  isRunning = false,\n}) => {\n  const formattedTime = moment()\n    .startOf(\"day\")\n    .milliseconds(time)\n    .format(\"mm:ss\");\n\n  return (\n    <div\n      data-testid=\"time\"\n      className={cx(css.clock, { [css.clockRun]: isRunning })}\n    >\n      {formattedTime}\n    </div>\n  );\n};\n","import React, { FC, memo } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Board } from \"ii-react-chessboard\";\nimport { isEqual as _isEqual } from \"lodash\";\nimport Game from \"../../interfaces/Game\";\nimport makeChessInstance from \"../../utils/makeChessInstance\";\nimport css from \"./GamePreviewsListItem.module.scss\";\nimport { GamePreviewUserName } from \"./GamePreviewUserName\";\nimport { GamePreviewResult } from \"./GamePreviewResult\";\nimport { GamePreviewClock } from \"./GamePreviewClock\";\n\nexport interface GamePreviewsListItemProps {\n  game?: Game;\n}\n\nexport const GamePreviewsListItem: FC<GamePreviewsListItemProps> = memo(\n  ({ game }) => {\n    if (!game) {\n      return null;\n    }\n\n    const fen: string = makeChessInstance(game).fen();\n\n    return (\n      <div className={css.gamePreview}>\n        <div className={css.player}>\n          <GamePreviewUserName game={game} color=\"black\" />\n          {game.status === \"started\" && (\n            <GamePreviewClock\n              time={game.btime}\n              isRunning={game.turn === \"black\"}\n            />\n          )}\n          {game.status !== \"started\" && game.status !== \"aborted\" && (\n            <GamePreviewResult game={game} color=\"black\" />\n          )}\n        </div>\n        <div className={css.board}>\n          <Link to={`/game/${game.id}`}>\n            <Board position={fen} viewOnly={false} width={240} />\n          </Link>\n        </div>\n        <div className={css.player}>\n          <GamePreviewUserName game={game} color=\"white\" />\n          {game.status === \"started\" && (\n            <GamePreviewClock\n              time={game.wtime}\n              isRunning={game.turn === \"white\"}\n            />\n          )}\n          {game.status !== \"started\" && game.status !== \"aborted\" && (\n            <GamePreviewResult game={game} color=\"white\" />\n          )}\n        </div>\n      </div>\n    );\n  },\n  (a: GamePreviewsListItemProps, b: GamePreviewsListItemProps) => _isEqual(a, b)\n);\n","import React, { FC, memo } from \"react\";\nimport { Spinner } from \"react-bootstrap\";\n\nexport interface ContentLoadingStatusProps {\n  emptyContentMessage?: string;\n  isEmpty?: boolean;\n  isLoading?: boolean;\n  error?: string | null;\n  showEmptyContentMessage?: boolean;\n}\n\nconst defaultEmptyContentMessage = \"content is empty\";\n\nexport const ContentLoadingStatus: FC<ContentLoadingStatusProps> = memo(\n  ({\n    emptyContentMessage = defaultEmptyContentMessage,\n    isEmpty = false,\n    isLoading = false,\n    error = null,\n    showEmptyContentMessage = true,\n  }) => {\n    if (isEmpty && !isLoading && !error && showEmptyContentMessage) {\n      return (\n        <div\n          className=\"alert alert-warning text-center\"\n          role=\"alert\"\n          data-testid=\"empty-content-message\"\n        >\n          {emptyContentMessage}\n        </div>\n      );\n    }\n\n    if (isLoading && isEmpty) {\n      return (\n        <div className=\"text-center\">\n          <Spinner\n            animation=\"border\"\n            role=\"status\"\n            data-testid=\"loading-spinner\"\n          >\n            <span className=\"sr-only\">Loading...</span>\n          </Spinner>\n        </div>\n      );\n    }\n\n    if (error) {\n      return (\n        <div\n          className=\"alert alert-danger text-center\"\n          role=\"alert\"\n          data-testid=\"error-message\"\n        >\n          {error}\n        </div>\n      );\n    }\n\n    return null;\n  }\n);\n","import React, { FC } from \"react\";\nimport Game from \"../../interfaces/Game\";\nimport css from \"./GamePreviewsList.module.scss\";\nimport { GamePreviewsListItem } from \"./GamePreviewsListItem\";\nimport { ContentLoadingStatus } from \"../../components/ContentLoadingStatus\";\n\nexport interface GamePreviewsListProps {\n  games?: Game[];\n  isLoading?: boolean;\n  error?: string | null;\n  emptyContentMessage?: string;\n}\n\nexport const GamePreviewsList: FC<GamePreviewsListProps> = ({\n  games = [],\n  isLoading = false,\n  error = null,\n  emptyContentMessage,\n}) => {\n  return (\n    <div>\n      <ContentLoadingStatus\n        isLoading={isLoading}\n        error={error}\n        isEmpty={games.length === 0}\n        emptyContentMessage={emptyContentMessage}\n      />\n      <div className={css.grid}>\n        {games.map((item) => (\n          <GamePreviewsListItem game={item} key={item.id} />\n        ))}\n      </div>\n    </div>\n  );\n};\n","import React, { FC } from \"react\";\nimport { denormalize } from \"normalizr\";\nimport { useSelector } from \"react-redux\";\nimport { GamePreviewsList } from \"./GamePreviewsList\";\nimport { RootState } from \"../../app/rootReducer\";\nimport gameSchema from \"../../normalizr/schemas/gameSchema\";\nimport Game from \"../../interfaces/Game\";\n\nconst limit = 9;\n\nconst OngoingGamesContainer: FC<unknown> = () => {\n  const games = useSelector((state: RootState) =>\n    denormalize(Object.keys(state.entities.games), [gameSchema], state.entities)\n      .filter((game: Game) => game.status === \"started\")\n      .sort((a: Game, b: Game) => b.createdAt - a.createdAt)\n      .slice(0, limit)\n  );\n\n  const isLoading = useSelector(\n    (state: RootState) => state.gamesList.isLoading\n  );\n  const error = useSelector((state: RootState) => state.gamesList.error);\n\n  return (\n    <GamePreviewsList\n      games={games}\n      isLoading={isLoading}\n      error={error}\n      emptyContentMessage=\"Nobody is playing right now\"\n    />\n  );\n};\n\nexport default OngoingGamesContainer;\n","import React, { FC, useCallback } from \"react\";\nimport { Button } from \"react-bootstrap\";\n\nexport interface ChallengeButtonsProps {\n  onChallengeAi?(): void;\n  onCreateGame?(): void;\n}\n\nexport const ChallengeButtons: FC<ChallengeButtonsProps> = ({\n  onChallengeAi,\n  onCreateGame,\n}) => {\n  const handleChallengeAi = useCallback(() => {\n    if (onChallengeAi) {\n      onChallengeAi();\n    }\n  }, [onChallengeAi]);\n\n  const handleCreateGame = useCallback(() => {\n    if (onCreateGame) {\n      onCreateGame();\n    }\n  }, [onCreateGame]);\n\n  return (\n    <div className=\"mb-3\">\n      <Button\n        variant=\"primary\"\n        onClick={handleCreateGame}\n        data-testid=\"create-game-btn\"\n        className=\"mr-3\"\n      >\n        Create a game\n      </Button>\n      <Button\n        variant=\"primary\"\n        onClick={handleChallengeAi}\n        data-testid=\"challenge-ai-btn\"\n      >\n        Play with the computer\n      </Button>\n    </div>\n  );\n};\n","import React, { FC, useCallback } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { ChallengeButtons } from \"./ChallengeButtons\";\nimport { showModal } from \"../modal/modalSlice\";\n\nconst ChallengeButtonsContainer: FC<unknown> = () => {\n  const dispatch = useDispatch();\n\n  const handleChallengeAi = useCallback(() => {\n    dispatch(\n      showModal({\n        name: \"challengeAi\",\n        allowClose: true,\n      })\n    );\n  }, [dispatch]);\n\n  const handleCreateGame = useCallback(() => {\n    dispatch(\n      showModal({\n        name: \"seek\",\n        allowClose: true,\n      })\n    );\n  }, [dispatch]);\n\n  return (\n    <ChallengeButtons\n      onChallengeAi={handleChallengeAi}\n      onCreateGame={handleCreateGame}\n    />\n  );\n};\n\nexport default ChallengeButtonsContainer;\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { Formik, FormikHelpers } from \"formik\";\nimport React, { FC, FormEvent } from \"react\";\nimport cx from \"classnames\";\nimport { Alert, Button, ButtonGroup, Form, Row } from \"react-bootstrap\";\nimport { ChallengeAiData } from \"../../interfaces/ChallengeAiData\";\nimport css from \"./ChallengeAiForm.module.scss\";\n\nexport interface ChallengeAiFormProps {\n  onSubmit?(\n    values: ChallengeAiData,\n    formikHelpers: FormikHelpers<ChallengeAiData>\n  ): void | Promise<any>;\n}\n\nexport const ChallengeAiForm: FC<ChallengeAiFormProps> = ({ onSubmit }) => {\n  return (\n    <Formik\n      initialValues={{\n        level: 2,\n        color: \"\",\n        clockLimit: 300,\n        clockIncrement: 0,\n      }}\n      onSubmit={(values, formikHelpers): Promise<any> | void => {\n        if (onSubmit) {\n          return onSubmit(\n            values as ChallengeAiData,\n            formikHelpers as FormikHelpers<ChallengeAiData>\n          );\n        }\n        return undefined;\n      }}\n    >\n      {({\n        values,\n        handleChange,\n        handleBlur,\n        handleSubmit,\n        isSubmitting,\n        status,\n        setStatus,\n        setFieldValue,\n        /* and other goodies */\n      }) => (\n        <Form\n          noValidate\n          onSubmit={(e) => handleSubmit(e as FormEvent<HTMLFormElement>)}\n          onChange={() => setStatus(\"\")}\n        >\n          {!!status && <Alert variant=\"danger\">{status}</Alert>}\n          <fieldset>\n            <Form.Group>\n              <Form.Label>\n                Minutes per side: {values.clockLimit / 60}\n              </Form.Label>\n              <Form.Control\n                type=\"range\"\n                name=\"clockLimit\"\n                onBlur={handleBlur}\n                value={values.clockLimit}\n                onChange={handleChange}\n                min=\"60\"\n                max=\"1800\"\n                step=\"60\"\n              />\n            </Form.Group>\n\n            <Form.Group>\n              <Form.Label>\n                Increment in seconds: {values.clockIncrement}\n              </Form.Label>\n              <Form.Control\n                type=\"range\"\n                name=\"clockIncrement\"\n                onBlur={handleBlur}\n                value={values.clockIncrement}\n                onChange={handleChange}\n                min=\"0\"\n                max=\"60\"\n              />\n            </Form.Group>\n          </fieldset>\n\n          <div className=\"text-center\">Level</div>\n\n          <Row>\n            <ButtonGroup className={cx(\"mx-auto\", css.levelButtonGroup)}>\n              {[1, 2, 3, 4].map((level) => (\n                <Button\n                  key={level}\n                  type=\"button\"\n                  variant={level === values.level ? \"dark\" : \"light\"}\n                  onClick={() => setFieldValue(\"level\", level)}\n                >\n                  {level}\n                </Button>\n              ))}\n            </ButtonGroup>\n          </Row>\n\n          <div className=\"text-center\">A.I. Level: {values.level}</div>\n\n          <div className={css.colorSubmits}>\n            <button\n              disabled={isSubmitting}\n              type=\"submit\"\n              title=\"Black\"\n              className={cx(css.colorSubmitsButton, css.blackButton)}\n              onClick={() => setFieldValue(\"color\", \"black\")}\n            >\n              <i />\n            </button>\n            <button\n              disabled={isSubmitting}\n              type=\"submit\"\n              title=\"Random side\"\n              className={cx(css.colorSubmitsButton, css.randomButton)}\n              onClick={() => setFieldValue(\"color\", \"random\")}\n            >\n              <i />\n            </button>\n            <button\n              disabled={isSubmitting}\n              type=\"submit\"\n              title=\"White\"\n              className={cx(css.colorSubmitsButton, css.whiteButton)}\n              onClick={() => setFieldValue(\"color\", \"white\")}\n            >\n              <i />\n            </button>\n          </div>\n        </Form>\n      )}\n    </Formik>\n  );\n};\n","import React, { FC, useCallback } from \"react\";\nimport { FormikHelpers } from \"formik\";\nimport { useHistory } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport { ChallengeAiForm } from \"./ChallengeAiForm\";\nimport { AppDispatch } from \"../../app/store\";\nimport { challengeAi } from \"../challenge/challengeSlice\";\nimport { ChallengeAiData } from \"../../interfaces/ChallengeAiData\";\nimport Game from \"../../interfaces/Game\";\nimport getErrorMessageFromJWR from \"../../utils/getErrorMessageFromJWR\";\n\nconst ChallengeAiFormContainer: FC<unknown> = () => {\n  const dispatch = useDispatch<AppDispatch>();\n\n  const history = useHistory();\n\n  const challengeAiAndOpenGamePage = useCallback(\n    (\n      values: ChallengeAiData,\n      formikHelpers: FormikHelpers<ChallengeAiData>\n    ) => {\n      return dispatch(challengeAi(values))\n        .then((game: Game) => {\n          history.push(`/game/${game.id}`);\n        })\n        .catch((err) => {\n          formikHelpers.setStatus(getErrorMessageFromJWR(err));\n        });\n    },\n    [dispatch, history]\n  );\n\n  return <ChallengeAiForm onSubmit={challengeAiAndOpenGamePage} />;\n};\n\nexport default ChallengeAiFormContainer;\n","import React, { FC } from \"react\";\nimport { Modal } from \"react-bootstrap\";\nimport ChallengeAiFormContainer from \"./ChallengeAiFormContainer\";\n\nexport interface ChallengeAiModalProps {\n  show?: boolean;\n  onHide?(): void;\n}\n\nexport const ChallengeAiModal: FC<ChallengeAiModalProps> = ({\n  show = false,\n  onHide,\n}) => {\n  return (\n    <Modal show={show} onHide={onHide} animation={false}>\n      <Modal.Header closeButton>\n        <Modal.Title>Play with the computer</Modal.Title>\n      </Modal.Header>\n\n      <Modal.Body>\n        <ChallengeAiFormContainer />\n      </Modal.Body>\n    </Modal>\n  );\n};\n","import React, { FC, useCallback } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { ChallengeAiModal } from \"./ChallengeAiModal\";\nimport { RootState } from \"../../app/rootReducer\";\nimport { hideModal } from \"../modal/modalSlice\";\n\nconst ChallengeAiModalContainer: FC<unknown> = () => {\n  const isModalVisible = useSelector(\n    (state: RootState) => state.modal.showModal === \"challengeAi\"\n  );\n\n  const dispatch = useDispatch();\n\n  const handleHide = useCallback(() => {\n    dispatch(hideModal());\n  }, [dispatch]);\n\n  return <ChallengeAiModal show={isModalVisible} onHide={handleHide} />;\n};\n\nexport default ChallengeAiModalContainer;\n","import React, { FC } from \"react\";\nimport { denormalize } from \"normalizr\";\nimport { useSelector } from \"react-redux\";\nimport { GamePreviewsList } from \"./GamePreviewsList\";\nimport { RootState } from \"../../app/rootReducer\";\nimport gameSchema from \"../../normalizr/schemas/gameSchema\";\nimport Game from \"../../interfaces/Game\";\n\nconst limit = 9;\n\nconst CompletedGamesContainer: FC<unknown> = () => {\n  const games = useSelector(\n    (state: RootState) =>\n      denormalize(\n        Object.keys(state.entities.games),\n        [gameSchema],\n        state.entities\n      )\n        .filter(\n          (game: Game) => game.status !== \"started\" && game.status !== \"aborted\"\n        )\n        .sort((a: Game, b: Game) => b.createdAt - a.createdAt)\n        .slice(0, limit),\n    (a: Game[], b: Game[]) => {\n      return (\n        JSON.stringify(a.map((item) => item.id)) ===\n        JSON.stringify(b.map((item) => item.id))\n      );\n    } // since the games are over, we check only arrays of ids to improve performance\n  );\n\n  const isLoading = useSelector(\n    (state: RootState) => state.gamesList.isLoading\n  );\n  const error = useSelector((state: RootState) => state.gamesList.error);\n\n  return (\n    <GamePreviewsList\n      games={games}\n      isLoading={isLoading}\n      error={error}\n      emptyContentMessage=\"There is no finished games yet\"\n    />\n  );\n};\n\nexport default CompletedGamesContainer;\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { Formik, FormikHelpers } from \"formik\";\nimport React, { FC, FormEvent, useCallback } from \"react\";\nimport { Alert, Button, Form, Spinner } from \"react-bootstrap\";\nimport cx from \"classnames\";\nimport { CreateSeekData } from \"../../interfaces/CreateSeekData\";\nimport { ChallengeAiData } from \"../../interfaces/ChallengeAiData\";\nimport css from \"./CreateSeekForm.module.scss\";\n\nexport interface CreateSeekFormProps {\n  onSubmit?(\n    values: CreateSeekData,\n    formikHelpers: FormikHelpers<CreateSeekData>\n  ): void | Promise<any>;\n  onAbort?(): void;\n}\n\nexport const CreateSeekForm: FC<CreateSeekFormProps> = ({\n  onSubmit,\n  onAbort,\n}) => {\n  const handleAbort = useCallback(() => {\n    if (onAbort) {\n      onAbort();\n    }\n  }, [onAbort]);\n\n  return (\n    <Formik\n      initialValues={{\n        color: \"\",\n        clockLimit: 300,\n        clockIncrement: 0,\n      }}\n      onSubmit={(values, formikHelpers): Promise<any> | void => {\n        if (onSubmit) {\n          return onSubmit(\n            values as ChallengeAiData,\n            formikHelpers as FormikHelpers<CreateSeekData>\n          );\n        }\n        return undefined;\n      }}\n    >\n      {({\n        values,\n        handleChange,\n        handleBlur,\n        handleSubmit,\n        isSubmitting,\n        status,\n        setStatus,\n        setFieldValue,\n        /* and other goodies */\n      }) => (\n        <Form\n          noValidate\n          onSubmit={(e) => handleSubmit(e as FormEvent<HTMLFormElement>)}\n          onChange={() => setStatus(\"\")}\n        >\n          {!!status && <Alert variant=\"danger\">{status}</Alert>}\n          <fieldset>\n            <Form.Group>\n              <Form.Label>\n                Minutes per side: {values.clockLimit / 60}\n              </Form.Label>\n              <Form.Control\n                disabled={isSubmitting}\n                type=\"range\"\n                name=\"clockLimit\"\n                onBlur={handleBlur}\n                value={values.clockLimit}\n                onChange={handleChange}\n                min=\"60\"\n                max=\"1800\"\n                step=\"60\"\n              />\n            </Form.Group>\n\n            <Form.Group>\n              <Form.Label>\n                Increment in seconds: {values.clockIncrement}\n              </Form.Label>\n              <Form.Control\n                disabled={isSubmitting}\n                type=\"range\"\n                name=\"clockIncrement\"\n                onBlur={handleBlur}\n                value={values.clockIncrement}\n                onChange={handleChange}\n                min=\"0\"\n                max=\"60\"\n              />\n            </Form.Group>\n          </fieldset>\n\n          <div className={css.colorSubmits}>\n            <button\n              disabled={isSubmitting}\n              type=\"submit\"\n              title=\"Black\"\n              className={cx(css.colorSubmitsButton, css.blackButton)}\n              onClick={() => setFieldValue(\"color\", \"black\")}\n            >\n              <i />\n            </button>\n            <button\n              disabled={isSubmitting}\n              type=\"submit\"\n              title=\"Random side\"\n              className={cx(css.colorSubmitsButton, css.randomButton)}\n              onClick={() => setFieldValue(\"color\", \"random\")}\n            >\n              <i />\n            </button>\n            <button\n              disabled={isSubmitting}\n              type=\"submit\"\n              title=\"White\"\n              className={cx(css.colorSubmitsButton, css.whiteButton)}\n              onClick={() => setFieldValue(\"color\", \"white\")}\n            >\n              <i />\n            </button>\n          </div>\n\n          {isSubmitting && (\n            <div className={css.spinnerWrapper}>\n              <Spinner animation=\"border\" className={css.spinner}>\n                <span className=\"sr-only\">Waiting for opponent...</span>\n              </Spinner>\n\n              <Button\n                variant=\"danger\"\n                className={css.spinnerButton}\n                onClick={handleAbort}\n              >\n                Abort\n              </Button>\n            </div>\n          )}\n        </Form>\n      )}\n    </Formik>\n  );\n};\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n\nimport React, { FC, useCallback } from \"react\";\nimport { FormikHelpers } from \"formik\";\nimport { useDispatch } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { CreateSeekForm } from \"./CreateSeekForm\";\nimport { createSeek } from \"../challenge/challengeSlice\";\nimport { CreateSeekData } from \"../../interfaces/CreateSeekData\";\nimport { AppDispatch } from \"../../app/store\";\nimport Game from \"../../interfaces/Game\";\n\nimport ioClient from \"../../services/ioClient\";\nimport getErrorMessageFromJWR from \"../../utils/getErrorMessageFromJWR\";\n\nconst CreateSeekFormContainer: FC<unknown> = () => {\n  const dispatch = useDispatch<AppDispatch>();\n\n  const history = useHistory();\n\n  const handleSubmit = useCallback(\n    (values: CreateSeekData, formikHelpers: FormikHelpers<CreateSeekData>) => {\n      return dispatch(createSeek(values))\n        .then((game: Game) => {\n          history.push(`/game/${game.id}`);\n        })\n        .catch((err) => {\n          if (err.statusCode === 0) {\n            // request is aborted by client. do nothing\n          } else {\n            formikHelpers.setStatus(getErrorMessageFromJWR(err));\n          }\n        });\n    },\n    [dispatch, history]\n  );\n\n  // @todo. This is temporary solution. We need to use HTTP requests instead of sockets and we need\n  //  to abort the createSeek HTTP request instead of sockets disconnect.\n  const handleAbort = useCallback(() => {\n    // @ts-ignore\n    ioClient.socket.disconnect();\n    ioClient.socket.reconnect();\n  }, []);\n\n  return <CreateSeekForm onSubmit={handleSubmit} onAbort={handleAbort} />;\n};\n\nexport default CreateSeekFormContainer;\n","import React, { FC } from \"react\";\nimport { Modal } from \"react-bootstrap\";\nimport CreateSeekFormContainer from \"./CreateSeekFormContainer\";\n\nexport interface SeekModalProps {\n  allowClose?: boolean;\n  show?: boolean;\n  onHide?(): void;\n}\n\nexport const SeekModal: FC<SeekModalProps> = ({\n  allowClose = true,\n  show = false,\n  onHide,\n}) => {\n  return (\n    <Modal\n      show={show}\n      onHide={onHide}\n      animation={false}\n      backdrop={allowClose ? true : \"static\"}\n    >\n      <Modal.Header closeButton={allowClose}>\n        <Modal.Title>Create a game</Modal.Title>\n      </Modal.Header>\n\n      <Modal.Body>\n        <CreateSeekFormContainer />\n      </Modal.Body>\n    </Modal>\n  );\n};\n","import React, { FC, useCallback } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { SeekModal } from \"./SeekModal\";\nimport { RootState } from \"../../app/rootReducer\";\nimport { hideModal } from \"../modal/modalSlice\";\n\nconst SeekModalContainer: FC<unknown> = () => {\n  const isModalVisible = useSelector(\n    (state: RootState) => state.modal.showModal === \"seek\"\n  );\n\n  const allowClose = useSelector((state: RootState) => state.modal.allowClose);\n\n  const dispatch = useDispatch();\n\n  const handleHide = useCallback(() => {\n    dispatch(hideModal());\n  }, [dispatch]);\n\n  return (\n    <SeekModal\n      allowClose={allowClose}\n      show={isModalVisible}\n      onHide={handleHide}\n    />\n  );\n};\n\nexport default SeekModalContainer;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M256,0C114.618,0,0,114.618,0,256s114.618,256,256,256s256-114.618,256-256S397.382,0,256,0z M256,469.333 c-117.818,0-213.333-95.515-213.333-213.333S138.182,42.667,256,42.667S469.333,138.182,469.333,256S373.818,469.333,256,469.333z \"\n})));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref9 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref10 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref11 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref12 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref13 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref14 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref15 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref16 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref17 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar SvgWhite = function SvgWhite(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Layer_1\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 512 512\",\n    style: {\n      enableBackground: \"new 0 0 512 512\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgWhite, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/white.1009e168.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M256,0C114.837,0,0,114.837,0,256s114.837,256,256,256s256-114.837,256-256S397.163,0,256,0z\"\n})));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref9 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref10 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref11 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref12 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref13 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref14 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref15 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref16 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref17 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar SvgBlack = function SvgBlack(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Layer_1\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 512 512\",\n    style: {\n      enableBackground: \"new 0 0 512 512\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgBlack, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/black.f1ae6ff6.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"c198_half_moon\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M29.105,14.552c0-0.03-0.004-0.06-0.004-0.092C29.054,6.481,22.584,0.027,14.6,0.002C14.585,0.002,14.569,0,14.556,0 h-0.002l0,0C6.547,0,0.051,6.47,0.005,14.468c0,0.027-0.004,0.053-0.004,0.084v0.002l0,0c0,8.037,6.517,14.553,14.553,14.553l0,0 h0.002c0.014,0,0.029-0.003,0.044-0.003c8.016-0.025,14.507-6.529,14.507-14.55l0,0L29.105,14.552L29.105,14.552z M14.556,2.079 c6.877,0,12.473,5.596,12.473,12.473c0,6.876-5.596,12.476-12.473,12.476V2.079z\"\n})), /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Capa_1_271_\"\n}));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref9 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref10 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref11 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref12 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref13 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref14 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref15 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref16 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref17 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar SvgRandom = function SvgRandom(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 29.107 29.107\",\n    style: {\n      enableBackground: \"new 0 0 29.107 29.107\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgRandom, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/random.668e615f.svg\";\nexport { ForwardRef as ReactComponent };","/* eslint-disable @typescript-eslint/no-non-null-assertion */\n\nimport React, { FC, useCallback } from \"react\";\nimport { Button, Spinner } from \"react-bootstrap\";\nimport cx from \"classnames\";\nimport { Seek } from \"../../interfaces/Seek\";\nimport css from \"./SeeksListItem.module.scss\";\nimport { ReactComponent as WhiteIcon } from \"../../assets/icons/white.svg\";\nimport { ReactComponent as BlackIcon } from \"../../assets/icons/black.svg\";\nimport { ReactComponent as RandomIcon } from \"../../assets/icons/random.svg\";\n\nexport interface SeeksListItemProps {\n  acceptInProcess?: number | null;\n  currentUserId?: number | null;\n  seek?: Seek;\n  onPlay?(seekId: number): void;\n}\n\nexport const SeeksListItem: FC<SeeksListItemProps> = ({\n  acceptInProcess = null,\n  currentUserId = null,\n  seek,\n  onPlay,\n}) => {\n  const handlePlay = useCallback(() => {\n    if (onPlay) {\n      onPlay(seek!.id);\n    }\n  }, [onPlay, seek]);\n\n  if (!seek) {\n    return null;\n  }\n\n  return (\n    <div\n      data-testid=\"seek-wrapper\"\n      className={cx(\"d-flex\", \"align-items-center\", \"border-bottom\", {\n        [css.gameIsStarted]: seek.game,\n      })}\n    >\n      <div className=\"d-flex pl-2\">\n        {seek.color === \"white\" && (\n          <WhiteIcon data-testid=\"white-icon\" className={css.colorIcon} />\n        )}\n        {seek.color === \"black\" && (\n          <BlackIcon data-testid=\"black-icon\" className={css.colorIcon} />\n        )}\n        {seek.color === \"random\" && (\n          <RandomIcon data-testid=\"random-icon\" className={css.colorIcon} />\n        )}\n      </div>\n      <div data-testid=\"user-name\" className=\"mr-auto p-2\">\n        {seek.createdBy.fullName}\n      </div>\n      <div data-testid=\"time-control\" className=\"p-2\">\n        {seek.clockLimit / 60} + {seek.clockIncrement}\n      </div>\n      <div className=\"p-2\">\n        {currentUserId !== seek.createdBy.id && (\n          <Button\n            data-testid=\"play-btn\"\n            onClick={handlePlay}\n            disabled={acceptInProcess !== null || !!seek.game}\n          >\n            {acceptInProcess === seek.id && (\n              <Spinner\n                animation=\"border\"\n                data-testid=\"play-btn-spinner\"\n                size=\"sm\"\n                className=\"mr-2\"\n              >\n                <span className=\"sr-only\">Sending...</span>\n              </Spinner>\n            )}\n            Play\n          </Button>\n        )}\n      </div>\n    </div>\n  );\n};\n","import React, { FC } from \"react\";\nimport { Seek } from \"../../interfaces/Seek\";\nimport { SeeksListItem } from \"./SeeksListItem\";\nimport { ContentLoadingStatus } from \"../../components/ContentLoadingStatus\";\n\nexport interface SeeksListProps {\n  acceptInProcess?: number | null;\n  currentUserId?: number | null;\n  seeks?: Seek[];\n  onPlay?(seekId: number): void;\n  isLoading?: boolean;\n  error?: string | null;\n}\n\nexport const SeeksList: FC<SeeksListProps> = ({\n  acceptInProcess = null,\n  currentUserId = null,\n  seeks = [],\n  onPlay,\n  isLoading = false,\n  error = null,\n}) => {\n  return (\n    <div>\n      <ContentLoadingStatus\n        isLoading={isLoading}\n        error={error}\n        isEmpty={seeks.length === 0}\n        emptyContentMessage=\"Nobody is waiting for opponent\"\n      />\n      <div>\n        {seeks.map((item) => (\n          <SeeksListItem\n            acceptInProcess={acceptInProcess}\n            currentUserId={currentUserId}\n            seek={item}\n            onPlay={onPlay}\n            key={item.id}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n","/* eslint-disable @typescript-eslint/no-non-null-assertion */\n\nimport React, { FC, useCallback } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { denormalize } from \"normalizr\";\nimport seekSchema from \"../../normalizr/schemas/seekSchema\";\nimport { RootState } from \"../../app/rootReducer\";\nimport { SeeksList } from \"./SeeksList\";\nimport { acceptSeek } from \"../challenge/challengeSlice\";\nimport { AppDispatch } from \"../../app/store\";\nimport { Seek } from \"../../interfaces/Seek\";\n\nconst SeeksListContainer: FC<unknown> = () => {\n  const dispatch = useDispatch<AppDispatch>();\n\n  const history = useHistory();\n\n  const currentUserId = useSelector(\n    (state: RootState) => state.currentUser.userId\n  );\n\n  const seeks = useSelector((state: RootState) =>\n    denormalize(state.seeksList.items, [seekSchema], state.entities)\n  );\n  const isLoading = useSelector(\n    (state: RootState) => state.seeksList.isLoading\n  );\n  const error = useSelector((state: RootState) => state.seeksList.error);\n\n  const acceptSeekRequest = useSelector(\n    (state: RootState) => state.acceptSeekRequest\n  );\n\n  const acceptInProcess = acceptSeekRequest.inProcess\n    ? acceptSeekRequest.itemId\n    : null;\n\n  const handlePlay = useCallback(\n    (seekId: number) => {\n      return dispatch(acceptSeek(seekId))\n        .then((seek: Seek) => {\n          history.push(`/game/${seek.game!.id}`);\n        })\n        .catch(() => {});\n    },\n    [dispatch, history]\n  );\n\n  return (\n    <SeeksList\n      currentUserId={currentUserId}\n      seeks={seeks}\n      onPlay={handlePlay}\n      acceptInProcess={acceptInProcess}\n      isLoading={isLoading}\n      error={error}\n    />\n  );\n};\n\nexport default SeeksListContainer;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"circle\", {\n  cx: 9,\n  cy: 9,\n  r: 6,\n  stroke: \"#629924\",\n  strokeWidth: 1,\n  fill: \"#629924\"\n});\n\nvar SvgOnline = function SvgOnline(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    height: 18,\n    width: 16,\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgOnline, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/online.5fbf667c.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"circle\", {\n  cx: 9,\n  cy: 9,\n  r: 6,\n  stroke: \"#BBB6B4\",\n  strokeWidth: 1,\n  fill: \"#fff\"\n});\n\nvar SvgOffline = function SvgOffline(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    height: 18,\n    width: 16,\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgOffline, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/offline.8ce2bca1.svg\";\nexport { ForwardRef as ReactComponent };","import React, { FC } from \"react\";\nimport cx from \"classnames\";\nimport moment from \"moment-timezone\";\nimport User from \"../../interfaces/User\";\nimport css from \"./UsersListItem.module.scss\";\nimport { ReactComponent as OnlineIcon } from \"../../assets/icons/online.svg\";\nimport { ReactComponent as OfflineIcon } from \"../../assets/icons/offline.svg\";\n\nexport interface UsersListItemProps {\n  currentUserId?: number | null;\n  user?: User;\n}\n\nexport const UsersListItem: FC<UsersListItemProps> = ({\n  currentUserId = null,\n  user,\n}) => {\n  if (!user) {\n    return null;\n  }\n\n  return (\n    <div\n      data-testid=\"user-wrapper\"\n      className={cx(\"d-flex\", \"align-items-center\", \"border-bottom\", {\n        [css.currentUser]: user.id === currentUserId,\n      })}\n    >\n      <div className=\"d-flex pl-2\">\n        {user.isOnline && (\n          <OnlineIcon\n            data-testid=\"online-icon\"\n            className={css.connectedIcon}\n            title=\"online\"\n          />\n        )}\n        {!user.isOnline && (\n          <OfflineIcon\n            data-testid=\"offline-icon\"\n            className={css.connectedIcon}\n            title=\"offline\"\n          />\n        )}\n      </div>\n      <div data-testid=\"user-name\" className=\"mr-auto p-2\">\n        {user.fullName}\n      </div>\n      <div data-testid=\"registration-date\" title=\"registration date\">\n        {moment(user.createdAt).format(\"LLL\")}\n      </div>\n    </div>\n  );\n};\n","import React, { FC } from \"react\";\nimport User from \"../../interfaces/User\";\nimport { ContentLoadingStatus } from \"../../components/ContentLoadingStatus\";\nimport { UsersListItem } from \"./UsersListItem\";\n\nexport interface UsersListProps {\n  currentUserId?: number | null;\n  users?: User[];\n  isLoading?: boolean;\n  error?: string | null;\n}\n\nexport const UsersList: FC<UsersListProps> = ({\n  currentUserId = null,\n  users = [],\n  isLoading = false,\n  error = null,\n}) => {\n  return (\n    <div>\n      <ContentLoadingStatus\n        isLoading={isLoading}\n        error={error}\n        isEmpty={users.length === 0}\n        emptyContentMessage=\"There is no players yet\"\n      />\n      <div>\n        {users.map((item) => (\n          <UsersListItem\n            currentUserId={currentUserId}\n            user={item}\n            key={item.id}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n","import React, { FC } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { denormalize } from \"normalizr\";\nimport { useDeepEqualSelector } from \"ii-react-libraries\";\nimport { UsersList } from \"./UsersList\";\nimport { RootState } from \"../../app/rootReducer\";\nimport userSchema from \"../../normalizr/schemas/userSchema\";\n\nconst UsersListContainer: FC<unknown> = () => {\n  const currentUserId = useSelector(\n    (state: RootState) => state.currentUser.userId\n  );\n\n  const users = useDeepEqualSelector((state: RootState) =>\n    denormalize(state.usersList.items, [userSchema], state.entities)\n  );\n\n  const isLoading = useSelector(\n    (state: RootState) => state.usersList.isLoading\n  );\n  const error = useSelector((state: RootState) => state.usersList.error);\n\n  return (\n    <UsersList\n      users={users}\n      isLoading={isLoading}\n      error={error}\n      currentUserId={currentUserId}\n    />\n  );\n};\n\nexport default UsersListContainer;\n","import React, { FC } from \"react\";\nimport { Card } from \"react-bootstrap\";\nimport OngoingGamesContainer from \"../games-list/OngoingGamesContainer\";\nimport ChallengeButtonsContainer from \"./ChallengeButtonsContainer\";\nimport ChallengeAiModalContainer from \"../challenge-ai-modal/ChallengeAiModalContainer\";\nimport CompletedGamesContainer from \"../games-list/CompletedGamesContainer\";\nimport SeekModalContainer from \"../seek-modal/SeekModalContainer\";\nimport SeeksListContainer from \"../seeks-list/SeeksListContainer\";\nimport UsersListContainer from \"../users-list/UsersListContainer\";\n\nconst HomePage: FC<unknown> = () => {\n  return (\n    <>\n      <ChallengeAiModalContainer />\n      <SeekModalContainer />\n      <div className=\"d-flex justify-content-center\">\n        <ChallengeButtonsContainer />\n      </div>\n\n      <Card className=\"mb-3\">\n        <Card.Body>\n          <Card.Title>Our players</Card.Title>\n          <UsersListContainer />\n        </Card.Body>\n      </Card>\n\n      <Card className=\"mb-3\">\n        <Card.Body>\n          <Card.Title>Waiting for opponent</Card.Title>\n          <SeeksListContainer />\n        </Card.Body>\n      </Card>\n\n      <Card className=\"mb-3\">\n        <Card.Body>\n          <Card.Title>Playing right now</Card.Title>\n          <OngoingGamesContainer />\n        </Card.Body>\n      </Card>\n\n      <Card>\n        <Card.Body>\n          <Card.Title>Finished</Card.Title>\n          <CompletedGamesContainer />\n        </Card.Body>\n      </Card>\n    </>\n  );\n};\n\nexport default HomePage;\n","import Game from \"../interfaces/Game\";\n\nexport default (game: Game): string => {\n  if (game.status === \"outoftime\") {\n    if (game.winner === \"white\") {\n      return \"Time out • White is victorious\";\n    }\n    if (game.winner === \"black\") {\n      return \"Time out • Black is victorious\";\n    }\n  }\n\n  if (game.status === \"resign\") {\n    if (game.winner === \"black\") {\n      return \"White resigned • Black is victorious\";\n    }\n    if (game.winner === \"white\") {\n      return \"Black resigned • White is victorious\";\n    }\n  }\n\n  if (game.status === \"aborted\") {\n    return \"Game aborted\";\n  }\n\n  if (game.status === \"mate\") {\n    if (game.winner === \"white\") {\n      return \"Checkmate • White is victorious\";\n    }\n    if (game.winner === \"black\") {\n      return \"Checkmate • Black is victorious\";\n    }\n  }\n\n  if (game.status === \"draw\") {\n    return \"Draw\";\n  }\n\n  if (game.status === \"stalemate\") {\n    return \"Stalemate\";\n  }\n\n  return \"Playing right now\";\n};\n","import React, { FC } from \"react\";\nimport { Card } from \"react-bootstrap\";\nimport cx from \"classnames\";\nimport Game from \"../../interfaces/Game\";\nimport getGameStatusText from \"../../utils/getGameStatusText\";\nimport { ReactComponent as WhiteIcon } from \"../../assets/icons/white.svg\";\nimport { ReactComponent as BlackIcon } from \"../../assets/icons/black.svg\";\nimport css from \"./GameMeta.module.scss\";\n\nexport interface GameMetaProps {\n  game?: Game;\n}\n\nexport const GameMeta: FC<GameMetaProps> = ({ game }) => {\n  if (!game) {\n    return null;\n  }\n\n  return (\n    <Card className=\"mb-3\">\n      <Card.Body className=\"p-2\">\n        <div>\n          Time Control:{\" \"}\n          <span data-testid=\"time-control\">\n            {game.clockLimit / 60} + {game.clockIncrement}\n          </span>\n        </div>\n        <div\n          data-testid=\"game-status\"\n          className={cx({\n            \"text-success\": game.status === \"started\",\n            \"text-danger\": game.status !== \"started\",\n          })}\n        >\n          {getGameStatusText(game)}\n        </div>\n        <div data-testid=\"white-user\" className=\"d-flex align-items-center\">\n          <WhiteIcon className={cx(css.colorIcon, \"mr-1\")} />\n          {game.white ? game.white.fullName : `AI level ${game.aiLevel}`}\n        </div>\n        <div data-testid=\"black-user\" className=\"d-flex align-items-center\">\n          <BlackIcon className={cx(css.colorIcon, \"mr-1\")} />\n          {game.black ? game.black.fullName : `AI level ${game.aiLevel}`}\n        </div>\n      </Card.Body>\n    </Card>\n  );\n};\n","import React, { FC } from \"react\";\nimport { denormalize } from \"normalizr\";\nimport { useDeepEqualSelector } from \"ii-react-libraries\";\nimport { RootState } from \"../../app/rootReducer\";\nimport gameSchema from \"../../normalizr/schemas/gameSchema\";\nimport { GameMeta } from \"./GameMeta\";\n\nexport interface SingleGameMetaContainerProps {\n  id: number;\n}\n\nexport const GameMetaContainer: FC<SingleGameMetaContainerProps> = ({ id }) => {\n  const game = useDeepEqualSelector(\n    (state: RootState) => denormalize(id, gameSchema, state.entities),\n    (_value: unknown, _other: unknown, indexOrKey: unknown) => {\n      // ignore time to improve performance\n      if (indexOrKey === \"wtime\" || indexOrKey === \"btime\") {\n        return true;\n      }\n      return undefined;\n    }\n  );\n\n  if (!game) {\n    return null;\n  }\n\n  return <GameMeta game={game} />;\n};\n","import React, { FC } from \"react\";\nimport moment from \"moment\";\nimport cx from \"classnames\";\nimport css from \"./GameClock.module.scss\";\n\nexport interface GameClockProps {\n  time?: number; // in msec\n  isRunning?: boolean;\n}\n\nexport const GameClock: FC<GameClockProps> = ({\n  time = 0,\n  isRunning = false,\n}) => {\n  const formattedTime = moment()\n    .startOf(\"day\")\n    .milliseconds(time)\n    .format(\"mm:ss\");\n\n  return (\n    <div\n      data-testid=\"time\"\n      className={cx(css.clock, {\n        [css.clockRun]: isRunning,\n        [css.clockEmerg]: time < 10000,\n      })}\n    >\n      {formattedTime}\n    </div>\n  );\n};\n","import React, { FC } from \"react\";\nimport Game from \"../../interfaces/Game\";\nimport getGameStatusText from \"../../utils/getGameStatusText\";\nimport css from \"./GameControlPanelStatus.module.scss\";\n\nexport interface GameControlPanelStatusProps {\n  game?: Game;\n}\n\nexport const GameControlPanelStatus: FC<GameControlPanelStatusProps> = ({\n  game,\n}) => {\n  if (!game) {\n    return null;\n  }\n\n  let result = \"½-½\";\n  if (game.winner) {\n    if (game.winner === \"white\") {\n      result = \"1-0\";\n    } else {\n      result = \"0-1\";\n    }\n  }\n\n  return (\n    <div className={css.container}>\n      <div className={css.result} data-testid=\"game-result\">\n        {result}\n      </div>\n      <div className={css.status} data-testid=\"game-status\">\n        {getGameStatusText(game)}\n      </div>\n    </div>\n  );\n};\n","/* eslint-disable react/no-array-index-key */\n/* eslint-disable jsx-a11y/click-events-have-key-events */ // @todo\n/* eslint-disable jsx-a11y/interactive-supports-focus */ // @todo\n\nimport React, { FC, memo, useEffect, useRef } from \"react\";\nimport { chunk as _chunk, isEqualWith as _isEqualWith } from \"lodash\";\nimport { Move } from \"chess.js\";\nimport cx from \"classnames\";\nimport Game from \"../../interfaces/Game\";\nimport makeChessInstance from \"../../utils/makeChessInstance\";\nimport css from \"./GameMoves.module.scss\";\nimport { GameControlPanelStatus } from \"./GameControlPanelStatus\";\nimport GameStatus from \"../../types/GameStatus\";\nimport { getMovesQnt } from \"../../utils/chess\";\n\nexport interface GameMovesProps {\n  game?: Game;\n  rewindToMoveIndex?: number | null;\n  onRewindToMove?(moveIndex: number): void;\n}\n\nconst formatMove = (move: Move): string => {\n  return `${move.from}${move.to}`;\n};\n\nexport const GameMoves: FC<GameMovesProps> = memo(\n  ({ game, rewindToMoveIndex = null, onRewindToMove }) => {\n    const scrollElementRef = useRef<HTMLDivElement>(null);\n    const lastMovesQnt = useRef<number>(-1);\n    const lastGameStatus = useRef<GameStatus>();\n\n    // @todo. add unit test\n    useEffect(() => {\n      if (!game) {\n        return;\n      }\n\n      const movesQnt = getMovesQnt(game);\n\n      if (\n        (lastMovesQnt.current !== movesQnt ||\n          lastGameStatus.current !== game.status) &&\n        rewindToMoveIndex === null\n      ) {\n        if (scrollElementRef.current) {\n          scrollElementRef.current.scrollTop =\n            scrollElementRef.current.scrollHeight;\n        }\n      }\n      lastMovesQnt.current = movesQnt;\n      lastGameStatus.current = game.status;\n    }, [\n      game,\n      lastMovesQnt,\n      lastGameStatus,\n      rewindToMoveIndex,\n      scrollElementRef,\n    ]);\n\n    if (!game) {\n      return null;\n    }\n\n    const chess = makeChessInstance(game);\n\n    const movesHistory = chess.history({ verbose: true });\n\n    const movesQnt = movesHistory.length;\n\n    const movesPairs = _chunk(movesHistory, 2);\n\n    const makeRewindToMoveHandler = (moveIndex: number) => {\n      return () => {\n        if (onRewindToMove) {\n          onRewindToMove(moveIndex);\n        }\n      };\n    };\n\n    return (\n      <div className={css.movesWrapper} ref={scrollElementRef}>\n        {movesPairs.map((pair, index) => {\n          const whiteMoveIndex = index * 2 + 1;\n          const blackMoveIndex = index * 2 + 2;\n\n          return (\n            <React.Fragment key={`move-${index}`}>\n              <div className={css.moveNumber}>{index + 1}</div>\n              <div\n                data-testid={`move-${whiteMoveIndex}`}\n                onClick={makeRewindToMoveHandler(whiteMoveIndex)}\n                role=\"button\"\n                className={cx(css.move, {\n                  [css.selected]:\n                    rewindToMoveIndex === whiteMoveIndex ||\n                    (rewindToMoveIndex === null && movesQnt === whiteMoveIndex),\n                })}\n              >\n                {formatMove(pair[0])}\n              </div>\n              {pair[1] && (\n                <div\n                  data-testid={`move-${blackMoveIndex}`}\n                  onClick={makeRewindToMoveHandler(blackMoveIndex)}\n                  role=\"button\"\n                  className={cx(css.move, {\n                    [css.selected]:\n                      rewindToMoveIndex === blackMoveIndex ||\n                      (rewindToMoveIndex === null &&\n                        movesQnt === blackMoveIndex),\n                  })}\n                >\n                  {formatMove(pair[1])}\n                </div>\n              )}\n            </React.Fragment>\n          );\n        })}\n\n        {game.status !== \"started\" && <GameControlPanelStatus game={game} />}\n      </div>\n    );\n  },\n  (a: GameMovesProps, b: GameMovesProps) => {\n    return _isEqualWith(\n      a,\n      b,\n      (_value: unknown, _other: unknown, indexOrKey: unknown) => {\n        // ignore time to improve performance\n        if (indexOrKey === \"wtime\" || indexOrKey === \"btime\") {\n          return true;\n        }\n        return undefined;\n      }\n    );\n  }\n);\n","/* eslint-disable @typescript-eslint/no-non-null-assertion */\n\nimport React, { FC, memo } from \"react\";\nimport cx from \"classnames\";\nimport { isEqualWith as _isEqualWith } from \"lodash\";\nimport Game from \"../../interfaces/Game\";\nimport { PieceColor } from \"../../types/PieceColor\";\nimport css from \"./GameControlPanelUserName.module.scss\";\nimport { ReactComponent as OnlineIcon } from \"../../assets/icons/online.svg\";\nimport { ReactComponent as OfflineIcon } from \"../../assets/icons/offline.svg\";\n\nexport interface GameControlPanelUserNameProps {\n  game?: Game;\n  color?: PieceColor;\n}\n\nexport const GameControlPanelUserName: FC<GameControlPanelUserNameProps> = memo(\n  ({ game, color = \"white\" }) => {\n    if (!game) {\n      return null;\n    }\n\n    return (\n      <div\n        className={cx(\n          css.userNameWrapper,\n          \"d-flex\",\n          \"align-items-center\",\n          \"pl-2\"\n        )}\n      >\n        {game[color] && (\n          <span data-testid=\"connected-icon\" className=\"d-flex mr-1\">\n            {game[color]!.isOnline && (\n              <OnlineIcon\n                data-testid=\"online-icon\"\n                className={css.connectedIcon}\n                title=\"online\"\n              />\n            )}\n            {!game[color]!.isOnline && (\n              <OfflineIcon\n                data-testid=\"offline-icon\"\n                className={css.connectedIcon}\n                title=\"offline\"\n              />\n            )}\n          </span>\n        )}\n        <span data-testid=\"user-name\" className={css.userName}>\n          {game[color] ? game[color]!.fullName : `AI level ${game.aiLevel}`}\n        </span>\n      </div>\n    );\n  },\n  (a: GameControlPanelUserNameProps, b: GameControlPanelUserNameProps) => {\n    return _isEqualWith(\n      a,\n      b,\n      (_value: unknown, _other: unknown, indexOrKey: unknown) => {\n        // ignore time to improve performance\n        if (indexOrKey === \"wtime\" || indexOrKey === \"btime\") {\n          return true;\n        }\n        return undefined;\n      }\n    );\n  }\n);\n","import React, { FC, memo, useCallback } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faRetweet,\n  faAngleDoubleLeft,\n  faAngleDoubleRight,\n  faAngleLeft,\n  faAngleRight,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { Button } from \"react-bootstrap\";\nimport css from \"./GameControlPanelTopToolbar.module.scss\";\n\nexport interface GameControlPanelTopToolbarProps {\n  isFirstMove?: boolean;\n  isLastMove?: boolean;\n  hasPrevMove?: boolean;\n  hasNextMove?: boolean;\n  onFlipBoard?(): void;\n  onRewindToPrevMove?(): void;\n  onRewindToNextMove?(): void;\n  onRewindToFirstMove?(): void;\n  onRewindToLastMove?(): void;\n}\n\nexport const GameControlPanelTopToolbar: FC<GameControlPanelTopToolbarProps> = memo(\n  ({\n    isFirstMove = false,\n    isLastMove = false,\n    hasPrevMove = false,\n    hasNextMove = false,\n    onFlipBoard,\n    onRewindToPrevMove,\n    onRewindToNextMove,\n    onRewindToFirstMove,\n    onRewindToLastMove,\n  }) => {\n    const handleFlipBoard = useCallback(() => {\n      if (onFlipBoard) {\n        onFlipBoard();\n      }\n    }, [onFlipBoard]);\n    const handleRewindToPrevMove = useCallback(() => {\n      if (onRewindToPrevMove) {\n        onRewindToPrevMove();\n      }\n    }, [onRewindToPrevMove]);\n    const handleRewindToNextMove = useCallback(() => {\n      if (onRewindToNextMove) {\n        onRewindToNextMove();\n      }\n    }, [onRewindToNextMove]);\n    const handleRewindToFirstMove = useCallback(() => {\n      if (onRewindToFirstMove) {\n        onRewindToFirstMove();\n      }\n    }, [onRewindToFirstMove]);\n    const handleRewindToLastMove = useCallback(() => {\n      if (onRewindToLastMove) {\n        onRewindToLastMove();\n      }\n    }, [onRewindToLastMove]);\n\n    return (\n      <div className={css.buttonsWrapper}>\n        <Button\n          type=\"button\"\n          variant=\"link\"\n          data-testid=\"flip-board-btn\"\n          onClick={handleFlipBoard}\n        >\n          <FontAwesomeIcon icon={faRetweet} />\n          <span className=\"sr-only\">Flip board</span>\n        </Button>\n\n        <Button\n          type=\"button\"\n          variant=\"link\"\n          data-testid=\"rewind-to-first-move-btn\"\n          onClick={handleRewindToFirstMove}\n          disabled={isFirstMove}\n        >\n          <FontAwesomeIcon icon={faAngleDoubleLeft} />\n          <span className=\"sr-only\">Rewind to first move</span>\n        </Button>\n\n        <Button\n          type=\"button\"\n          variant=\"link\"\n          data-testid=\"rewind-to-prev-move-btn\"\n          onClick={handleRewindToPrevMove}\n          disabled={!hasPrevMove}\n        >\n          <FontAwesomeIcon icon={faAngleLeft} />\n          <span className=\"sr-only\">Rewind to prev move</span>\n        </Button>\n\n        <Button\n          type=\"button\"\n          variant=\"link\"\n          data-testid=\"rewind-to-next-move-btn\"\n          onClick={handleRewindToNextMove}\n          disabled={!hasNextMove}\n        >\n          <FontAwesomeIcon icon={faAngleRight} />\n          <span className=\"sr-only\">Rewind to next move</span>\n        </Button>\n\n        <Button\n          type=\"button\"\n          variant=\"link\"\n          data-testid=\"rewind-to-last-move-btn\"\n          onClick={handleRewindToLastMove}\n          disabled={isLastMove}\n        >\n          <FontAwesomeIcon icon={faAngleDoubleRight} />\n          <span className=\"sr-only\">Rewind to last move</span>\n        </Button>\n      </div>\n    );\n  }\n);\n","import React, { FC, memo, useCallback } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faFlag,\n  faHandshake,\n  faTimes,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { Button } from \"react-bootstrap\";\nimport css from \"./GameControlPanelBottomToolbar.module.scss\";\n\nexport interface GameControlPanelBottomToolbarProps {\n  canAbortGame?: boolean;\n  canOfferDraw?: boolean;\n  canResignGame?: boolean;\n  onAbortGame?(): void;\n  onOfferDraw?(): void;\n  onResignGame?(): void;\n}\n\nexport const GameControlPanelBottomToolbar: FC<GameControlPanelBottomToolbarProps> = memo(\n  ({\n    canAbortGame = false,\n    canOfferDraw = false,\n    canResignGame = false,\n    onAbortGame,\n    onOfferDraw,\n    onResignGame,\n  }) => {\n    const handleAbortGame = useCallback(() => {\n      if (onAbortGame) {\n        onAbortGame();\n      }\n    }, [onAbortGame]);\n    const handleOfferDraw = useCallback(() => {\n      if (onOfferDraw) {\n        onOfferDraw();\n      }\n    }, [onOfferDraw]);\n    const handleResignGame = useCallback(() => {\n      if (onResignGame) {\n        onResignGame();\n      }\n    }, [onResignGame]);\n\n    return (\n      <div className={css.buttonsWrapper}>\n        <Button\n          type=\"button\"\n          variant=\"link\"\n          data-testid=\"abort-game-btn\"\n          onClick={handleAbortGame}\n          disabled={!canAbortGame}\n        >\n          <FontAwesomeIcon icon={faTimes} />\n          <span className=\"sr-only\">Abort</span>\n        </Button>\n        <Button\n          type=\"button\"\n          variant=\"link\"\n          data-testid=\"offer-draw-btn\"\n          onClick={handleOfferDraw}\n          disabled={!canOfferDraw}\n        >\n          <FontAwesomeIcon icon={faHandshake} />\n          <span className=\"sr-only\">Offer a draw</span>\n        </Button>\n        <Button\n          type=\"button\"\n          variant=\"link\"\n          data-testid=\"resign-game-btn\"\n          onClick={handleResignGame}\n          disabled={!canResignGame}\n        >\n          <FontAwesomeIcon icon={faFlag} />\n          <span className=\"sr-only\">Resign</span>\n        </Button>\n      </div>\n    );\n  }\n);\n","import React, { FC, useCallback } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { Button } from \"react-bootstrap\";\nimport { faTimes, faCheck } from \"@fortawesome/free-solid-svg-icons\";\nimport css from \"./DrawOfferDialog.module.scss\";\n\nexport interface DrawOfferDialogProps {\n  onAccept?(): void;\n  onDecline?(): void;\n}\n\nexport const DrawOfferDialog: FC<DrawOfferDialogProps> = ({\n  onAccept,\n  onDecline,\n}) => {\n  const handleAccept = useCallback(() => {\n    if (onAccept) {\n      onAccept();\n    }\n  }, [onAccept]);\n\n  const handleDecline = useCallback(() => {\n    if (onDecline) {\n      onDecline();\n    }\n  }, [onDecline]);\n\n  return (\n    <div className={css.dialogWrapper}>\n      <Button\n        type=\"button\"\n        variant=\"link\"\n        data-testid=\"accept-btn\"\n        onClick={handleAccept}\n        className={css.acceptBtn}\n      >\n        <FontAwesomeIcon icon={faCheck} />\n        <span className=\"sr-only\">Accept</span>\n      </Button>\n\n      <Button\n        type=\"button\"\n        variant=\"link\"\n        data-testid=\"decline-btn\"\n        onClick={handleDecline}\n        className={css.declineBtn}\n      >\n        <FontAwesomeIcon icon={faTimes} />\n        <span className=\"sr-only\">Decline</span>\n      </Button>\n      <div className={css.dialogText}>Your opponent offers a draw</div>\n    </div>\n  );\n};\n","import React, { FC } from \"react\";\nimport css from \"./GameControlPanel.module.scss\";\nimport Game from \"../../interfaces/Game\";\nimport { PieceColor } from \"../../types/PieceColor\";\nimport { GameClock } from \"./GameClock\";\nimport { GameMoves } from \"./GameMoves\";\nimport { GameControlPanelUserName } from \"./GameControlPanelUserName\";\nimport { GameControlPanelTopToolbar } from \"./GameControlPanelTopToolbar\";\nimport { GameControlPanelBottomToolbar } from \"./GameControlPanelBottomToolbar\";\nimport { DrawOfferDialog } from \"./DrawOfferDialog\";\nimport { getMovesQnt } from \"../../utils/chess\";\n\nexport interface GameControlPanelProps {\n  game?: Game;\n  orientation?: PieceColor;\n  rewindToMoveIndex?: number | null;\n  canAbortGame?: boolean;\n  canDrawOffer?: boolean;\n  canOfferDraw?: boolean;\n  canResignGame?: boolean;\n  drawOfferSentByCurrentUser?: boolean;\n  drawOfferSentByOpponent?: boolean;\n  onAcceptDrawOffer?(): void;\n  onDeclineDrawOffer?(): void;\n  onRewindToMove?(moveIndex: number): void;\n  onFlipBoard?(): void;\n  onRewindToPrevMove?(): void;\n  onRewindToNextMove?(): void;\n  onRewindToFirstMove?(): void;\n  onRewindToLastMove?(): void;\n  onAbortGame?(): void;\n  onOfferDraw?(): void;\n  onResignGame?(): void;\n}\n\nexport const GameControlPanel: FC<GameControlPanelProps> = ({\n  game,\n  orientation = \"white\",\n  rewindToMoveIndex = null,\n  canAbortGame = false,\n  canOfferDraw = false,\n  canResignGame = false,\n  drawOfferSentByCurrentUser = false,\n  drawOfferSentByOpponent = false,\n  onAcceptDrawOffer,\n  onDeclineDrawOffer,\n  onRewindToMove,\n  onFlipBoard,\n  onRewindToPrevMove,\n  onRewindToNextMove,\n  onRewindToFirstMove,\n  onRewindToLastMove,\n  onAbortGame,\n  onOfferDraw,\n  onResignGame,\n}) => {\n  if (!game) {\n    return null;\n  }\n\n  const movesQnt = getMovesQnt(game);\n\n  const isFirstMove = movesQnt === 0 || rewindToMoveIndex === 0;\n\n  const isLastMove = rewindToMoveIndex === null;\n\n  const hasPrevMove = movesQnt !== 0 && rewindToMoveIndex !== 0;\n\n  const hasNextMove = rewindToMoveIndex !== null;\n\n  return (\n    <div className={css.controlPanel}>\n      <GameClock\n        time={orientation === \"white\" ? game.btime : game.wtime}\n        isRunning={game.turn !== orientation}\n      />\n      <div className={css.controlPanelInner}>\n        <GameControlPanelUserName\n          game={game}\n          color={orientation === \"white\" ? \"black\" : \"white\"}\n        />\n        <GameControlPanelTopToolbar\n          isFirstMove={isFirstMove}\n          isLastMove={isLastMove}\n          hasPrevMove={hasPrevMove}\n          hasNextMove={hasNextMove}\n          onFlipBoard={onFlipBoard}\n          onRewindToPrevMove={onRewindToPrevMove}\n          onRewindToNextMove={onRewindToNextMove}\n          onRewindToFirstMove={onRewindToFirstMove}\n          onRewindToLastMove={onRewindToLastMove}\n        />\n        <GameMoves\n          game={game}\n          rewindToMoveIndex={rewindToMoveIndex}\n          onRewindToMove={onRewindToMove}\n        />\n        {drawOfferSentByOpponent && (\n          <DrawOfferDialog\n            onAccept={onAcceptDrawOffer}\n            onDecline={onDeclineDrawOffer}\n          />\n        )}\n        {drawOfferSentByCurrentUser && (\n          <div\n            className=\"alert alert-warning text-center\"\n            role=\"alert\"\n            data-testid=\"draw-offer-sent-message\"\n          >\n            Draw offer sent\n          </div>\n        )}\n        <GameControlPanelBottomToolbar\n          canAbortGame={canAbortGame}\n          canOfferDraw={canOfferDraw}\n          canResignGame={canResignGame}\n          onAbortGame={onAbortGame}\n          onOfferDraw={onOfferDraw}\n          onResignGame={onResignGame}\n        />\n        <GameControlPanelUserName\n          game={game}\n          color={orientation === \"white\" ? \"white\" : \"black\"}\n        />\n      </div>\n      <GameClock\n        time={orientation === \"white\" ? game.wtime : game.btime}\n        isRunning={game.turn === orientation}\n      />\n    </div>\n  );\n};\n","/* eslint-disable @typescript-eslint/no-non-null-assertion */\n\nimport React, { FC, useCallback } from \"react\";\nimport Game from \"../../interfaces/Game\";\nimport { GameControlPanel } from \"./GameControlPanel\";\nimport User from \"../../interfaces/User\";\nimport { PieceColor } from \"../../types/PieceColor\";\nimport { getMovesQnt } from \"../../utils/chess\";\n\nexport interface SingleGameControlPanelWrapperProps {\n  game?: Game;\n  currentUser?: User;\n  isFlipped?: boolean;\n  rewindToMoveIndex?: number | null;\n  onFlipBoard?(): void;\n  onAcceptDrawOffer?(): void;\n  onDeclineDrawOffer?(): void;\n  onAbortGame?(): void;\n  onOfferDraw?(): void;\n  onResignGame?(): void;\n  onRewindToMove?(moveIndex: number | null): void;\n}\n\nexport const GameControlPanelWrapper: FC<SingleGameControlPanelWrapperProps> = ({\n  game,\n  currentUser,\n  isFlipped = false,\n  rewindToMoveIndex = null,\n  onFlipBoard,\n  onAcceptDrawOffer,\n  onDeclineDrawOffer,\n  onAbortGame,\n  onOfferDraw,\n  onResignGame,\n  onRewindToMove,\n}) => {\n  const gameMoves: string | null = game ? game.moves : null;\n\n  const handleRewindToMove = useCallback(\n    (moveIndex: number) => {\n      const movesQnt = getMovesQnt({\n        moves: gameMoves!,\n      });\n\n      if (onRewindToMove) {\n        if (moveIndex === movesQnt) {\n          onRewindToMove(null);\n        } else {\n          onRewindToMove(moveIndex);\n        }\n      }\n    },\n    [gameMoves, onRewindToMove]\n  );\n\n  const handleRewindToFirstMove = useCallback(() => {\n    if (onRewindToMove) {\n      onRewindToMove(0);\n    }\n  }, [onRewindToMove]);\n\n  const handleRewindToLastMove = useCallback(() => {\n    if (onRewindToMove) {\n      onRewindToMove(null);\n    }\n  }, [onRewindToMove]);\n\n  const handleRewindToPrevMove = useCallback(() => {\n    const movesQnt = getMovesQnt({\n      moves: gameMoves!,\n    });\n\n    if (onRewindToMove) {\n      if (rewindToMoveIndex === null) {\n        onRewindToMove(movesQnt - 1);\n      } else {\n        onRewindToMove(rewindToMoveIndex - 1);\n      }\n    }\n  }, [gameMoves, onRewindToMove, rewindToMoveIndex]);\n\n  const handleRewindToNextMove = useCallback(() => {\n    const movesQnt = getMovesQnt({\n      moves: gameMoves!,\n    });\n\n    if (onRewindToMove) {\n      if (rewindToMoveIndex === movesQnt - 1) {\n        onRewindToMove(null);\n      } else {\n        onRewindToMove((rewindToMoveIndex as number) + 1);\n      }\n    }\n  }, [gameMoves, onRewindToMove, rewindToMoveIndex]);\n\n  if (!game) {\n    return null;\n  }\n\n  const movesQnt = getMovesQnt(game);\n\n  let orientation: PieceColor = \"white\";\n  if (currentUser && currentUser.id === game.black?.id) {\n    orientation = \"black\";\n  }\n  if (isFlipped) {\n    orientation = orientation === \"white\" ? \"black\" : \"white\";\n  }\n\n  let playerPiecesColor: PieceColor | null = null;\n  if (currentUser) {\n    if (currentUser.id === game.white?.id) {\n      playerPiecesColor = \"white\";\n    } else if (currentUser.id === game.black?.id) {\n      playerPiecesColor = \"black\";\n    }\n  }\n\n  let drawOfferSentByCurrentUser = false;\n  if (\n    currentUser &&\n    (currentUser.id === game.white?.id || currentUser.id === game.black?.id) &&\n    game.status === \"started\" &&\n    game.drawOffer === playerPiecesColor\n  ) {\n    drawOfferSentByCurrentUser = true;\n  }\n\n  let drawOfferSentByOpponent = false;\n  if (\n    currentUser &&\n    (currentUser.id === game.white?.id || currentUser.id === game.black?.id) &&\n    game.status === \"started\" &&\n    game.drawOffer !== null &&\n    game.drawOffer !== playerPiecesColor\n  ) {\n    drawOfferSentByOpponent = true;\n  }\n\n  let canAbortGame = false;\n  if (\n    currentUser &&\n    (currentUser.id === game.white?.id || currentUser.id === game.black?.id) &&\n    game.status === \"started\" &&\n    movesQnt < 2\n  ) {\n    canAbortGame = true;\n  }\n\n  let canResignGame = false;\n  if (\n    currentUser &&\n    (currentUser.id === game.white?.id || currentUser.id === game.black?.id) &&\n    game.status === \"started\" &&\n    movesQnt > 1\n  ) {\n    canResignGame = true;\n  }\n\n  let canOfferDraw = false;\n  if (\n    currentUser &&\n    (currentUser.id === game.white?.id || currentUser.id === game.black?.id) &&\n    game.drawOffer === null &&\n    game.aiLevel === 0 &&\n    game.status === \"started\" &&\n    movesQnt > 1\n  ) {\n    canOfferDraw = true;\n  }\n\n  return (\n    <GameControlPanel\n      game={game}\n      orientation={orientation}\n      rewindToMoveIndex={rewindToMoveIndex}\n      canAbortGame={canAbortGame}\n      canResignGame={canResignGame}\n      canOfferDraw={canOfferDraw}\n      drawOfferSentByCurrentUser={drawOfferSentByCurrentUser}\n      drawOfferSentByOpponent={drawOfferSentByOpponent}\n      onAcceptDrawOffer={onAcceptDrawOffer}\n      onDeclineDrawOffer={onDeclineDrawOffer}\n      onFlipBoard={onFlipBoard}\n      onAbortGame={onAbortGame}\n      onOfferDraw={onOfferDraw}\n      onResignGame={onResignGame}\n      onRewindToMove={handleRewindToMove}\n      onRewindToFirstMove={handleRewindToFirstMove}\n      onRewindToLastMove={handleRewindToLastMove}\n      onRewindToPrevMove={handleRewindToPrevMove}\n      onRewindToNextMove={handleRewindToNextMove}\n    />\n  );\n};\n","import React, { FC, useCallback } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { denormalize } from \"normalizr\";\nimport {\n  useDeepEqualSelector,\n  useShallowEqualSelector,\n} from \"ii-react-libraries\";\nimport { RootState } from \"../../app/rootReducer\";\nimport gameSchema from \"../../normalizr/schemas/gameSchema\";\nimport { GameControlPanelWrapper } from \"./GameControlPanelWrapper\";\nimport User from \"../../interfaces/User\";\nimport userSchema from \"../../normalizr/schemas/userSchema\";\nimport {\n  abortGame,\n  acceptDrawOffer,\n  declineDrawOffer,\n  defaultSingleGameItemState,\n  flipBoard,\n  offerDraw,\n  resignGame,\n  rewindToMove,\n} from \"./singleGameSlice\";\nimport { AppDispatch } from \"../../app/store\";\n\nexport interface SingleGameControlPanelContainerProps {\n  id: number;\n}\n\nexport const GameControlPanelContainer: FC<SingleGameControlPanelContainerProps> = ({\n  id,\n}) => {\n  const dispatch = useDispatch<AppDispatch>();\n\n  const game = useDeepEqualSelector((state: RootState) =>\n    denormalize(id, gameSchema, state.entities)\n  );\n\n  const singleGameItemState =\n    useSelector((state: RootState) => state.singleGame[id]) ||\n    defaultSingleGameItemState;\n\n  const currentUser: User | undefined = useShallowEqualSelector(\n    (state: RootState) => {\n      if (state.currentUser.userId) {\n        return denormalize(\n          state.currentUser.userId,\n          userSchema,\n          state.entities\n        );\n      }\n      return undefined;\n    }\n  );\n\n  const handleFlipBoard = useCallback(() => {\n    dispatch(flipBoard(id));\n  }, [dispatch, id]);\n\n  const handleAbortGame = useCallback(() => {\n    dispatch(abortGame(id));\n  }, [dispatch, id]);\n\n  const handleAcceptDrawOffer = useCallback(() => {\n    dispatch(acceptDrawOffer(id));\n  }, [dispatch, id]);\n\n  const handleDeclineDrawOffer = useCallback(() => {\n    dispatch(declineDrawOffer(id));\n  }, [dispatch, id]);\n\n  const handleResignGame = useCallback(() => {\n    dispatch(resignGame(id));\n  }, [dispatch, id]);\n\n  const handleOfferDraw = useCallback(() => {\n    dispatch(offerDraw(id));\n  }, [dispatch, id]);\n\n  const handleRewindToMove = useCallback(\n    (moveIndex: number | null) => {\n      dispatch(\n        rewindToMove({\n          moveIndex,\n          gameId: id,\n        })\n      );\n    },\n    [dispatch, id]\n  );\n\n  if (game) {\n    return (\n      <GameControlPanelWrapper\n        game={game}\n        currentUser={currentUser}\n        isFlipped={singleGameItemState.isFlipped}\n        rewindToMoveIndex={singleGameItemState.rewindToMoveIndex}\n        onFlipBoard={handleFlipBoard}\n        onAbortGame={handleAbortGame}\n        onAcceptDrawOffer={handleAcceptDrawOffer}\n        onDeclineDrawOffer={handleDeclineDrawOffer}\n        onOfferDraw={handleOfferDraw}\n        onResignGame={handleResignGame}\n        onRewindToMove={handleRewindToMove}\n      />\n    );\n  }\n  return null;\n};\n","import React, { FC } from \"react\";\nimport classNames from \"classnames\";\nimport { Modal } from \"react-bootstrap\";\nimport { PieceType } from \"chess.js\";\nimport { PieceColor } from \"../../types/PieceColor\";\nimport css from \"./PromotionChoiceModal.module.scss\";\n\nexport interface PromotionChoiceModalProps {\n  show?: boolean;\n  turnColor?: PieceColor;\n  onPromotion?: (promotionPiece: Exclude<PieceType, \"p\">) => void;\n}\n\nexport const PromotionChoiceModal: FC<PromotionChoiceModalProps> = ({\n  show = false,\n  turnColor = \"white\",\n  onPromotion,\n}) => {\n  const makePromotionHandler = (promotionPiece: Exclude<PieceType, \"p\">) => {\n    return () => {\n      if (onPromotion) {\n        onPromotion(promotionPiece);\n      }\n    };\n  };\n\n  return (\n    <Modal show={show} animation={false} backdrop=\"static\">\n      <Modal.Body>\n        <div style={{ textAlign: \"center\", cursor: \"pointer\" }}>\n          <span\n            data-testid=\"promotion-q\"\n            role=\"presentation\"\n            onClick={makePromotionHandler(\"q\")}\n          >\n            <div\n              className={classNames(css.piece, {\n                [css.wQ]: turnColor === \"white\",\n                [css.bQ]: turnColor === \"black\",\n              })}\n            />\n          </span>\n          <span\n            data-testid=\"promotion-r\"\n            role=\"presentation\"\n            onClick={makePromotionHandler(\"r\")}\n          >\n            <div\n              className={classNames(css.piece, {\n                [css.wR]: turnColor === \"white\",\n                [css.bR]: turnColor === \"black\",\n              })}\n            />\n          </span>\n          <span\n            data-testid=\"promotion-b\"\n            role=\"presentation\"\n            onClick={makePromotionHandler(\"b\")}\n          >\n            <div\n              className={classNames(css.piece, {\n                [css.wB]: turnColor === \"white\",\n                [css.bB]: turnColor === \"black\",\n              })}\n            />\n          </span>\n          <span\n            data-testid=\"promotion-n\"\n            role=\"presentation\"\n            onClick={makePromotionHandler(\"n\")}\n          >\n            <div\n              className={classNames(css.piece, {\n                [css.wN]: turnColor === \"white\",\n                [css.bN]: turnColor === \"black\",\n              })}\n            />\n          </span>\n        </div>\n      </Modal.Body>\n    </Modal>\n  );\n};\n","/* eslint-disable @typescript-eslint/no-non-null-assertion */\n\nimport React, { FC, useCallback, useEffect, useRef, useState } from \"react\";\nimport {\n  Board,\n  getValidMoves,\n  isValidMove,\n  Move,\n  PieceColor,\n  ValidMoves,\n} from \"ii-react-chessboard\";\nimport { ChessInstance, PieceType, ShortMove, Square } from \"chess.js\";\nimport Game from \"../../interfaces/Game\";\nimport makeChessInstance from \"../../utils/makeChessInstance\";\nimport User from \"../../interfaces/User\";\nimport css from \"./SingleGameBoard.module.scss\";\nimport { ContentLoadingStatus } from \"../../components/ContentLoadingStatus\";\nimport GameStatus from \"../../types/GameStatus\";\nimport {\n  playEndGameSound,\n  playMoveSound,\n  playStartGameSound,\n} from \"../../utils/sounds\";\nimport { getMovesQnt, isPromotionMove } from \"../../utils/chess\";\nimport { PromotionChoiceModal } from \"./PromotionChoiceModal\";\n\nexport interface SingleGameBoardProps {\n  currentUser?: User;\n  game?: Game;\n  isFlipped?: boolean;\n  onMove?(move: ShortMove): void;\n  rewindToMoveIndex?: number | null;\n  isLoading?: boolean;\n  error?: string | null;\n}\n\nexport const SingleGameBoard: FC<SingleGameBoardProps> = ({\n  currentUser,\n  game,\n  isFlipped = false,\n  onMove,\n  rewindToMoveIndex = null,\n  isLoading = false,\n  error = null,\n}) => {\n  const premove = useRef<[Move, () => void, () => void] | null>(null);\n\n  // @todo. test useEffect\n  const lastStatus = useRef<GameStatus | null>(null);\n  useEffect(() => {\n    if (!game) {\n      return;\n    }\n\n    if (lastStatus.current === \"started\" && game.status !== \"started\") {\n      playEndGameSound();\n    }\n    lastStatus.current = game.status;\n  }, [game, lastStatus]);\n\n  // cancel premove if game is over or if we rewind moves\n  // @todo. test useEffect\n  useEffect(() => {\n    if (!game) {\n      return;\n    }\n\n    if (\n      premove.current &&\n      (game.status !== \"started\" || rewindToMoveIndex !== null)\n    ) {\n      premove.current[2](); // cancelPremove()\n    }\n  }, [game, rewindToMoveIndex]);\n\n  // @todo. test useEffect\n  const lastSelectedMoveIndex = useRef<number | null>(null);\n  useEffect(() => {\n    if (!game) {\n      return;\n    }\n\n    const movesQnt = getMovesQnt(game);\n\n    if (lastSelectedMoveIndex.current === null && movesQnt === 0) {\n      playStartGameSound();\n    }\n\n    const selectedMoveIndex =\n      rewindToMoveIndex === null ? movesQnt : rewindToMoveIndex;\n\n    if (\n      lastSelectedMoveIndex.current !== null &&\n      selectedMoveIndex === lastSelectedMoveIndex.current + 1\n    ) {\n      playMoveSound();\n    }\n\n    lastSelectedMoveIndex.current = selectedMoveIndex;\n  }, [game, lastSelectedMoveIndex, rewindToMoveIndex]);\n\n  // play premove\n  // @todo. test useEffect\n  const lastMovesQnt = useRef<number | null>(null);\n  useEffect(() => {\n    if (!game) {\n      return;\n    }\n\n    const movesQnt = getMovesQnt(game);\n\n    if (\n      premove.current &&\n      lastMovesQnt.current !== null &&\n      movesQnt === lastMovesQnt.current + 1 &&\n      game.status === \"started\" &&\n      rewindToMoveIndex === null\n    ) {\n      const chess: ChessInstance = makeChessInstance(game);\n\n      if (isValidMove(chess, premove.current[0])) {\n        premove.current[1](); // playPremove()\n        premove.current = null;\n      } else {\n        premove.current[2](); // cancelPremove()\n      }\n    }\n\n    lastMovesQnt.current = movesQnt;\n  }, [game, lastMovesQnt, rewindToMoveIndex]);\n\n  const handleSetPremove = useCallback(\n    (move: Move, playPremove: () => void, cancelPremove: () => void) => {\n      premove.current = [move, playPremove, cancelPremove];\n    },\n    [premove]\n  );\n\n  const handleUnsetPremove = useCallback(() => {\n    premove.current = null;\n  }, [premove]);\n\n  const [showPromotionChoice, setShowPromotionChoice] = useState<boolean>(\n    false\n  );\n\n  // @todo. test useEffect\n  useEffect(() => {\n    if (!game) {\n      return;\n    }\n\n    if (showPromotionChoice && game.status !== \"started\") {\n      setShowPromotionChoice(false);\n    }\n  }, [showPromotionChoice, game]);\n\n  const promotionMove = useRef<Move | null>(null);\n\n  const handleMove = useCallback(\n    (move: Move) => {\n      if (!onMove) {\n        return;\n      }\n\n      if (isPromotionMove(game!, move)) {\n        setShowPromotionChoice(true);\n        promotionMove.current = move;\n      } else {\n        onMove(move as ShortMove);\n      }\n    },\n    [onMove, game]\n  );\n\n  const handlePromotion = useCallback(\n    (promotionPiece: Exclude<PieceType, \"p\">): void => {\n      setShowPromotionChoice(false);\n\n      const chess: ChessInstance = makeChessInstance(game!);\n\n      if (\n        onMove &&\n        promotionMove.current &&\n        isValidMove(chess, promotionMove.current)\n      ) {\n        const move: ShortMove = {\n          from: promotionMove.current.from as Square,\n          to: promotionMove.current.to as Square,\n          promotion: promotionPiece,\n        };\n        onMove(move);\n      }\n    },\n    [onMove, game]\n  );\n\n  let boardContent = null;\n\n  if (game) {\n    const chessWithAllMoves: ChessInstance = makeChessInstance(game);\n\n    const chess =\n      rewindToMoveIndex === null\n        ? chessWithAllMoves\n        : makeChessInstance(game, rewindToMoveIndex);\n\n    const fen: string = chess.fen();\n\n    const check: boolean = chess.in_check();\n\n    const turnColor: PieceColor = game.turn;\n\n    const validMoves: ValidMoves = getValidMoves(chess);\n\n    let viewOnly = true;\n    if (\n      currentUser &&\n      (currentUser.id === game.white?.id ||\n        currentUser.id === game.black?.id) &&\n      game.status === \"started\" &&\n      rewindToMoveIndex === null\n    ) {\n      viewOnly = false;\n    }\n\n    let movableColor: PieceColor | undefined;\n    if (currentUser && currentUser.id === game.white?.id) {\n      movableColor = \"white\";\n    }\n    if (currentUser && currentUser.id === game.black?.id) {\n      movableColor = \"black\";\n    }\n\n    let orientation: PieceColor = \"white\";\n    if (currentUser && currentUser.id === game.black?.id) {\n      orientation = \"black\";\n    }\n    if (isFlipped) {\n      orientation = orientation === \"white\" ? \"black\" : \"white\";\n    }\n\n    const movesHistory = chessWithAllMoves.history({ verbose: true });\n\n    let lastMoveSquares: string[] | undefined;\n    if (rewindToMoveIndex === null) {\n      if (movesHistory.length) {\n        const lastMove = movesHistory[movesHistory.length - 1];\n        lastMoveSquares = [lastMove.from, lastMove.to];\n      }\n    } else if (rewindToMoveIndex > 0) {\n      const lastMove = movesHistory[rewindToMoveIndex - 1];\n      lastMoveSquares = [lastMove.from, lastMove.to];\n    }\n\n    boardContent = (\n      <>\n        <PromotionChoiceModal\n          show={showPromotionChoice}\n          turnColor={game.turn}\n          onPromotion={handlePromotion}\n        />\n        <div className={css.singleGameBoard}>\n          <Board\n            allowMarkers\n            check={check}\n            clickable\n            draggable\n            lastMoveSquares={lastMoveSquares}\n            movableColor={movableColor}\n            onMove={handleMove}\n            onSetPremove={handleSetPremove}\n            onUnsetPremove={handleUnsetPremove}\n            orientation={orientation}\n            position={fen}\n            premovable\n            turnColor={turnColor}\n            validMoves={validMoves}\n            viewOnly={viewOnly}\n          />\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <div>\n      <ContentLoadingStatus\n        isLoading={isLoading}\n        error={error}\n        isEmpty={!game}\n      />\n      {boardContent}\n    </div>\n  );\n};\n","export const playStartGameSound = (): void => {\n  const audio = new Audio(\n    \"https://lichess1.org/assets/_Iu1lae/sound/standard/GenericNotify.ogg\"\n  );\n\n  // sometimes if I reload page in browser I get this error:\n  // \"play() failed because the user didn't interact with the document first. https://goo.gl/xX8pDD \"\n  // This is why we use catch(() => {})\n  audio.play().catch(() => {});\n};\n\nexport const playEndGameSound = (): void => {\n  const audio = new Audio(\n    \"https://lichess1.org/assets/_Iu1lae/sound/standard/GenericNotify.ogg\"\n  );\n  audio.play();\n};\n\nexport const playMoveSound = (): void => {\n  const audio = new Audio(\n    \"https://lichess1.org/assets/sound/standard/Move.ogg\"\n  );\n  audio.play();\n};\n","import React, { FC, useCallback } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { ShortMove } from \"chess.js\";\nimport { denormalize } from \"normalizr\";\nimport {\n  useDeepEqualSelector,\n  useShallowEqualSelector,\n} from \"ii-react-libraries\";\nimport { RootState } from \"../../app/rootReducer\";\nimport gameSchema from \"../../normalizr/schemas/gameSchema\";\nimport { SingleGameBoard } from \"./SingleGameBoard\";\nimport User from \"../../interfaces/User\";\nimport userSchema from \"../../normalizr/schemas/userSchema\";\nimport { defaultSingleGameItemState } from \"./singleGameSlice\";\nimport { makeMove } from \"../move/moveSlice\";\nimport { AppDispatch } from \"../../app/store\";\n\nexport interface SingleGameBoardProps {\n  id: number;\n}\n\nexport const SingleGameBoardContainer: FC<SingleGameBoardProps> = ({ id }) => {\n  const dispatch = useDispatch<AppDispatch>();\n\n  const game = useDeepEqualSelector(\n    (state: RootState) => denormalize(id, gameSchema, state.entities),\n    (_value: unknown, _other: unknown, indexOrKey: unknown) => {\n      // ignore time to improve performance\n      if (indexOrKey === \"wtime\" || indexOrKey === \"btime\") {\n        return true;\n      }\n      return undefined;\n    }\n  );\n\n  const currentUser: User | undefined = useShallowEqualSelector(\n    (state: RootState) => {\n      if (state.currentUser.userId) {\n        return denormalize(\n          state.currentUser.userId,\n          userSchema,\n          state.entities\n        );\n      }\n      return undefined;\n    }\n  );\n\n  const singleGameItemState =\n    useSelector((state: RootState) => state.singleGame[id]) ||\n    defaultSingleGameItemState;\n\n  const handleMove = useCallback(\n    (move: ShortMove) => {\n      dispatch(makeMove(id, `${move.from}${move.to}${move.promotion || \"\"}`));\n    },\n    [dispatch, id]\n  );\n\n  return (\n    <SingleGameBoard\n      game={game}\n      currentUser={currentUser}\n      isFlipped={singleGameItemState.isFlipped}\n      rewindToMoveIndex={singleGameItemState.rewindToMoveIndex}\n      onMove={handleMove}\n      isLoading={singleGameItemState.isLoading}\n      error={singleGameItemState.error}\n    />\n  );\n};\n","import React, { FC } from \"react\";\nimport cx from \"classnames\";\nimport { ChatMessage } from \"../../interfaces/ChatMessage\";\nimport css from \"./ChatMessagesListItem.module.scss\";\n\nexport interface ChatMessagesListItemProps {\n  message?: ChatMessage;\n  currentUserId?: number | null;\n}\n\nexport const ChatMessagesListItem: FC<ChatMessagesListItemProps> = ({\n  message,\n  currentUserId = null,\n}) => {\n  if (!message) {\n    return null;\n  }\n\n  return (\n    <div\n      data-testid=\"message-wrapper\"\n      className={cx(css.messageWrapper, {\n        [css.currentUserMessage]: message.createdBy.id === currentUserId,\n      })}\n    >\n      <span data-testid=\"user-name\" className={css.userName}>\n        {message.createdBy.fullName}\n      </span>\n      <span data-testid=\"message-text\" className={css.messageText}>\n        {message.text}\n      </span>\n    </div>\n  );\n};\n","import React, { FC, useEffect, useRef } from \"react\";\nimport { ChatMessage } from \"../../interfaces/ChatMessage\";\nimport { ChatMessagesListItem } from \"./ChatMessagesListItem\";\nimport { ContentLoadingStatus } from \"../../components/ContentLoadingStatus\";\nimport css from \"./ChatMessagesList.module.scss\";\n\nexport interface ChatMessagesListProps {\n  currentUserId?: number | null;\n  messages?: ChatMessage[];\n  isLoading?: boolean;\n  error?: string | null;\n}\n\nexport const ChatMessagesList: FC<ChatMessagesListProps> = ({\n  currentUserId = null,\n  messages = [],\n  isLoading = false,\n  error = null,\n}) => {\n  const scrollElementRef = useRef<HTMLDivElement>(null);\n  const lastMovesQnt = useRef<number>(0);\n\n  // @todo. add unit test\n  useEffect(() => {\n    if (lastMovesQnt.current !== messages.length) {\n      if (scrollElementRef.current) {\n        scrollElementRef.current.scrollTop =\n          scrollElementRef.current.scrollHeight;\n      }\n    }\n    lastMovesQnt.current = messages.length;\n  }, [scrollElementRef, messages]);\n\n  return (\n    <div className={css.chatMessages} ref={scrollElementRef}>\n      <ContentLoadingStatus\n        isLoading={isLoading}\n        error={error}\n        isEmpty={messages.length === 0}\n        showEmptyContentMessage={false}\n      />\n      <div>\n        {messages.map((item) => (\n          <ChatMessagesListItem\n            currentUserId={currentUserId}\n            message={item}\n            key={item.id}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n","import React, { FC } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { denormalize } from \"normalizr\";\nimport { useDeepEqualSelector } from \"ii-react-libraries\";\nimport { RootState } from \"../../app/rootReducer\";\nimport chatMessageSchema from \"../../normalizr/schemas/chatMessageSchema\";\nimport { defaultGameChatMessagesState } from \"./chatSlice\";\nimport { ChatMessagesList } from \"./ChatMessagesList\";\n\nexport interface ChatMessagesListContainerProps {\n  gameId: number;\n}\n\nexport const ChatMessagesListContainer: FC<ChatMessagesListContainerProps> = ({\n  gameId,\n}) => {\n  const currentUserId = useSelector(\n    (state: RootState) => state.currentUser.userId\n  );\n\n  const messages = useDeepEqualSelector((state: RootState) =>\n    state.chat[gameId]\n      ? denormalize(\n          state.chat[gameId].items,\n          [chatMessageSchema],\n          state.entities\n        )\n      : defaultGameChatMessagesState.items\n  );\n  const isLoading = useSelector((state: RootState) =>\n    state.chat[gameId]\n      ? state.chat[gameId].isLoading\n      : defaultGameChatMessagesState.isLoading\n  );\n  const error = useSelector((state: RootState) =>\n    state.chat[gameId]\n      ? state.chat[gameId].error\n      : defaultGameChatMessagesState.error\n  );\n\n  return (\n    <ChatMessagesList\n      messages={messages}\n      isLoading={isLoading}\n      error={error}\n      currentUserId={currentUserId}\n    />\n  );\n};\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport React, { FC, FormEvent } from \"react\";\nimport { Formik, FormikHelpers } from \"formik\";\nimport { Button, Form, Spinner } from \"react-bootstrap\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPaperPlane } from \"@fortawesome/free-solid-svg-icons\";\nimport css from \"./PostChatMessageForm.module.scss\";\n\nexport interface PostChatMessageFormData {\n  text: string;\n}\n\nexport interface PostChatMessageFormProps {\n  onSubmit?(\n    values: PostChatMessageFormData,\n    formikHelpers: FormikHelpers<PostChatMessageFormData>\n  ): void | Promise<any>;\n}\n\nexport const PostChatMessageForm: FC<PostChatMessageFormProps> = ({\n  onSubmit,\n}) => {\n  return (\n    <Formik\n      initialValues={{\n        text: \"\",\n      }}\n      onSubmit={(values, formikHelpers): Promise<any> | void => {\n        if (onSubmit) {\n          return onSubmit(\n            values as PostChatMessageFormData,\n            formikHelpers as FormikHelpers<PostChatMessageFormData>\n          );\n        }\n        return undefined;\n      }}\n    >\n      {({\n        values,\n        handleChange,\n        handleBlur,\n        handleSubmit,\n        isSubmitting,\n        setStatus,\n      }) => (\n        <Form\n          noValidate\n          onSubmit={(e) => handleSubmit(e as FormEvent<HTMLFormElement>)}\n          onChange={() => setStatus(\"\")}\n        >\n          <div className=\"d-flex\">\n            <div className=\"flex-grow-1 mr-2\">\n              <Form.Control\n                className={css.textInput}\n                name=\"text\"\n                autoComplete=\"off\"\n                placeholder=\"Please be nice in the chat!\"\n                onBlur={handleBlur}\n                value={values.text}\n                onChange={handleChange}\n              />\n            </div>\n            <div>\n              <Button\n                disabled={isSubmitting || values.text === \"\"}\n                type=\"submit\"\n              >\n                {isSubmitting && (\n                  <Spinner\n                    animation=\"border\"\n                    data-testid=\"submit-btn-spinner\"\n                    size=\"sm\"\n                    className=\"mr-2\"\n                  >\n                    <span className=\"sr-only\">Sending...</span>\n                  </Spinner>\n                )}\n                <FontAwesomeIcon icon={faPaperPlane} />\n                <span className=\"sr-only\">Offer a draw</span>\n              </Button>\n            </div>\n          </div>\n        </Form>\n      )}\n    </Formik>\n  );\n};\n","import { FormikHelpers } from \"formik\";\nimport React, { FC, useCallback } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { AppDispatch } from \"../../app/store\";\nimport {\n  PostChatMessageForm,\n  PostChatMessageFormData,\n} from \"./PostChatMessageForm\";\nimport { createChatMessage } from \"./chatSlice\";\n\nexport interface PostChatMessageFormContainerProps {\n  gameId: number;\n}\n\nexport const PostChatMessageFormContainer: FC<PostChatMessageFormContainerProps> = ({\n  gameId,\n}) => {\n  const dispatch = useDispatch<AppDispatch>();\n\n  const handleSubmit = useCallback(\n    (\n      values: PostChatMessageFormData,\n      formikHelpers: FormikHelpers<PostChatMessageFormData>\n    ) => {\n      formikHelpers.resetForm();\n\n      return dispatch(createChatMessage(gameId, values.text));\n    },\n    [dispatch, gameId]\n  );\n\n  return <PostChatMessageForm onSubmit={handleSubmit} />;\n};\n","import React, { FC } from \"react\";\nimport { Card } from \"react-bootstrap\";\nimport { ChatMessagesListContainer } from \"./ChatMessagesListContainer\";\nimport { PostChatMessageFormContainer } from \"./PostChatMessageFormContainer\";\n\nexport interface ChatProps {\n  gameId: number;\n}\n\nexport const Chat: FC<ChatProps> = ({ gameId }) => {\n  return (\n    <Card>\n      <Card.Header className=\"p-2\">Chat room</Card.Header>\n      <Card.Body className=\"p-2\">\n        <ChatMessagesListContainer gameId={gameId} />\n      </Card.Body>\n      <Card.Footer className=\"p-2\">\n        <PostChatMessageFormContainer gameId={gameId} />\n      </Card.Footer>\n    </Card>\n  );\n};\n","import React, { FC, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport { GameMetaContainer } from \"./GameMetaContainer\";\nimport { GameControlPanelContainer } from \"./GameControlPanelContainer\";\nimport { SingleGameBoardContainer } from \"./SingleGameBoardContainer\";\nimport { fetchGame } from \"./singleGameSlice\";\nimport { AppDispatch } from \"../../app/store\";\nimport { Chat } from \"../chat/Chat\";\nimport { fetchChatMessages } from \"../chat/chatSlice\";\n\ninterface GamePageParams {\n  id: string;\n}\n\nconst GamePage: FC<unknown> = () => {\n  const dispatch = useDispatch<AppDispatch>();\n\n  const { id } = useParams<GamePageParams>();\n\n  const idAsNumber = Number(id);\n\n  useEffect(() => {\n    dispatch(fetchGame(idAsNumber));\n    dispatch(fetchChatMessages(idAsNumber));\n  }, [dispatch, idAsNumber]);\n\n  return (\n    <div className=\"row\">\n      <div className=\"col-3\">\n        <GameMetaContainer id={idAsNumber} />\n\n        <Chat gameId={idAsNumber} />\n      </div>\n      <div className=\"col-6\">\n        <SingleGameBoardContainer id={idAsNumber} />\n      </div>\n      <div className=\"col-3\">\n        <GameControlPanelContainer id={idAsNumber} />\n      </div>\n    </div>\n  );\n};\n\nexport default GamePage;\n","import React, { FC, useCallback } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Button } from \"react-bootstrap\";\nimport User from \"../../interfaces/User\";\n\nexport interface HeaderProps {\n  currentUser?: User | null;\n  onLogout?(): void;\n  onShowAuthModal?(): void;\n}\n\nexport const Header: FC<HeaderProps> = ({\n  currentUser = null,\n  onLogout,\n  onShowAuthModal,\n}) => {\n  const handleLogout = useCallback(() => {\n    if (onLogout) {\n      onLogout();\n    }\n  }, [onLogout]);\n\n  const handleShowAuthModal = useCallback(() => {\n    if (onShowAuthModal) {\n      onShowAuthModal();\n    }\n  }, [onShowAuthModal]);\n\n  return (\n    <header className=\"d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom box-shadow\">\n      <div className=\"offset-4 col-4 text-center\">\n        <Link className=\"blog-header-logo text-dark\" to=\"/\">\n          Chess PWA\n        </Link>\n      </div>\n      <div className=\"col-4 d-flex justify-content-end align-items-center\">\n        {currentUser ? (\n          <>\n            <div className=\"mr-3\">Hi, {currentUser.fullName}</div>\n            <Button\n              className=\"btn btn-sm btn-danger mr-3\"\n              data-testid=\"logout-btn\"\n              onClick={handleLogout}\n            >\n              Logout\n            </Button>\n          </>\n        ) : (\n          <Button\n            className=\"btn btn-sm btn-success mr-3\"\n            data-testid=\"login-btn\"\n            onClick={handleShowAuthModal}\n          >\n            Login / Register\n          </Button>\n        )}\n\n        <a\n          href=\"https://github.com/ildar-icoosoft/chess-pwa\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          <img\n            src={`${process.env.PUBLIC_URL}/imgs/GitHub-Mark-32px.png`}\n            alt=\"\"\n          />\n        </a>\n      </div>\n    </header>\n  );\n};\n","import React, { FC, useCallback } from \"react\";\nimport { denormalize } from \"normalizr\";\nimport { useDispatch } from \"react-redux\";\nimport { useShallowEqualSelector } from \"ii-react-libraries\";\nimport { Header } from \"./Header\";\nimport User from \"../../interfaces/User\";\nimport { RootState } from \"../../app/rootReducer\";\nimport userSchema from \"../../normalizr/schemas/userSchema\";\nimport { logout } from \"../current-user/currentUserSlice\";\nimport { showModal } from \"../modal/modalSlice\";\n\nconst HeaderContainer: FC<unknown> = () => {\n  const currentUser: User | null = useShallowEqualSelector(\n    (state: RootState) => {\n      if (state.currentUser.userId) {\n        return denormalize(\n          state.currentUser.userId,\n          userSchema,\n          state.entities\n        );\n      }\n      return null;\n    }\n  );\n\n  const dispatch = useDispatch();\n\n  const handleLogout = useCallback(() => {\n    dispatch(logout());\n  }, [dispatch]);\n\n  const handleShowAuthModal = useCallback(() => {\n    dispatch(\n      showModal({\n        name: \"auth\",\n        allowClose: true,\n      })\n    );\n  }, [dispatch]);\n\n  return (\n    <Header\n      currentUser={currentUser}\n      onLogout={handleLogout}\n      onShowAuthModal={handleShowAuthModal}\n    />\n  );\n};\n\nexport default HeaderContainer;\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport React, { FC, FormEvent } from \"react\";\nimport { Formik, FormikHelpers } from \"formik\";\nimport { Alert, Button, Form } from \"react-bootstrap\";\nimport * as Yup from \"yup\";\nimport LoginData from \"../../interfaces/LoginData\";\n\nconst loginSchema = Yup.object().shape({\n  email: Yup.string().email(\"Invalid email\").required(\"Required\"),\n  password: Yup.string()\n    .min(6, \"Password length must be >= 6\")\n    .required(\"Required\"),\n});\n\nexport interface LoginFormProps {\n  onSubmit?(\n    values: LoginData,\n    formikHelpers: FormikHelpers<LoginData>\n  ): void | Promise<any>;\n}\n\nexport const LoginForm: FC<LoginFormProps> = ({ onSubmit }) => {\n  return (\n    <Formik\n      initialValues={{ email: \"\", password: \"\" }}\n      validationSchema={loginSchema}\n      onSubmit={(values, formikHelpers): Promise<any> | void => {\n        if (onSubmit) {\n          return onSubmit(values as LoginData, formikHelpers);\n        }\n        return undefined;\n      }}\n    >\n      {({\n        errors,\n        values,\n        touched,\n        handleChange,\n        handleBlur,\n        handleSubmit,\n        isSubmitting,\n        status,\n        setStatus,\n        /* and other goodies */\n      }) => (\n        <Form\n          noValidate\n          onSubmit={(e) => handleSubmit(e as FormEvent<HTMLFormElement>)}\n          onChange={() => setStatus(\"\")}\n        >\n          {!!status && <Alert variant=\"danger\">{status}</Alert>}\n          <Form.Group>\n            <Form.Label>Email address</Form.Label>\n            <Form.Control\n              type=\"email\"\n              name=\"email\"\n              placeholder=\"Enter email\"\n              onBlur={handleBlur}\n              value={values.email}\n              onChange={handleChange}\n              isValid={touched.email && !errors.email}\n              isInvalid={touched.email && !!errors.email}\n            />\n            <Form.Control.Feedback type=\"invalid\">\n              {errors.email}\n            </Form.Control.Feedback>\n          </Form.Group>\n\n          <Form.Group>\n            <Form.Label>Password</Form.Label>\n            <Form.Control\n              type=\"password\"\n              name=\"password\"\n              placeholder=\"Password\"\n              onChange={handleChange}\n              onBlur={handleBlur}\n              value={values.password}\n              isValid={touched.password && !errors.password}\n              isInvalid={touched.password && !!errors.password}\n            />\n            <Form.Control.Feedback type=\"invalid\">\n              {errors.password}\n            </Form.Control.Feedback>\n          </Form.Group>\n          <Button variant=\"primary\" type=\"submit\" disabled={isSubmitting}>\n            Login\n          </Button>\n        </Form>\n      )}\n    </Formik>\n  );\n};\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport React, { FC, FormEvent } from \"react\";\nimport { Formik } from \"formik\";\nimport { Alert, Button, Form } from \"react-bootstrap\";\nimport * as Yup from \"yup\";\nimport { FormikHelpers } from \"formik/dist/types\";\n\nconst registrationSchema = Yup.object().shape({\n  fullName: Yup.string().required(\"Required\"),\n  email: Yup.string().email(\"Invalid email\").required(\"Required\"),\n  password: Yup.string()\n    .min(6, \"Password length must be >= 6\")\n    .required(\"Required\"),\n  confirmPassword: Yup.string()\n    .equals([Yup.ref(\"password\")], \"Please repeat the password\")\n    .required(\"Required\"),\n});\n\nexport interface RegistrationFormData {\n  fullName: string;\n  email: string;\n  password: string;\n  confirmPassword: string;\n}\n\nexport interface RegistrationFormProps {\n  onSubmit?(\n    values: RegistrationFormData,\n    formikHelpers: FormikHelpers<RegistrationFormData>\n  ): void | Promise<any>;\n}\n\nexport const RegistrationForm: FC<RegistrationFormProps> = ({ onSubmit }) => {\n  return (\n    <Formik\n      initialValues={{\n        fullName: \"\",\n        email: \"\",\n        password: \"\",\n        confirmPassword: \"\",\n      }}\n      validationSchema={registrationSchema}\n      onSubmit={(values, formikHelpers): Promise<any> | void => {\n        if (onSubmit) {\n          return onSubmit(values as RegistrationFormData, formikHelpers);\n        }\n        return undefined;\n      }}\n    >\n      {({\n        errors,\n        values,\n        touched,\n        handleChange,\n        handleBlur,\n        handleSubmit,\n        isSubmitting,\n        status,\n        setStatus,\n        /* and other goodies */\n      }) => (\n        <Form\n          noValidate\n          onSubmit={(e) => handleSubmit(e as FormEvent<HTMLFormElement>)}\n          onChange={() => setStatus(\"\")}\n        >\n          {!!status && <Alert variant=\"danger\">{status}</Alert>}\n\n          <Form.Group>\n            <Form.Label>Full name</Form.Label>\n            <Form.Control\n              type=\"text\"\n              name=\"fullName\"\n              placeholder=\"Enter full name\"\n              onBlur={handleBlur}\n              value={values.fullName}\n              onChange={handleChange}\n              isValid={touched.fullName && !errors.fullName}\n              isInvalid={touched.fullName && !!errors.fullName}\n            />\n            <Form.Control.Feedback type=\"invalid\">\n              {errors.fullName}\n            </Form.Control.Feedback>\n          </Form.Group>\n\n          <Form.Group>\n            <Form.Label>Email address</Form.Label>\n            <Form.Control\n              type=\"email\"\n              name=\"email\"\n              placeholder=\"Enter email\"\n              onBlur={handleBlur}\n              value={values.email}\n              onChange={handleChange}\n              isValid={touched.email && !errors.email}\n              isInvalid={touched.email && !!errors.email}\n            />\n            <Form.Control.Feedback type=\"invalid\">\n              {errors.email}\n            </Form.Control.Feedback>\n          </Form.Group>\n\n          <Form.Group>\n            <Form.Label>Password</Form.Label>\n            <Form.Control\n              type=\"password\"\n              name=\"password\"\n              placeholder=\"Password\"\n              onChange={handleChange}\n              onBlur={handleBlur}\n              value={values.password}\n              isValid={touched.password && !errors.password}\n              isInvalid={touched.password && !!errors.password}\n            />\n            <Form.Control.Feedback type=\"invalid\">\n              {errors.password}\n            </Form.Control.Feedback>\n          </Form.Group>\n\n          <Form.Group>\n            <Form.Label>Confirm Password</Form.Label>\n            <Form.Control\n              type=\"password\"\n              name=\"confirmPassword\"\n              placeholder=\"Password\"\n              onChange={handleChange}\n              onBlur={handleBlur}\n              value={values.confirmPassword}\n              isValid={touched.confirmPassword && !errors.confirmPassword}\n              isInvalid={touched.confirmPassword && !!errors.confirmPassword}\n            />\n            <Form.Control.Feedback type=\"invalid\">\n              {errors.confirmPassword}\n            </Form.Control.Feedback>\n          </Form.Group>\n\n          <Button variant=\"primary\" type=\"submit\" disabled={isSubmitting}>\n            Register\n          </Button>\n        </Form>\n      )}\n    </Formik>\n  );\n};\n","import React, { FC } from \"react\";\nimport { Tab, Tabs } from \"react-bootstrap\";\nimport { useDispatch } from \"react-redux\";\nimport { FormikHelpers } from \"formik\";\nimport { LoginForm } from \"./LoginForm\";\nimport { RegistrationForm, RegistrationFormData } from \"./RegistrationForm\";\nimport LoginData from \"../../interfaces/LoginData\";\nimport { login, register } from \"../current-user/currentUserSlice\";\nimport { AppDispatch } from \"../../app/store\";\nimport getErrorMessageFromJWR from \"../../utils/getErrorMessageFromJWR\";\n\nconst LoginTabsContainer: FC<unknown> = () => {\n  const dispatch = useDispatch<AppDispatch>();\n\n  const doLogin = React.useCallback(\n    (values: LoginData, formikHelpers: FormikHelpers<LoginData>) => {\n      return dispatch(login(values)).catch((err) => {\n        formikHelpers.setStatus(getErrorMessageFromJWR(err));\n      });\n    },\n    [dispatch]\n  );\n\n  const doSignUp = React.useCallback(\n    (\n      values: RegistrationFormData,\n      formikHelpers: FormikHelpers<RegistrationFormData>\n    ) => {\n      return dispatch(\n        register({\n          fullName: values.fullName,\n          email: values.email,\n          password: values.password,\n        })\n      ).catch((err) => {\n        formikHelpers.setStatus(getErrorMessageFromJWR(err));\n      });\n    },\n    [dispatch]\n  );\n\n  return (\n    <Tabs transition={false}>\n      <Tab eventKey=\"home\" title=\"Login\">\n        <LoginForm onSubmit={doLogin} />\n      </Tab>\n      <Tab eventKey=\"profile\" title=\"Register\">\n        <RegistrationForm onSubmit={doSignUp} />\n      </Tab>\n    </Tabs>\n  );\n};\n\nexport default LoginTabsContainer;\n","import React, { FC } from \"react\";\nimport { Modal } from \"react-bootstrap\";\nimport LoginTabsContainer from \"./LoginTabsContainer\";\n\nexport interface AuthModalProps {\n  show?: boolean;\n  onHide?(): void;\n}\n\nexport const AuthModal: FC<AuthModalProps> = ({ show = false, onHide }) => {\n  return (\n    <div>\n      <Modal show={show} onHide={onHide} animation={false}>\n        <Modal.Header closeButton>\n          <Modal.Title>Login</Modal.Title>\n        </Modal.Header>\n\n        <Modal.Body>\n          <LoginTabsContainer />\n        </Modal.Body>\n      </Modal>\n    </div>\n  );\n};\n","import React, { FC, useCallback } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { AuthModal } from \"./AuthModal\";\nimport { RootState } from \"../../app/rootReducer\";\nimport { hideModal } from \"../modal/modalSlice\";\n\nconst AuthModalContainer: FC<unknown> = () => {\n  const isModalVisible = useSelector(\n    (state: RootState) => state.modal.showModal === \"auth\"\n  );\n\n  const dispatch = useDispatch();\n\n  const handleHide = useCallback(() => {\n    dispatch(hideModal());\n  }, [dispatch]);\n\n  return <AuthModal show={isModalVisible} onHide={handleHide} />;\n};\n\nexport default AuthModalContainer;\n","/* eslint-disable react/no-array-index-key */\n\nimport React, { FC, useCallback } from \"react\";\nimport { Toast } from \"react-bootstrap\";\nimport { Message } from \"../../interfaces/Message\";\nimport css from \"./Messages.module.scss\";\n\nexport interface MessagesProps {\n  items?: Message[];\n  onHideMessage?(messageId: string): void;\n}\n\nexport const Messages: FC<MessagesProps> = ({ items = [], onHideMessage }) => {\n  const makeHideMessageHandler = useCallback(\n    (messageId: string) => () => {\n      if (onHideMessage) {\n        onHideMessage(messageId);\n      }\n    },\n    [onHideMessage]\n  );\n\n  return (\n    <div className={css.messages}>\n      {items.map((item, index) => (\n        <Toast\n          key={index}\n          onClose={makeHideMessageHandler(item.id)}\n          show\n          delay={3000}\n          autohide={item.autoHide === undefined ? true : item.autoHide}\n          animation={false}\n        >\n          <Toast.Body>{item.body}</Toast.Body>\n        </Toast>\n      ))}\n    </div>\n  );\n};\n","import React, { FC, useCallback } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Messages } from \"./Messages\";\nimport { RootState } from \"../../app/rootReducer\";\nimport { hideMessage } from \"./messagesSlice\";\n\nconst MessagesContainer: FC<unknown> = () => {\n  const dispatch = useDispatch();\n\n  const messages = useSelector((state: RootState) => state.messages);\n\n  const handleHideMessage = useCallback(\n    (messageId: string) => {\n      dispatch(hideMessage(messageId));\n    },\n    [dispatch]\n  );\n\n  return <Messages items={messages} onHideMessage={handleHideMessage} />;\n};\n\nexport default MessagesContainer;\n","import React, { FC, useEffect } from \"react\";\nimport { HashRouter, Switch, Route } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"./App.scss\";\nimport HomePage from \"../features/home-page/HomePage\";\nimport GamePage from \"../features/single-game/GamePage\";\nimport { fetchCurrentUser } from \"../features/current-user/currentUserSlice\";\nimport {\n  watchChatMessages,\n  watchConnection,\n  watchGames,\n  watchSeeks,\n  watchUsers,\n} from \"../features/data-subscription/dataSubscriptionSlice\";\nimport { startGameClock } from \"../features/game-clock/gameClockSlice\";\nimport HeaderContainer from \"../features/header/HeaderContainer\";\nimport AuthModalContainer from \"../features/auth-modal/AuthModalContainer\";\nimport { fetchGames } from \"../features/games-list/gamesListSlice\";\nimport { fetchSeeks } from \"../features/seeks-list/seeksListSlice\";\nimport MessagesContainer from \"../features/messages/MessagesContainer\";\nimport { fetchUsers } from \"../features/users-list/usersListSlice\";\nimport { AppDispatch } from \"./store\";\n\nconst App: FC = () => {\n  const dispatch = useDispatch<AppDispatch>();\n\n  useEffect(() => {\n    dispatch(fetchCurrentUser());\n    const stopGameClock = dispatch(startGameClock());\n    dispatch(watchChatMessages());\n    dispatch(watchGames());\n    dispatch(watchSeeks());\n    dispatch(watchUsers());\n    dispatch(fetchGames());\n    dispatch(fetchUsers());\n    dispatch(fetchSeeks());\n    dispatch(watchConnection());\n\n    return () => {\n      stopGameClock();\n    };\n  }, [dispatch]);\n\n  return (\n    <div className=\"container-fluid\">\n      <HashRouter basename=\"/\">\n        <HeaderContainer />\n        <AuthModalContainer />\n        <MessagesContainer />\n\n        <Switch>\n          <Route path=\"/game/:id\">\n            <GamePage />\n          </Route>\n          <Route path=\"/\">\n            <HomePage />\n          </Route>\n        </Switch>\n      </HashRouter>\n    </div>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","/* eslint-disable no-param-reassign */\n/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable import/no-cycle */\n\nimport { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport {\n  getCurrentUserSuccess,\n  loginSuccess,\n  registerSuccess,\n} from \"../current-user/currentUserSlice\";\nimport { getGamesListSuccess } from \"../games-list/gamesListSlice\";\nimport { getSeeksListSuccess } from \"../seeks-list/seeksListSlice\";\nimport { getUsersListSuccess } from \"../users-list/usersListSlice\";\nimport {\n  getSingleGameSuccess,\n  abortGameSuccess,\n  resignGameSuccess,\n  offerDrawSuccess,\n  acceptDrawOfferSuccess,\n  declineDrawOfferSuccess,\n} from \"../single-game/singleGameSlice\";\nimport {\n  challengeAiSuccess,\n  createSeekSuccess,\n  acceptSeekSuccess,\n} from \"../challenge/challengeSlice\";\nimport { oneSecondPassed } from \"../game-clock/gameClockSlice\";\nimport {\n  updateGameBySubscription,\n  createGameBySubscription,\n  createSeekBySubscription,\n  updateSeekBySubscription,\n  removeSeekBySubscription,\n  createUserBySubscription,\n  updateUserBySubscription,\n  createChatMessageBySubscription,\n} from \"../data-subscription/dataSubscriptionSlice\";\nimport {\n  makeMoveRequest,\n  makeMoveSuccess,\n  MoveRequestPayload,\n} from \"../move/moveSlice\";\nimport NormalizedUserEntity from \"../../normalizr/interfaces/NormalizedUserEntity\";\nimport NormalizedGameEntity from \"../../normalizr/interfaces/NormalizedGameEntity\";\nimport NormalizedSeekEntity from \"../../normalizr/interfaces/NormalizedSeekEntity\";\nimport NormalizedChatMessageEntity from \"../../normalizr/interfaces/NormalizedChatMessageEntity\";\nimport {\n  getChatMessagesListSuccess,\n  GetChatMessagesListSuccessPayload,\n  createChatMessageSuccess,\n} from \"../chat/chatSlice\";\nimport { getMovesQnt } from \"../../utils/chess\";\n\nexport interface EntitiesState {\n  users: Record<string, NormalizedUserEntity>;\n  games: Record<string, NormalizedGameEntity>;\n  seeks: Record<string, NormalizedSeekEntity>;\n  chatMessages: Record<string, NormalizedChatMessageEntity>;\n}\n\nconst initialState: EntitiesState = {\n  users: {},\n  games: {},\n  seeks: {},\n  chatMessages: {},\n};\n\nconst getNormalizedDataReducer = (\n  state: EntitiesState,\n  action: Pick<\n    PayloadAction<{\n      entities: Partial<EntitiesState>;\n    }>,\n    \"payload\"\n  >\n) => {\n  Object.assign(state.users, action.payload.entities.users);\n  Object.assign(state.games, action.payload.entities.games);\n  Object.assign(state.seeks, action.payload.entities.seeks);\n  Object.assign(state.chatMessages, action.payload.entities.chatMessages);\n};\n\nconst entitiesSlice = createSlice({\n  name: \"entities\",\n  initialState,\n  reducers: {},\n  extraReducers: {\n    [getCurrentUserSuccess.type]: (\n      state: EntitiesState,\n      action: PayloadAction<null | {\n        entities: Partial<EntitiesState>;\n      }>\n    ) => {\n      if (action.payload) {\n        getNormalizedDataReducer(state, {\n          payload: action.payload,\n        });\n      }\n    },\n    [loginSuccess.type]: getNormalizedDataReducer,\n    [registerSuccess.type]: getNormalizedDataReducer,\n    [getGamesListSuccess.type]: getNormalizedDataReducer,\n    [getSeeksListSuccess.type]: getNormalizedDataReducer,\n    [getSingleGameSuccess.type]: getNormalizedDataReducer,\n    [abortGameSuccess.type]: getNormalizedDataReducer,\n    [createChatMessageSuccess.type]: getNormalizedDataReducer,\n    [createChatMessageBySubscription.type]: getNormalizedDataReducer,\n    [getChatMessagesListSuccess.type]: (\n      state: EntitiesState,\n      action: PayloadAction<GetChatMessagesListSuccessPayload>\n    ) =>\n      getNormalizedDataReducer(state, {\n        payload: action.payload.normalizedChatMessages,\n      }),\n    [resignGameSuccess.type]: getNormalizedDataReducer,\n    [offerDrawSuccess.type]: getNormalizedDataReducer,\n    [acceptDrawOfferSuccess.type]: getNormalizedDataReducer,\n    [declineDrawOfferSuccess.type]: getNormalizedDataReducer,\n    [challengeAiSuccess.type]: getNormalizedDataReducer,\n    [createSeekSuccess.type]: getNormalizedDataReducer,\n    [createSeekBySubscription.type]: getNormalizedDataReducer,\n    [updateSeekBySubscription.type]: getNormalizedDataReducer,\n    [removeSeekBySubscription.type]: (\n      state: EntitiesState,\n      action: PayloadAction<number>\n    ) => {\n      delete state.seeks[action.payload];\n    },\n    [updateGameBySubscription.type]: getNormalizedDataReducer,\n    [createGameBySubscription.type]: getNormalizedDataReducer,\n    [getUsersListSuccess.type]: getNormalizedDataReducer,\n    [createUserBySubscription.type]: getNormalizedDataReducer,\n    [updateUserBySubscription.type]: getNormalizedDataReducer,\n    [makeMoveRequest.type]: (\n      state: EntitiesState,\n      action: PayloadAction<MoveRequestPayload>\n    ) => {\n      state.games[action.payload.gameId].turn =\n        state.games[action.payload.gameId].turn === \"white\" ? \"black\" : \"white\";\n      state.games[action.payload.gameId].moves = `${\n        state.games[action.payload.gameId].moves\n      } ${action.payload.move}`.trim();\n    },\n    [makeMoveSuccess.type]: getNormalizedDataReducer,\n    [acceptSeekSuccess.type]: getNormalizedDataReducer,\n    [oneSecondPassed.type]: (state: EntitiesState) => {\n      const gameIds = Object.keys(state.games);\n\n      gameIds.forEach((gameId) => {\n        const game = state.games[gameId];\n\n        if (game.status === \"started\") {\n          if (getMovesQnt(game) > 1) {\n            const timePropName = game.turn === \"white\" ? \"wtime\" : \"btime\";\n\n            game[timePropName] -= 1000;\n            if (game[timePropName] < 0) {\n              game[timePropName] = 0;\n            }\n\n            if (game[timePropName] === 0) {\n              game.status = \"outoftime\";\n              game.winner = game.turn === \"white\" ? \"black\" : \"white\";\n            }\n          }\n        }\n      });\n    },\n  },\n});\n\nexport default entitiesSlice.reducer;\n","/* eslint-disable no-param-reassign */\n/* eslint-disable import/no-cycle */\n/* eslint-disable @typescript-eslint/no-unused-vars */\n\nimport { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport {\n  acceptSeekRequest,\n  acceptSeekSuccess,\n  acceptSeekError,\n} from \"../challenge/challengeSlice\";\nimport ItemErrorPayload from \"../../interfaces/ItemErrorPayload\";\nimport NormalizedData from \"../../normalizr/interfaces/NormalizedData\";\n\ninterface AcceptSeekRequestState {\n  inProcess: boolean;\n  itemId: number | null;\n  error: string | null;\n}\n\nconst initialState: AcceptSeekRequestState = {\n  inProcess: false,\n  itemId: null,\n  error: null,\n};\n\nconst acceptSeekRequestSlice = createSlice({\n  name: \"acceptSeekRequest\",\n  initialState,\n  reducers: {},\n  extraReducers: {\n    [acceptSeekRequest.type]: (state, action: PayloadAction<number>) => {\n      state.inProcess = true;\n      state.itemId = action.payload;\n      state.error = null;\n    },\n    [acceptSeekSuccess.type]: (\n      state,\n      _action: PayloadAction<NormalizedData<number>>\n    ) => {\n      state.inProcess = false;\n      state.itemId = null;\n      state.error = null;\n    },\n    [acceptSeekError.type]: (\n      state,\n      action: PayloadAction<ItemErrorPayload>\n    ) => {\n      state.inProcess = false;\n      state.itemId = action.payload.itemId;\n      state.error = action.payload.error;\n    },\n  },\n});\n\nexport default acceptSeekRequestSlice.reducer;\n","/* eslint-disable import/no-cycle */\n\nimport { combineReducers } from \"@reduxjs/toolkit\";\nimport chatReducer from \"../features/chat/chatSlice\";\nimport gamesListReducer from \"../features/games-list/gamesListSlice\";\nimport seeksListReducer from \"../features/seeks-list/seeksListSlice\";\nimport usersListReducer from \"../features/users-list/usersListSlice\";\nimport currentUserReducer from \"../features/current-user/currentUserSlice\";\nimport entitiesReducer from \"../features/entities/entitiesSlice\";\nimport singleGameReducer from \"../features/single-game/singleGameSlice\";\nimport acceptSeekRequestReducer from \"../features/accept-seek-request/acceptSeekRequestSlice\";\nimport messagesReducer from \"../features/messages/messagesSlice\";\nimport modalReducer from \"../features/modal/modalSlice\";\n\nconst rootReducer = combineReducers({\n  // challenge: challengeReducer,\n  chat: chatReducer,\n  currentUser: currentUserReducer,\n  gamesList: gamesListReducer,\n  entities: entitiesReducer,\n  // dataSubscription: dataSubscriptionReducer,\n  singleGame: singleGameReducer,\n  seeksList: seeksListReducer,\n  usersList: usersListReducer,\n  acceptSeekRequest: acceptSeekRequestReducer,\n  messages: messagesReducer,\n  modal: modalReducer,\n});\n\nexport type RootState = ReturnType<typeof rootReducer>;\n\nexport default rootReducer;\n","/* eslint-disable global-require */\n/* eslint-disable @typescript-eslint/no-var-requires */\n/* eslint-disable import/no-cycle */\n\nimport { Action, configureStore } from \"@reduxjs/toolkit\";\nimport { ThunkAction } from \"redux-thunk\";\nimport rootReducer, { RootState } from \"./rootReducer\";\n\nconst store = configureStore({\n  reducer: rootReducer,\n});\n\nif (process.env.NODE_ENV === \"development\" && module.hot) {\n  module.hot.accept(\"./rootReducer\", () => {\n    const newRootReducer = require(\"./rootReducer\").default;\n    store.replaceReducer(newRootReducer);\n  });\n}\n\nexport type AppDispatch = typeof store.dispatch;\n\nexport type AppThunk<R> = ThunkAction<R, RootState, unknown, Action<string>>;\n\nexport default store;\n","/* eslint-disable global-require */\n/* eslint-disable @typescript-eslint/no-var-requires */\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport \"./index.css\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport store from \"./app/store\";\n\nconst render = () => {\n  const App = require(\"./app/App\").default;\n\n  ReactDOM.render(\n    <React.StrictMode>\n      <Provider store={store}>\n        <App />\n      </Provider>\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n  );\n};\n\nrender();\n\nif (process.env.NODE_ENV === \"development\" && module.hot) {\n  module.hot.accept(\"./app/App\", render);\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","/* eslint-disable no-param-reassign */\n/* eslint-disable import/no-cycle */\n/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\n/* eslint-disable prefer-object-spread */\n\nimport { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { JWR } from \"sails.io.js\";\nimport { normalize } from \"normalizr\";\nimport NormalizedData from \"../../normalizr/interfaces/NormalizedData\";\nimport ItemErrorPayload from \"../../interfaces/ItemErrorPayload\";\nimport { AppThunk } from \"../../app/store\";\nimport ioClient from \"../../services/ioClient\";\nimport getErrorMessageFromJWR from \"../../utils/getErrorMessageFromJWR\";\nimport { ChatMessage } from \"../../interfaces/ChatMessage\";\nimport chatMessageSchema from \"../../normalizr/schemas/chatMessageSchema\";\nimport { createChatMessageBySubscription } from \"../data-subscription/dataSubscriptionSlice\";\n\ninterface GameChatMessagesState {\n  isLoading: boolean;\n  error: string | null;\n  items: number[];\n}\n\nexport interface GetChatMessagesListSuccessPayload {\n  gameId: number;\n  normalizedChatMessages: NormalizedData<number[]>;\n}\n\ninterface ChatMessagesState {\n  [gameId: string]: GameChatMessagesState;\n}\n\nexport const defaultGameChatMessagesState: GameChatMessagesState = {\n  isLoading: true,\n  error: null,\n  items: [],\n};\n\nconst initialState: ChatMessagesState = {};\n\nconst chatSlice = createSlice({\n  name: \"chat\",\n  initialState,\n  reducers: {\n    getChatMessagesListRequest(state, action: PayloadAction<number>) {\n      state[action.payload] = Object.assign(\n        {},\n        defaultGameChatMessagesState,\n        state[action.payload],\n        {\n          isLoading: true,\n          error: null,\n        }\n      );\n    },\n    getChatMessagesListSuccess(\n      state,\n      action: PayloadAction<GetChatMessagesListSuccessPayload>\n    ) {\n      const { gameId } = action.payload;\n\n      state[gameId] = {\n        isLoading: false,\n        error: null,\n        items: action.payload.normalizedChatMessages.result,\n      };\n    },\n    getChatMessagesListError(state, action: PayloadAction<ItemErrorPayload>) {\n      const gameId = action.payload.itemId;\n\n      state[gameId] = {\n        isLoading: false,\n        error: action.payload.error,\n        items: [],\n      };\n    },\n    createChatMessageRequest(_state, _action: PayloadAction<number>) {},\n    createChatMessageSuccess(\n      state,\n      action: PayloadAction<NormalizedData<number>>\n    ) {\n      const chatMessageId = action.payload.result;\n      const gameId = action.payload.entities.chatMessages![chatMessageId].game;\n\n      state[gameId].items.push(chatMessageId);\n    },\n    createChatMessageError(_state, _action: PayloadAction<ItemErrorPayload>) {},\n  },\n  extraReducers: {\n    [createChatMessageBySubscription.type]: (\n      state,\n      action: PayloadAction<NormalizedData<number>>\n    ) => {\n      const chatMessageId = action.payload.result;\n      const gameId = action.payload.entities.chatMessages![chatMessageId].game;\n\n      // ignore message if there is no such game in the state\n      if (state[gameId]) {\n        state[gameId].items.push(chatMessageId);\n      }\n    },\n  },\n});\n\nexport const {\n  getChatMessagesListRequest,\n  getChatMessagesListSuccess,\n  getChatMessagesListError,\n  createChatMessageRequest,\n  createChatMessageSuccess,\n  createChatMessageError,\n} = chatSlice.actions;\n\nexport default chatSlice.reducer;\n\nexport const fetchChatMessages = (\n  gameId: number\n): AppThunk<Promise<ChatMessage[]>> => (dispatch) => {\n  dispatch(getChatMessagesListRequest(gameId));\n\n  return new Promise((resolve, reject) => {\n    ioClient.socket.get(\n      `/api/v1/board/game/${gameId}/chat`,\n      (body: unknown, jwr: JWR) => {\n        if (jwr.statusCode === 200) {\n          const normalizedChatMessages = normalize(body as ChatMessage[], [\n            chatMessageSchema,\n          ]);\n          dispatch(\n            getChatMessagesListSuccess({\n              gameId,\n              normalizedChatMessages,\n            })\n          );\n\n          resolve(body as ChatMessage[]);\n        } else {\n          dispatch(\n            getChatMessagesListError({\n              itemId: gameId,\n              error: getErrorMessageFromJWR(jwr),\n            })\n          );\n          reject(jwr);\n        }\n      }\n    );\n  });\n};\n\nexport const createChatMessage = (\n  gameId: number,\n  text: string\n): AppThunk<Promise<ChatMessage>> => (dispatch) => {\n  dispatch(createChatMessageRequest(gameId));\n\n  return new Promise((resolve, reject) => {\n    ioClient.socket.post(\n      `/api/v1/board/game/${gameId}/chat`,\n      {\n        text,\n      },\n      (body: unknown, jwr: JWR) => {\n        if (jwr.statusCode === 200) {\n          const normalizedChatMessage = normalize(\n            body as ChatMessage,\n            chatMessageSchema\n          );\n          dispatch(createChatMessageSuccess(normalizedChatMessage));\n\n          resolve(body as ChatMessage);\n        } else {\n          dispatch(\n            createChatMessageError({\n              itemId: gameId,\n              error: getErrorMessageFromJWR(jwr),\n            })\n          );\n          reject(jwr);\n        }\n      }\n    );\n  });\n};\n","/* eslint-disable import/prefer-default-export */\n\nimport { Move } from \"ii-react-chessboard\";\nimport { ChessInstance } from \"chess.js\";\nimport Game from \"../interfaces/Game\";\nimport makeChessInstance from \"./makeChessInstance\";\n\nexport const isPromotionMove = (game: Game, move: Move): boolean => {\n  const chess: ChessInstance = makeChessInstance(game);\n  const moves = chess.moves({ verbose: true });\n\n  for (let i = 0, movesQnt = moves.length; i < movesQnt; i += 1) {\n    if (moves[i].flags.indexOf(\"p\") !== -1 && moves[i].from === move.from) {\n      return true;\n    }\n  }\n  return false;\n};\n\nexport const getMovesQnt = (game: Pick<Game, \"moves\">): number => {\n  if (game.moves.length === 0) {\n    return 0;\n  }\n\n  return game.moves.split(\" \").length;\n};\n","/* eslint-disable import/no-cycle */\n/* eslint-disable no-param-reassign */\n\nimport { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport {\n  challengeAiSuccess,\n  createSeekError,\n  createSeekRequest,\n  createSeekSuccess,\n} from \"../challenge/challengeSlice\";\nimport {\n  loginSuccess,\n  registerSuccess,\n} from \"../current-user/currentUserSlice\";\n\nexport type ModalName = \"auth\" | \"challengeAi\" | \"seek\";\n\nexport interface ShowModalPayload {\n  name: ModalName;\n  allowClose: boolean;\n}\n\ninterface ModalState {\n  allowClose: boolean;\n  showModal: ModalName | null;\n}\n\nconst initialState: ModalState = {\n  allowClose: true,\n  showModal: null,\n};\n\nconst modalSlice = createSlice({\n  name: \"modal\",\n  initialState,\n  reducers: {\n    showModal(state, action: PayloadAction<ShowModalPayload>) {\n      state.showModal = action.payload.name;\n      state.allowClose = action.payload.allowClose;\n    },\n    hideModal(state) {\n      state.showModal = null;\n      state.allowClose = true;\n    },\n  },\n  extraReducers: {\n    [createSeekRequest.type]: (state) => {\n      state.allowClose = false;\n    },\n    [createSeekSuccess.type]: (state) => {\n      state.showModal = null;\n      state.allowClose = true;\n    },\n    [createSeekError.type]: (state) => {\n      state.allowClose = true;\n    },\n    [loginSuccess.type]: (state) => {\n      state.showModal = null;\n      state.allowClose = true;\n    },\n    [registerSuccess.type]: (state) => {\n      state.showModal = null;\n      state.allowClose = true;\n    },\n    [challengeAiSuccess.type]: (state) => {\n      state.showModal = null;\n      state.allowClose = true;\n    },\n  },\n});\n\nexport const { showModal, hideModal } = modalSlice.actions;\n\nexport default modalSlice.reducer;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"piece\":\"PromotionChoiceModal_piece__3X8mT\",\"bB\":\"PromotionChoiceModal_bB__1a2sj\",\"bK\":\"PromotionChoiceModal_bK__1-JsQ\",\"bN\":\"PromotionChoiceModal_bN__1_xeb\",\"bP\":\"PromotionChoiceModal_bP__1L1RS\",\"bQ\":\"PromotionChoiceModal_bQ__14de1\",\"bR\":\"PromotionChoiceModal_bR__Gvlcg\",\"wB\":\"PromotionChoiceModal_wB__3zy1F\",\"wK\":\"PromotionChoiceModal_wK__mz-Oc\",\"wN\":\"PromotionChoiceModal_wN__3SOQS\",\"wP\":\"PromotionChoiceModal_wP__3qDSP\",\"wQ\":\"PromotionChoiceModal_wQ__28Iaa\",\"wR\":\"PromotionChoiceModal_wR__2E7j8\"};","import { Chess, ChessInstance } from \"chess.js\";\nimport Game from \"../interfaces/Game\";\n\nconst startPositionFen =\n  \"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1\";\n\nexport default (\n  game: Pick<Game, \"initialFen\" | \"moves\">,\n  rewindToMoveIndex: number | null = null\n): ChessInstance => {\n  let { initialFen } = game;\n  if (initialFen === \"startpos\") {\n    initialFen = startPositionFen;\n  }\n\n  const chess = new Chess(initialFen);\n\n  if (game.moves) {\n    game.moves.split(\" \").forEach((move, index) => {\n      if (rewindToMoveIndex !== null && index >= rewindToMoveIndex) {\n        return;\n      }\n\n      const result = chess.move(move, {\n        sloppy: true,\n      });\n\n      if (!result) {\n        throw Error(`incorrect move: ${move}`);\n      }\n    });\n  }\n\n  return chess;\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"colorSubmits\":\"CreateSeekForm_colorSubmits__1rtRc\",\"colorSubmitsButton\":\"CreateSeekForm_colorSubmitsButton__2SUlU\",\"whiteButton\":\"CreateSeekForm_whiteButton__2Jb8D\",\"blackButton\":\"CreateSeekForm_blackButton__1J0eY\",\"randomButton\":\"CreateSeekForm_randomButton__34hZ3\",\"spinnerWrapper\":\"CreateSeekForm_spinnerWrapper__1uHk1\",\"spinnerButton\":\"CreateSeekForm_spinnerButton__2VfoE\"};","import { schema } from \"normalizr\";\nimport userSchema from \"./userSchema\";\nimport gameSchema from \"./gameSchema\";\n\nconst seekSchema = new schema.Entity(\"seeks\", {\n  createdBy: userSchema,\n  game: gameSchema,\n});\n\nexport default seekSchema;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"levelButtonGroup\":\"ChallengeAiForm_levelButtonGroup__1lnm_\",\"colorSubmits\":\"ChallengeAiForm_colorSubmits__1pM28\",\"colorSubmitsButton\":\"ChallengeAiForm_colorSubmitsButton__2P6Lx\",\"whiteButton\":\"ChallengeAiForm_whiteButton__2nTjs\",\"blackButton\":\"ChallengeAiForm_blackButton__1LVeL\",\"randomButton\":\"ChallengeAiForm_randomButton__1S07l\"};","import { schema } from \"normalizr\";\nimport userSchema from \"./userSchema\";\n\nconst chatMessageSchema = new schema.Entity(\"chatMessages\", {\n  createdBy: userSchema,\n});\n\nexport default chatMessageSchema;\n","/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable @typescript-eslint/no-empty-interface */\n/* eslint-disable import/no-cycle */\n\nimport { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { JWR } from \"sails.io.js\";\nimport { normalize } from \"normalizr\";\nimport NormalizedData from \"../../normalizr/interfaces/NormalizedData\";\nimport { AppThunk } from \"../../app/store\";\nimport Game from \"../../interfaces/Game\";\nimport ioClient from \"../../services/ioClient\";\nimport gameSchema from \"../../normalizr/schemas/gameSchema\";\nimport getErrorMessageFromJWR from \"../../utils/getErrorMessageFromJWR\";\n\ninterface MoveState {}\n\nconst initialState: MoveState = {};\n\nconst moveSlice = createSlice({\n  name: \"move\",\n  initialState,\n  reducers: {\n    makeMoveRequest(_state, _action: PayloadAction<MoveRequestPayload>) {},\n    makeMoveSuccess(_state, _action: PayloadAction<NormalizedData<number>>) {},\n    makeMoveError(_state, _action: PayloadAction<string>) {},\n  },\n  extraReducers: {},\n});\n\nexport const {\n  makeMoveRequest,\n  makeMoveSuccess,\n  makeMoveError,\n} = moveSlice.actions;\n\nexport default moveSlice.reducer;\n\nexport interface MoveRequestPayload {\n  gameId: number;\n  move: string;\n}\n\nexport const makeMove = (\n  gameId: number,\n  move: string\n): AppThunk<Promise<Game>> => (dispatch) => {\n  dispatch(\n    makeMoveRequest({\n      gameId,\n      move,\n    })\n  );\n\n  return new Promise((resolve, reject) => {\n    ioClient.socket.post(\n      `/api/v1/board/game/${gameId}/move/${move}`,\n      {},\n      (body: unknown, jwr: JWR) => {\n        if (jwr.statusCode === 200) {\n          const normalizedGame = normalize(body as Game, gameSchema);\n\n          dispatch(makeMoveSuccess(normalizedGame));\n          resolve(body as Game);\n        } else {\n          dispatch(makeMoveError(getErrorMessageFromJWR(jwr)));\n          reject(jwr);\n        }\n      }\n    );\n  });\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"movesWrapper\":\"GameMoves_movesWrapper__2X9ck\",\"moveNumber\":\"GameMoves_moveNumber__3tyZT\",\"move\":\"GameMoves_move__21iOk\",\"selected\":\"GameMoves_selected__2FXRO\"};","/* eslint-disable no-param-reassign */\n/* eslint-disable import/no-cycle */\n/* eslint-disable @typescript-eslint/no-unused-vars */\n\nimport { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { JWR } from \"sails.io.js\";\nimport { normalize } from \"normalizr\";\nimport { AppThunk } from \"../../app/store\";\nimport Game from \"../../interfaces/Game\";\nimport ioClient from \"../../services/ioClient\";\nimport gameSchema from \"../../normalizr/schemas/gameSchema\";\nimport NormalizedData from \"../../normalizr/interfaces/NormalizedData\";\nimport getErrorMessageFromJWR from \"../../utils/getErrorMessageFromJWR\";\n\ninterface GamesListState {\n  isLoading: boolean;\n  error: string | null;\n}\n\nconst initialState: GamesListState = {\n  isLoading: true,\n  error: null,\n};\n\nconst gamesListSlice = createSlice({\n  name: \"games\",\n  initialState,\n  reducers: {\n    getGamesListRequest(state) {\n      state.isLoading = true;\n      state.error = null;\n    },\n    getGamesListSuccess(\n      state,\n      _action: PayloadAction<NormalizedData<number[]>>\n    ) {\n      state.isLoading = false;\n      state.error = null;\n    },\n    getGamesListError(state, action: PayloadAction<string>) {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n  },\n});\n\nexport const {\n  getGamesListRequest,\n  getGamesListSuccess,\n  getGamesListError,\n} = gamesListSlice.actions;\n\nexport default gamesListSlice.reducer;\n\nexport const fetchGames = (): AppThunk<Promise<Game[]>> => (dispatch) => {\n  dispatch(getGamesListRequest());\n\n  return new Promise((resolve, reject) => {\n    ioClient.socket.get(\n      \"/api/v1/game\",\n      { limit: 300, sort: \"createdAt DESC\" },\n      (body: unknown, jwr: JWR) => {\n        if (jwr.statusCode === 200) {\n          const normalizedGames = normalize(body as Game[], [gameSchema]);\n          dispatch(getGamesListSuccess(normalizedGames));\n\n          resolve(body as Game[]);\n        } else {\n          dispatch(getGamesListError(getErrorMessageFromJWR(jwr)));\n          reject(jwr);\n        }\n      }\n    );\n  });\n};\n","/* eslint-disable no-param-reassign */\n/* eslint-disable import/no-cycle */\n\nimport { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { pull as _pull } from \"lodash\";\nimport { JWR } from \"sails.io.js\";\nimport { normalize } from \"normalizr\";\nimport NormalizedData from \"../../normalizr/interfaces/NormalizedData\";\nimport { AppThunk } from \"../../app/store\";\nimport ioClient from \"../../services/ioClient\";\nimport { Seek } from \"../../interfaces/Seek\";\nimport seekSchema from \"../../normalizr/schemas/seekSchema\";\nimport {\n  createSeekBySubscription,\n  updateSeekBySubscription,\n  removeSeekBySubscription,\n} from \"../data-subscription/dataSubscriptionSlice\";\nimport getErrorMessageFromJWR from \"../../utils/getErrorMessageFromJWR\";\n\ninterface SeeksListState {\n  isLoading: boolean;\n  error: string | null;\n  items: number[];\n}\n\nconst initialState: SeeksListState = {\n  isLoading: true,\n  error: null,\n  items: [],\n};\n\nconst seeksListSlice = createSlice({\n  name: \"seeks\",\n  initialState,\n  reducers: {\n    getSeeksListRequest(state) {\n      state.isLoading = true;\n      state.error = null;\n    },\n    getSeeksListSuccess(\n      state,\n      action: PayloadAction<NormalizedData<number[]>>\n    ) {\n      state.isLoading = false;\n      state.error = null;\n      state.items = action.payload.result;\n    },\n    getSeeksListError(state, action: PayloadAction<string>) {\n      state.isLoading = false;\n      state.error = action.payload;\n      state.items = [];\n    },\n  },\n  extraReducers: {\n    [createSeekBySubscription.type]: (\n      state: SeeksListState,\n      action: PayloadAction<NormalizedData<number>>\n    ) => {\n      if (!state.items.includes(action.payload.result)) {\n        state.items.unshift(action.payload.result);\n      }\n    },\n    [updateSeekBySubscription.type]: (\n      state: SeeksListState,\n      action: PayloadAction<NormalizedData<number>>\n    ) => {\n      if (!state.items.includes(action.payload.result)) {\n        state.items.unshift(action.payload.result);\n      }\n    },\n    [removeSeekBySubscription.type]: (\n      state: SeeksListState,\n      action: PayloadAction<number>\n    ) => {\n      _pull(state.items, action.payload);\n    },\n  },\n});\n\nexport const {\n  getSeeksListRequest,\n  getSeeksListSuccess,\n  getSeeksListError,\n} = seeksListSlice.actions;\n\nexport default seeksListSlice.reducer;\n\nexport const fetchSeeks = (): AppThunk<Promise<Seek[]>> => (dispatch) => {\n  dispatch(getSeeksListRequest());\n\n  return new Promise((resolve, reject) => {\n    ioClient.socket.get(\n      \"/api/v1/seek\",\n      {\n        sort: \"createdAt DESC\",\n      },\n      (body: unknown, jwr: JWR) => {\n        if (jwr.statusCode === 200) {\n          const normalizedGames = normalize(body as Seek[], [seekSchema]);\n          dispatch(getSeeksListSuccess(normalizedGames));\n\n          resolve(body as Seek[]);\n        } else {\n          dispatch(getSeeksListError(getErrorMessageFromJWR(jwr)));\n          reject(jwr);\n        }\n      }\n    );\n  });\n};\n","/* eslint-disable no-param-reassign */\n/* eslint-disable import/no-cycle */\n\nimport { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { JWR } from \"sails.io.js\";\nimport { normalize } from \"normalizr\";\nimport NormalizedData from \"../../normalizr/interfaces/NormalizedData\";\nimport {\n  createUserBySubscription,\n  updateUserBySubscription,\n} from \"../data-subscription/dataSubscriptionSlice\";\nimport { registerSuccess } from \"../current-user/currentUserSlice\";\nimport { AppThunk } from \"../../app/store\";\nimport ioClient from \"../../services/ioClient\";\nimport getErrorMessageFromJWR from \"../../utils/getErrorMessageFromJWR\";\nimport User from \"../../interfaces/User\";\nimport userSchema from \"../../normalizr/schemas/userSchema\";\n\ninterface UsersListState {\n  isLoading: boolean;\n  error: string | null;\n  items: number[];\n}\n\nconst initialState: UsersListState = {\n  isLoading: true,\n  error: null,\n  items: [],\n};\n\nconst usersListSlice = createSlice({\n  name: \"users\",\n  initialState,\n  reducers: {\n    getUsersListRequest(state) {\n      state.isLoading = true;\n      state.error = null;\n    },\n    getUsersListSuccess(\n      state,\n      action: PayloadAction<NormalizedData<number[]>>\n    ) {\n      state.isLoading = false;\n      state.error = null;\n      state.items = action.payload.result;\n    },\n    getUsersListError(state, action: PayloadAction<string>) {\n      state.isLoading = false;\n      state.error = action.payload;\n      state.items = [];\n    },\n  },\n  extraReducers: {\n    [registerSuccess.type]: (\n      state: UsersListState,\n      action: PayloadAction<NormalizedData<number>>\n    ) => {\n      if (!state.items.includes(action.payload.result)) {\n        state.items.push(action.payload.result);\n      }\n    },\n    [createUserBySubscription.type]: (\n      state: UsersListState,\n      action: PayloadAction<NormalizedData<number>>\n    ) => {\n      if (!state.items.includes(action.payload.result)) {\n        state.items.push(action.payload.result);\n      }\n    },\n    [updateUserBySubscription.type]: (\n      state: UsersListState,\n      action: PayloadAction<NormalizedData<number>>\n    ) => {\n      if (!state.items.includes(action.payload.result)) {\n        state.items.push(action.payload.result);\n      }\n    },\n  },\n});\n\nexport const {\n  getUsersListRequest,\n  getUsersListSuccess,\n  getUsersListError,\n} = usersListSlice.actions;\n\nexport default usersListSlice.reducer;\n\nexport const fetchUsers = (): AppThunk<Promise<User[]>> => (dispatch) => {\n  dispatch(getUsersListRequest());\n\n  return new Promise((resolve, reject) => {\n    ioClient.socket.get(\"/api/v1/user\", (body: unknown, jwr: JWR) => {\n      if (jwr.statusCode === 200) {\n        const normalizedUsers = normalize(body as User[], [userSchema]);\n        dispatch(getUsersListSuccess(normalizedUsers));\n\n        resolve(body as User[]);\n      } else {\n        dispatch(getUsersListError(getErrorMessageFromJWR(jwr)));\n        reject(jwr);\n      }\n    });\n  });\n};\n"],"sourceRoot":""}